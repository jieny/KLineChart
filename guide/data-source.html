<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>üìö Êï∞ÊçÆ | KLineChart</title>
    <meta name="description" content="üíπüìà ÂèØÈ´òÂ∫¶Ëá™ÂÆö‰πâÁöÑ‰∏ì‰∏öÁ∫ßËΩªÈáèÈáëËûçÂõæË°®„ÄÇ">
    <meta name="generator" content="VitePress v2.0.0-alpha.3">
    <link rel="preload stylesheet" href="/assets/style.BHWJ07Lq.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.87b519ad.js"></script>
    <script type="module" src="/assets/app.CbmSiHou.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.ZixRhF5X.js">
    <link rel="modulepreload" href="/assets/chunks/framework.oU-LsNvg.js">
    <link rel="modulepreload" href="/assets/guide_data-source.md.BVetm2y7.lean.js">
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <script>/**
     * @license
     * KLineChart v10.0.0-alpha5
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */(function(b,Rt){typeof exports=="object"&&typeof module<"u"?Rt(exports):typeof define=="function"&&define.amd?define(["exports"],Rt):Rt((b=typeof globalThis<"u"?globalThis:b||self).klinecharts={})})(this,function(b){"use strict";var Rt=function(r,e){return Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},Rt(r,e)};function V(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=r}Rt(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ne,me,_e,xe,ze,Ye,be,He,Wt,Mt,F=function(){return F=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},F.apply(this,arguments)};function Gt(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]])}return t}function Xe(r,e,t,i){return new(t||(t=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(c){o(c)}}function s(u){try{l(i.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(a,s)}l((i=i.apply(r,e||[])).next())})}function Ge(r,e){var t,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(t=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(c[0]===6&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(r,o)}catch(h){c=[6,h],i=0}finally{t=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function at(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i,n,o=t.call(r),a=[];try{for(;(e===void 0||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){n={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}return a}function Ut(r,e,t){if(t||arguments.length===2)for(var i,n=0,o=e.length;n<o;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}function Z(r,e){if(pt(r)||pt(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=r[t],n=e[t];pt(n)&&pt(i)?Z(i,n):E(e[t])&&(r[t]=Vt(e[t]))}}}function Vt(r){if(!pt(r))return r;var e=null;for(var t in e=yt(r)?[]:{},r)if(Object.prototype.hasOwnProperty.call(r,t)){var i=r[t];pt(i)?e[t]=Vt(i):e[t]=i}return e}function yt(r){return Object.prototype.toString.call(r)==="[object Array]"}function tt(r){return typeof r=="function"}function pt(r){return typeof r=="object"&&E(r)}function L(r){return typeof r=="number"&&Number.isFinite(r)}function E(r){return r!=null}function qt(r){return typeof r=="boolean"}function Y(r){return typeof r=="string"}function Nt(r){return r==="transparent"||r==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(r)||/^[hH][Ss][Ll][Aa]\(([\s]*(360ÔΩú3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(r)}function kt(r,e){var t=r.replace(/^#/,""),i=parseInt(t,16),n=i>>8&255,o=255&i;return"rgba(".concat(i>>16&255,", ").concat(n,", ").concat(o,", ").concat(e??1,")")}typeof SuppressedError=="function"&&SuppressedError,b.LineType=void 0,(Ne=b.LineType||(b.LineType={})).Dashed="dashed",Ne.Solid="solid",function(r){r.Stroke="stroke",r.Fill="fill"}(me||(me={})),b.PolygonType=void 0,(_e=b.PolygonType||(b.PolygonType={})).Stroke="stroke",_e.Fill="fill",_e.StrokeFill="stroke_fill",b.TooltipShowRule=void 0,(xe=b.TooltipShowRule||(b.TooltipShowRule={})).Always="always",xe.FollowCross="follow_cross",xe.None="none",b.TooltipShowType=void 0,(ze=b.TooltipShowType||(b.TooltipShowType={})).Standard="standard",ze.Rect="rect",b.TooltipFeatureType=void 0,(Ye=b.TooltipFeatureType||(b.TooltipFeatureType={})).Path="path",Ye.IconFont="icon_font",b.TooltipFeaturePosition=void 0,(be=b.TooltipFeaturePosition||(b.TooltipFeaturePosition={})).Left="left",be.Middle="middle",be.Right="right",b.CandleTooltipRectPosition=void 0,(He=b.CandleTooltipRectPosition||(b.CandleTooltipRectPosition={})).Fixed="fixed",He.Pointer="pointer",b.CandleType=void 0,(Wt=b.CandleType||(b.CandleType={})).CandleSolid="candle_solid",Wt.CandleStroke="candle_stroke",Wt.CandleUpStroke="candle_up_stroke",Wt.CandleDownStroke="candle_down_stroke",Wt.Ohlc="ohlc",Wt.Area="area",function(r){r.CurrentOpen="current_open",r.PreviousClose="previous_close"}(Mt||(Mt={}));var W={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function Ue(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:W.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function $i(){function r(){return{show:!0,line:{show:!0,style:b.LineType.Dashed,dashedValue:[4,2],size:1,color:W.GREY},text:{show:!0,style:b.PolygonType.Fill,color:W.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:b.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:W.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:W.GREY}}}return{show:!0,horizontal:r(),vertical:r()}}var Ji=/\\(\\)?/g,tn=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function K(r,e,t){if(E(r)){var i=[];e.replace(tn,function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=s;return E(l[1])?c=l[2].replace(Ji,"$1"):E(l[0])&&(c=l[0].trim()),i.push(c),""});for(var n=r,o=0,a=i.length;E(n)&&o<a;)n=n?.[i[o++]];return E(n)?n:t??"--"}return t??"--"}function qe(r,e){var t={};return r.formatToParts(new Date(e)).forEach(function(i){var n=i.type,o=i.value;switch(n){case"year":t.YYYY=o;break;case"month":t.MM=o;break;case"day":t.DD=o;break;case"hour":t.HH=o==="24"?"00":o;break;case"minute":t.mm=o;break;case"second":t.ss=o}}),t}function Ze(r,e,t){var i=qe(r,e);return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return i[n]})}function et(r,e){var t=+r;return L(t)?t.toFixed(e??2):"".concat(r)}function je(r){var e=+r;if(L(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(r)}function Qe(r,e){var t="".concat(r);if(e.length===0)return t;if(t.includes(".")){var i=t.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)}),".").concat(i[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)})}function Ke(r,e){var t="".concat(r);if(new RegExp("\\.0{"+e+",}[1-9][0-9]*$").test(t)){var i=t.split("."),n=i.length-1,o=i[n],a=/0*/.exec(o);if(E(a)){var s=a[0].length;return i[n]=o.replace(/0*/,"0{".concat(s,"}")),i.join(".")}}return t}var Bt,oe=null;function Dt(r){var e,t;return(t=(e=r.ownerDocument.defaultView)===null||e===void 0?void 0:e.devicePixelRatio)!==null&&t!==void 0?t:1}function Lt(r,e,t){return"".concat(e??"normal"," ").concat(r??12,"px ").concat(t??"Helvetica Neue")}function Zt(r,e,t,i){if(!E(oe)){var n=document.createElement("canvas"),o=Dt(n);(oe=n.getContext("2d")).scale(o,o)}return oe.font=Lt(e,t,i),Math.round(oe.measureText(r).width)}b.ActionType=void 0,(Bt=b.ActionType||(b.ActionType={})).OnZoom="onZoom",Bt.OnScroll="onScroll",Bt.OnVisibleRangeChange="onVisibleRangeChange",Bt.OnCandleTooltipFeatureClick="onCandleTooltipFeatureClick",Bt.OnCrosshairChange="onCrosshairChange",Bt.OnCandleBarClick="onCandleBarClick",Bt.OnPaneDrag="onPaneDrag";var Te,Ce,jt,en=function(){function r(){this._callbacks=[]}return r.prototype.subscribe=function(e){this._callbacks.indexOf(e)<0&&this._callbacks.push(e)},r.prototype.unsubscribe=function(e){if(tt(e)){var t=this._callbacks.indexOf(e);t>-1&&this._callbacks.splice(t,1)}else this._callbacks=[]},r.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},r.prototype.isEmpty=function(){return this._callbacks.length===0},r}();function we(r,e,t,i){var n,o=r.result,a=r.figures,s=r.styles,l=K(s,"circles",t.circles),u=l.length,c=K(s,"bars",t.bars),h=c.length,p=K(s,"lines",t.lines),d=p.length,v=0,g=0,f=0,x=0;a.forEach(function(m){var y;switch(m.type){case"circle":x=v;var T=l[v%u];n=F(F({},T),{color:T.noChangeColor}),v++;break;case"bar":x=g;var w=c[g%h];n=F(F({},w),{color:w.noChangeColor}),g++;break;case"line":x=f,n=p[f%d],f++}if(E(m.type)){var C=(y=m.styles)===null||y===void 0?void 0:y.call(m,{data:{prev:o[e-1],current:o[e],next:o[e+1]},indicator:r,defaultStyles:t});i(m,F(F({},n),C),x)}})}b.IndicatorSeries=void 0,(Te=b.IndicatorSeries||(b.IndicatorSeries={})).Normal="normal",Te.Price="price",Te.Volume="volume",function(r){r.Feature="feature"}(Ce||(Ce={})),function(r){r.Loading="loading",r.Error="error",r.Ready="ready"}(jt||(jt={}));var Ee,$e=function(){function r(e){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series=b.IndicatorSeries.Normal,this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(t,i){var n=JSON.stringify(t.calcParams)!==JSON.stringify(i.calcParams)||t.figures!==i.figures||t.calc!==i.calc;return{calc:n,draw:n||t.shortName!==i.shortName||t.series!==i.series||t.minValue!==i.minValue||t.maxValue!==i.maxValue||t.precision!==i.precision||t.shouldOhlc!==i.shouldOhlc||t.shouldFormatBigNumber!==i.shouldFormatBigNumber||t.visible!==i.visible||t.zLevel!==i.zLevel||t.extendData!==i.extendData||t.regenerateFigures!==i.regenerateFigures||t.createTooltipDataSource!==i.createTooltipDataSource||t.draw!==i.draw}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onClick=null,this.onDataStateChange=null,this.result=[],this._lockSeriesPrecision=!1,this.override(e),this._lockSeriesPrecision=!1}return r.prototype.override=function(e){var t,i,n=this.result,o=Gt(this,["result"]);this._prevIndicator=F(F({},Vt(o)),{result:n});var a=e.id,s=e.name,l=e.shortName,u=e.precision,c=e.styles,h=e.figures,p=e.calcParams,d=Gt(e,["id","name","shortName","precision","styles","figures","calcParams"]);!Y(this.id)&&Y(a)&&(this.id=a),Y(this.name)||(this.name=s??""),this.shortName=(t=l??this.shortName)!==null&&t!==void 0?t:this.name,L(u)&&(this.precision=u,this._lockSeriesPrecision=!0),E(c)&&((i=this.styles)!==null&&i!==void 0||(this.styles={}),Z(this.styles,c)),Z(this,d),E(p)&&(this.calcParams=p,tt(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=h??this.figures},r.prototype.setSeriesPrecision=function(e){this._lockSeriesPrecision||(this.precision=e)},r.prototype.shouldUpdateImp=function(){var e=this._prevIndicator.zLevel!==this.zLevel,t=this.shouldUpdate(this._prevIndicator,this);return qt(t)?{calc:t,draw:t,sort:e}:F(F({},t),{sort:e})},r.prototype.calcImp=function(e){return Xe(this,void 0,void 0,function(){var t;return Ge(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=i.sent(),this.result=t,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},r.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return V(i,t),i}(r)},r}();function ht(r,e){var t,i=(t=e?.ignoreEvent)!==null&&t!==void 0&&t;return qt(i)?!i:!i.includes(r)}b.OverlayMode=void 0,(Ee=b.OverlayMode||(b.OverlayMode={})).Normal="normal",Ee.WeakMagnet="weak_magnet",Ee.StrongMagnet="strong_magnet";var zt,Yt="overlay_figure_",Je=function(){function r(e){this.groupId="",this.totalStep=1,this.currentStep=1,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode=b.OverlayMode.Normal,this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(e)}return r.prototype.override=function(e){var t,i;this._prevOverlay=Vt(this);var n=e.id,o=e.name;e.currentStep;var a=e.points,s=e.styles;if(Z(this,Gt(e,["id","name","currentStep","points","styles"])),Y(this.name)||(this.name=o??""),!Y(this.id)&&Y(n)&&(this.id=n),E(s)&&((t=this.styles)!==null&&t!==void 0||(this.styles={}),Z(this.styles,s)),yt(a)&&a.length>0){var l=0;if(this.points=Ut([],ft(a),!1),a.length>=this.totalStep-1?(this.currentStep=-1,l=this.totalStep-1):(this.currentStep=a.length+1,l=a.length),tt(this.performEventMoveForDrawing))for(var u=0;u<l;u++)this.performEventMoveForDrawing({currentStep:u+2,mode:this.mode,points:this.points,performPointIndex:u,performPoint:this.points[u]});this.currentStep===-1&&((i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},r.prototype.getPrevZLevel=function(){return this._prevZLevel},r.prototype.setPrevZLevel=function(e){this._prevZLevel=e},r.prototype.shouldUpdate=function(){var e=this._prevOverlay.zLevel!==this.zLevel;return{sort:e,draw:e||JSON.stringify(this._prevOverlay)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles}},r.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},r.prototype.forceComplete=function(){this.currentStep=-1},r.prototype.isDrawing=function(){return this.currentStep!==-1},r.prototype.isStart=function(){return this.currentStep===1},r.prototype.eventMoveForDrawing=function(e){var t,i=this.currentStep-1,n={};L(e.timestamp)&&(n.timestamp=e.timestamp),L(e.dataIndex)&&(n.dataIndex=e.dataIndex),L(e.value)&&(n.value=e.value),this.points[i]=n,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},r.prototype.eventPressedPointMove=function(e,t){var i;this.points[t].timestamp=e.timestamp,L(e.value)&&(this.points[t].value=e.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},r.prototype.startPressedMove=function(e){this._prevPressedPoint=F({},e),this._prevPressedPoints=Vt(this.points)},r.prototype.eventPressedOtherMove=function(e,t){if(this._prevPressedPoint!==null){var i=null;L(e.dataIndex)&&L(this._prevPressedPoint.dataIndex)&&(i=e.dataIndex-this._prevPressedPoint.dataIndex);var n=null;L(e.value)&&L(this._prevPressedPoint.value)&&(n=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var a;L(o.timestamp)&&(o.dataIndex=t.timestampToDataIndex(o.timestamp));var s=F({},o);return L(i)&&L(o.dataIndex)&&(s.dataIndex=o.dataIndex+i,s.timestamp=(a=t.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),L(n)&&L(o.value)&&(s.value=o.value+n),s})}},r.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return V(i,t),i}(r)},r}();function ae(r){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return E(r)&&Z(e,r),e}b.FormatDateType=void 0,(zt=b.FormatDateType||(b.FormatDateType={}))[zt.Tooltip=0]="Tooltip",zt[zt.Crosshair=1]="Crosshair",zt[zt.XAxis=2]="XAxis";var Ht=-1;function se(r){return tt(window.requestAnimationFrame)?window.requestAnimationFrame(r):window.setTimeout(r,20)}function ti(r){tt(window.cancelAnimationFrame)?window.cancelAnimationFrame(r):window.clearTimeout(r)}function ei(r){if(tt(window.requestIdleCallback))return window.requestIdleCallback(r);var e=performance.now();return window.setTimeout(function(){r({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-e))}})},1)}var st,Se=function(){function r(e){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Z(this._options,e)}return r.prototype._loop=function(){var e=this;this._running=!0;var t=function(){var i;if(e._running){var n=new Date().getTime()-e._time;n<e._options.duration?((i=e._doFrameCallback)===null||i===void 0||i.call(e,n),se(t)):(e.stop(),e._currentIterationCount++,e._currentIterationCount<e._options.iterationCount&&e.start())}};se(t)},r.prototype.doFrame=function(e){return this._doFrameCallback=e,this},r.prototype.setDuration=function(e){return this._options.duration=e,this},r.prototype.setIterationCount=function(e){return this._options.iterationCount=e,this},r.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},r.prototype.stop=function(){var e;this._running&&((e=this._doFrameCallback)===null||e===void 0||e.call(this,this._options.duration)),this._running=!1},r}(),Pe=1,ii=new Date().getTime();function le(r){var e=new Date().getTime();return e===ii?++Pe:Pe=1,ii=e,"".concat(r??"").concat(e,"_").concat(Pe)}function Ct(r,e){var t,i=document.createElement(r),n=e??{};for(var o in n)i.style[o]=(t=n[o])!==null&&t!==void 0?t:"";return i}function Ie(r,e,t){var i=0,n=0;for(n=r.length-1;i!==n;){var o=Math.floor((n+i)/2),a=n-i,s=r[o][e];if(t===r[i][e])return i;if(t===r[n][e])return n;if(t===s)return o;if(t>s?i=o:n=o,a<=2)break}return i}function ni(r,e){e=Math.max(0,e??0);var t=Math.pow(10,e);return Math.round(r*t)/t}function ri(r,e,t){for(var i,n,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],a=r.length,s=0;s<a;){var l=r[s];o[0]=Math.max((i=l[e])!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((n=l[t])!==null&&n!==void 0?n:Number.MAX_SAFE_INTEGER,o[1]),++s}return o}function wt(r){return r===0?0:Math.log10(r)}function Ot(r){return Math.pow(10,r)}function oi(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.join("_")}(function(r){r.Init="init",r.Forward="forward",r.Backward="backward",r.Update="update"})(st||(st={}));var nn=function(){function r(e){this._requestIdleCallbackId=Ht,this._tasks=e??[],this._operateTasks()}return r.prototype._operateTasks=function(e){var t,i=this;this._requestIdleCallbackId!==Ht&&(t=this._requestIdleCallbackId,tt(window.cancelIdleCallback)?window.cancelIdleCallback(t):window.clearTimeout(t),this._requestIdleCallbackId=Ht),e?.(),this._requestIdleCallbackId=ei(function(n){i._runTasks(n)})},r.prototype._runTasks=function(e){for(var t=this;e.timeRemaining()>0&&this._tasks.length>0;){var i=this._tasks.shift();i?.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=ei(function(n){t._runTasks(n)}))},r.prototype.addTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e.id});i>-1?t._tasks[i]=e:t._tasks.push(e)}),this},r.prototype.removeTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e});i>-1&&t._tasks.splice(i,1)}),this},r}(),ai=31536e3,si=2592e3,li=86400,ui=3600,Me=60,ci=1;function hi(r,e,t,i,n,o){var a;i===void 0&&(i=0);for(var s=null,l=o??null,u=0;u<e.length;u++){var c=e[u].timestamp,h=Me,p=qe(t,c);E(s)&&(h=p.YYYY!==s.YYYY?ai:p.MM!==s.MM?si:p.DD!==s.DD?li:p.HH!==s.HH?ui:p.mm!==s.mm?Me:ci),L(l)&&L(n?.compare)&&(n.compare=Math.min(n.compare,c-l));var d=(a=r.get(h))!==null&&a!==void 0?a:[];d.push({dataIndex:u+i,weight:h,timestamp:c}),r.set(h,d),s=p,l=c}}function di(r,e){var t=Math.max(Zt("0000-00-00 00:00:00",e.size,e.weight,e.family),146);return Math.ceil(t/r)}function ke(r,e,t){var i=di(e,t),n=[];return Array.from(r.keys()).sort(function(o,a){return a-o}).forEach(function(o){var a=r.get(o),s=n;n=[];for(var l=s.length,u=0,c=a.length,h=1/0,p=-1/0,d=0;d<c;d++){for(var v=a[d],g=v.dataIndex;u<l;){var f=s[u],x=f.dataIndex;if(!(x<g)){h=x;break}u++,n.push(f),p=x,h=1/0}h-g>=i&&g-p>=i&&(n.push(v),p=g)}for(;u<l;u++)n.push(s[u])}),n}var rn={name:"AVP",shortName:"AVP",series:b.IndicatorSeries.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(r){var e=0,t=0;return r.map(function(i){var n,o,a={},s=(n=i.turnover)!==null&&n!==void 0?n:0,l=(o=i.volume)!==null&&o!==void 0?o:0;return e+=s,(t+=l)!==0&&(a.avp=e/t),a})}},on={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(r){var e,t,i=r.data,n=r.indicator,o=r.defaultStyles,a=i.prev,s=i.current,l=(e=a?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return{color:c=u>l?K(n.styles,"bars[0].upColor",o.bars[0].upColor):K(n.styles,"bars[0].downColor",o.bars[0].downColor),style:u>l?b.PolygonType.Stroke:b.PolygonType.Fill,borderColor:c}}}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,a=0,s=0;return r.map(function(l,u){var c={},h=(l.low+l.high)/2;if(n+=h,o+=h,u>=t[0]-1){a=n/t[0];var p=r[u-(t[0]-1)];n-=(p.low+p.high)/2}return u>=t[1]-1&&(s=o/t[1],p=r[u-(t[1]-1)],o-=(p.low+p.high)/2),u>=i-1&&(c.ao=a-s),c})}},an={name:"BOLL",shortName:"BOLL",series:b.IndicatorSeries.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0;return r.map(function(o,a){var s=o.close,l={};if(n+=s,a>=i){l.mid=n/t[0];var u=function(c,h){var p=c.length,d=0;return c.forEach(function(v){var g=v.close-h;d+=g*g}),d=Math.abs(d),Math.sqrt(d/p)}(r.slice(a-i,a+1),l.mid);l.up=l.mid+t[1]*u,l.dn=l.mid-t[1]*u,n-=r[a-i].close}return l})}},sn={name:"BBI",shortName:"BBI",series:b.IndicatorSeries.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max.apply(Math,Ut([],ft(t),!1)),n=[],o=[];return r.map(function(a,s){var l={},u=a.close;if(t.forEach(function(h,p){var d;n[p]=((d=n[p])!==null&&d!==void 0?d:0)+u,s>=h-1&&(o[p]=n[p]/h,n[p]-=r[s-(h-1)].close)}),s>=i-1){var c=0;o.forEach(function(h){c+=h}),l.bbi=c/4}return l})}},ln={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0,o=[];return r.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(n+=u,o.push(u),s>=i){var c=n/t[0],h=o.slice(s-i,s+1),p=0;h.forEach(function(g){p+=Math.abs(g-c)});var d=p/t[0];l.cci=d!==0?(u-c)/d/.015:0;var v=(r[s-i].high+r[s-i].low+r[s-i].close)/3;n-=v}return l})}},un={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.ceil(t[1]/2.5+1),n=Math.ceil(t[2]/2.5+1),o=Math.ceil(t[3]/2.5+1),a=Math.ceil(t[4]/2.5+1),s=0,l=[],u=0,c=[],h=0,p=[],d=0,v=[],g=[];return r.forEach(function(f,x){var m,y,T,w,C,_={},S=(m=r[x-1])!==null&&m!==void 0?m:f,P=(S.high+S.close+S.low+S.open)/4,M=Math.max(0,f.high-P),R=Math.max(0,P-f.low);x>=t[0]-1&&(_.cr=R!==0?M/R*100:0,s+=_.cr,u+=_.cr,h+=_.cr,d+=_.cr,x>=t[0]+t[1]-2&&(l.push(s/t[1]),x>=t[0]+t[1]+i-3&&(_.ma1=l[l.length-1-i]),s-=(y=g[x-(t[1]-1)].cr)!==null&&y!==void 0?y:0),x>=t[0]+t[2]-2&&(c.push(u/t[2]),x>=t[0]+t[2]+n-3&&(_.ma2=c[c.length-1-n]),u-=(T=g[x-(t[2]-1)].cr)!==null&&T!==void 0?T:0),x>=t[0]+t[3]-2&&(p.push(h/t[3]),x>=t[0]+t[3]+o-3&&(_.ma3=p[p.length-1-o]),h-=(w=g[x-(t[3]-1)].cr)!==null&&w!==void 0?w:0),x>=t[0]+t[4]-2&&(v.push(d/t[4]),x>=t[0]+t[4]+a-3&&(_.ma4=v[v.length-1-a]),d-=(C=g[x-(t[4]-1)].cr)!==null&&C!==void 0?C:0)),g.push(_)}),g}},cn={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,a=0,s=[];return r.forEach(function(l,u){var c,h={},p=l.close;n+=p,o+=p;var d=0,v=0;if(u>=t[0]-1&&(d=n/t[0],n-=r[u-(t[0]-1)].close),u>=t[1]-1&&(v=o/t[1],o-=r[u-(t[1]-1)].close),u>=i-1){var g=d-v;h.dma=g,a+=g,u>=i+t[2]-2&&(h.ama=a/t[2],a-=(c=s[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(h)}),s}},hn={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=0,c=0,h=[];return r.forEach(function(p,d){var v,g,f={},x=(v=r[d-1])!==null&&v!==void 0?v:p,m=x.close,y=p.high,T=p.low,w=y-T,C=Math.abs(y-m),_=Math.abs(m-T),S=y-x.high,P=x.low-T,M=Math.max(Math.max(w,C),_),R=S>0&&S>P?S:0,O=P>0&&P>S?P:0;if(i+=M,n+=R,o+=O,d>=t[0]-1){d>t[0]-1?(a=a-a/t[0]+M,s=s-s/t[0]+R,l=l-l/t[0]+O):(a=i,s=n,l=o);var k=0,D=0;a!==0&&(k=100*s/a,D=100*l/a),f.pdi=k,f.mdi=D;var I=0;D+k!==0&&(I=Math.abs(D-k)/(D+k)*100),u+=I,d>=2*t[0]-2&&(c=d>2*t[0]-2?(c*(t[0]-1)+I)/t[0]:u/t[0],f.adx=c,d>=2*t[0]+t[1]-3&&(f.adxr=(((g=h[d-(t[1]-1)].adx)!==null&&g!==void 0?g:0)+c)/2))}h.push(f)}),h}},dn={name:"EMA",shortName:"EMA",series:b.IndicatorSeries.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=0,o=[];return r.map(function(a,s){var l={},u=a.close;return n+=u,t.forEach(function(c,h){s>=c-1&&(o[h]=s>c-1?(2*u+(c-1)*o[h])/(c+1):n/c,l[i[h].key]=o[h])}),l})}},pn={name:"MA",shortName:"MA",series:b.IndicatorSeries.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1&&(s[i[c].key]=n[c]/u,n[c]-=r[a-(u-1)].close)}),s})}},gn={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(r){var e,t,i=r.data,n=r.indicator,o=r.defaultStyles,a=i.prev,s=i.current,l=(e=a?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return c=u>0?K(n.styles,"bars[0].upColor",o.bars[0].upColor):u<0?K(n.styles,"bars[0].downColor",o.bars[0].downColor):K(n.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor),{style:l<u?b.PolygonType.Stroke:b.PolygonType.Fill,color:c,borderColor:c}}}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=Math.max(t[0],t[1]);return r.map(function(c,h){var p={},d=c.close;return i+=d,h>=t[0]-1&&(n=h>t[0]-1?(2*d+(t[0]-1)*n)/(t[0]+1):i/t[0]),h>=t[1]-1&&(o=h>t[1]-1?(2*d+(t[1]-1)*o)/(t[1]+1):i/t[1]),h>=u-1&&(a=n-o,p.dif=a,s+=a,h>=u+t[2]-2&&(l=h>u+t[2]-2?(2*a+l*(t[2]-1))/(t[2]+1):s/t[2],p.macd=2*(a-l),p.dea=l)),p})}},vn={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){var i=t+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[],o=[];return r.map(function(a,s){var l,u={},c=((l=r[s-1])!==null&&l!==void 0?l:a).close,h=a.close-c;return t.forEach(function(p,d){var v,g,f;if(h>0?n[d]=((v=n[d])!==null&&v!==void 0?v:0)+h:o[d]=((g=o[d])!==null&&g!==void 0?g:0)+Math.abs(h),s>=p-1){o[d]!==0?u[i[d].key]=100-100/(1+n[d]/o[d]):u[i[d].key]=0;var x=r[s-(p-1)],m=(f=r[s-p])!==null&&f!==void 0?f:x,y=x.close-m.close;y>0?n[d]-=y:o[d]-=Math.abs(y)}}),u})}},fn={name:"SMA",shortName:"SMA",series:b.IndicatorSeries.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(r,e){var t=e.calcParams,i=0,n=0;return r.map(function(o,a){var s={},l=o.close;return i+=l,a>=t[0]-1&&(n=a>t[0]-1?(l*t[1]+n*(t[0]-t[1]+1))/(t[0]+1):i/t[0],s.sma=n),s})}},yn={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[];return r.forEach(function(n,o){var a,s,l,u,c={},h=n.close;if(o>=t[0]-1){var p=ri(r.slice(o-(t[0]-1),o+1),"high","low"),d=p[0],v=p[1],g=d-v,f=(h-v)/(g===0?1:g)*100;c.k=((t[1]-1)*((s=(a=i[o-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+f)/t[1],c.d=((t[2]-1)*((u=(l=i[o-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},mn={name:"SAR",shortName:"SAR",series:b.IndicatorSeries.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(r){var e,t,i,n=r.data,o=r.indicator,a=r.defaultStyles,s=n.current;return{color:((e=s?.sar)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER)<(((t=s?.high)!==null&&t!==void 0?t:0)+((i=s?.low)!==null&&i!==void 0?i:0))/2?K(o.styles,"circles[0].upColor",a.circles[0].upColor):K(o.styles,"circles[0].downColor",a.circles[0].downColor)}}}],calc:function(r,e){var t=e.calcParams,i=t[0]/100,n=t[1]/100,o=t[2]/100,a=i,s=-100,l=!1,u=0;return r.map(function(c,h){var p=u,d=c.high,v=c.low;if(l){(s===-100||s<d)&&(s=d,a=Math.min(a+n,o)),u=p+a*(s-p);var g=Math.min(r[Math.max(1,h)-1].low,v);u>c.low?(u=s,a=i,s=-100,l=!l):u>g&&(u=g)}else{(s===-100||s>v)&&(s=v,a=Math.min(a+n,o)),u=p+a*(s-p);var f=Math.max(r[Math.max(1,h)-1].high,d);u<c.high?(u=s,a=0,s=-100,l=!l):u<f&&(u=f)}return{high:d,low:v,sar:u}})}};function pi(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(r){var e=r.data,t=r.indicator,i=r.defaultStyles,n=e.current,o=K(t.styles,"bars[0].noChangeColor",i.bars[0].noChangeColor);return E(n)&&(n.close>n.open?o=K(t.styles,"bars[0].upColor",i.bars[0].upColor):n.close<n.open&&(o=K(t.styles,"bars[0].downColor",i.bars[0].downColor))),{color:o}}}}var _n={name:"VOL",shortName:"VOL",series:b.IndicatorSeries.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},pi()],regenerateFigures:function(r){var e=r.map(function(t,i){return{key:"ma".concat(i+1),title:"MA".concat(t,": "),type:"line"}});return e.push(pi()),e},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s,l=(s=o.volume)!==null&&s!==void 0?s:0,u={volume:l,open:o.open,close:o.close};return t.forEach(function(c,h){var p,d;n[h]=((p=n[h])!==null&&p!==void 0?p:0)+l,a>=c-1&&(u[i[h].key]=n[h]/c,n[h]-=(d=r[a-(c-1)].volume)!==null&&d!==void 0?d:0)}),u})}},xn={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures;return r.map(function(n,o){var a={},s=n.close;return t.forEach(function(l,u){var c=l-1;if(o>=c){var h=ri(r.slice(o-c,o+1),"high","low"),p=h[0],d=p-h[1];a[i[u].key]=d===0?0:(s-p)/d*100}}),a})}},ue={},bn=[rn,on,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;if(n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1){var p=n[c]/t[c];s[i[c].key]=(l-p)/p*100,n[c]-=r[a-(u-1)].close}}),s})}},an,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0;return r.map(function(s,l){var u,c,h={},p=s.high,d=s.low,v=s.open,g=((u=r[l-1])!==null&&u!==void 0?u:s).close;if(o+=p-v,a+=v-d,i+=p-g,n+=g-d,l>=t[0]-1){h.ar=a!==0?o/a*100:0,h.br=n!==0?i/n*100:0;var f=r[l-(t[0]-1)],x=f.high,m=f.low,y=f.open,T=((c=r[l-t[0]])!==null&&c!==void 0?c:r[l-(t[0]-1)]).close;i-=x-T,n-=T-m,o-=x-y,a-=y-m}return h})}},sn,ln,un,cn,hn,{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.map(function(o,a){var s,l={};if(a>0){var u=r[a-1],c=o.high,h=o.low,p=(s=o.volume)!==null&&s!==void 0?s:0,d=(c+h)/2-(u.high+u.low)/2;if(p===0||c-h==0)l.emv=0;else{var v=p/1e8/(c-h);l.emv=d/v}i+=l.emv,n.push(l.emv),a>=t[0]&&(l.maEmv=i/t[0],i-=n[a-t[0]])}return l})}},dn,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.forEach(function(o,a){var s,l={};if(a>=t[0]){var u=o.close,c=r[a-t[0]].close;l.mtm=u-c,i+=l.mtm,a>=t[0]+t[1]-1&&(l.maMtm=i/t[1],i-=(s=n[a-(t[1]-1)].mtm)!==null&&s!==void 0?s:0)}n.push(l)}),n}},pn,gn,{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[];return r.forEach(function(a,s){var l,u,c,h,p=(l=r[s-1])!==null&&l!==void 0?l:a;a.close<p.close?n-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>p.close&&(n+=(c=a.volume)!==null&&c!==void 0?c:0);var d={obv:n};i+=n,s>=t[0]-1&&(d.maObv=i/t[0],i-=(h=o[s-(t[0]-1)].obv)!==null&&h!==void 0?h:0),o.push(d)}),o}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(r){var e=0;return r.map(function(t,i){var n,o,a={},s=t.close,l=(n=t.volume)!==null&&n!==void 0?n:1,u=((o=r[i-1])!==null&&o!==void 0?o:t).close,c=0,h=u*l;return h!==0&&(c=(s-u)/h),e+=c,a.pvt=e,a})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[],a=[];return r.forEach(function(s,l){var u,c,h={},p=((u=r[l-1])!==null&&u!==void 0?u:s).close,d=s.close-p>0?1:0;o.push(d),i+=d,l>=t[0]-1&&(h.psy=i/t[0]*100,n+=h.psy,l>=t[0]+t[1]-2&&(h.maPsy=n/t[1],n-=(c=a[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),i-=o[l-(t[0]-1)]),a.push(h)}),a}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[],n=0;return r.forEach(function(o,a){var s,l,u={};if(a>=t[0]-1){var c=o.close,h=((s=r[a-t[0]])!==null&&s!==void 0?s:r[a-(t[0]-1)]).close;u.roc=h!==0?(c-h)/h*100:0,n+=u.roc,a>=t[0]-1+t[1]-1&&(u.maRoc=n/t[1],n-=(l=i[a-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},vn,fn,yn,mn,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=0,c=[];return r.forEach(function(h,p){var d,v={},g=h.close;if(i+=g,p>=t[0]-1&&(n=p>t[0]-1?(2*g+(t[0]-1)*n)/(t[0]+1):i/t[0],s+=n,p>=2*t[0]-2&&(o=p>2*t[0]-2?(2*n+(t[0]-1)*o)/(t[0]+1):s/t[0],l+=o,p>=3*t[0]-3))){var f=0,x=0;p>3*t[0]-3?x=((f=(2*o+(t[0]-1)*a)/(t[0]+1))-a)/a*100:f=l/t[0],a=f,v.trix=x,u+=x,p>=3*t[0]+t[1]-4&&(v.maTrix=u/t[1],u-=(d=c[p-(t[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(v)}),c}},_n,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=[];return r.forEach(function(l,u){var c,h,p,d,v,g={},f=l.close,x=((c=r[u-1])!==null&&c!==void 0?c:l).close,m=(h=l.volume)!==null&&h!==void 0?h:0;if(f>x?i+=m:f<x?n+=m:o+=m,u>=t[0]-1){var y=o/2;g.vr=n+y===0?0:(i+y)/(n+y)*100,a+=g.vr,u>=t[0]+t[1]-2&&(g.maVr=a/t[1],a-=(p=s[u-(t[1]-1)].vr)!==null&&p!==void 0?p:0);var T=r[u-(t[0]-1)],w=(d=r[u-t[0]])!==null&&d!==void 0?d:T,C=T.close,_=(v=T.volume)!==null&&v!==void 0?v:0;C>w.close?i-=_:C<w.close?n-=_:o-=_}s.push(g)}),s}},xn];function gi(r){var e;return(e=ue[r])!==null&&e!==void 0?e:null}bn.forEach(function(r){ue[r.name]=$e.extend(r)});var Tn={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t=r.chart,i=r.coordinates,n=r.bounding,o=r.overlay,a=r.yAxis,s=o.points;if(i.length>0){var l=0;(e=a?.isInCandle())===null||e===void 0||e?l=t.getPrecision().price:t.getIndicators({paneId:o.paneId}).forEach(function(v){l=Math.max(l,v.precision)});var u=[],c=[],h=n.width;if(i.length>1&&L(s[0].value)&&L(s[1].value)){var p=i[0].y-i[1].y,d=s[0].value-s[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(v){var g,f=i[1].y+p*v,x=t.getDecimalFold().format(t.getThousandsSeparator().format((((g=s[1].value)!==null&&g!==void 0?g:0)+d*v).toFixed(l)));u.push({coordinates:[{x:0,y:f},{x:h,y:f}]}),c.push({x:0,y:f,text:"".concat(x," (").concat((100*v).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:u},{type:"text",isCheckEvent:!1,attrs:c}]}return[]}},Cn={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding,i={x:0,y:e[0].y};return E(e[1])&&e[0].x<e[1].x&&(i.x=t.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},De=function(){function r(){this._children=[],this._callbacks=new Map}return r.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},r.prototype.onEvent=function(e,t,i){var n=this._callbacks.get(e);return!(!E(n)||!this.checkEventOn(t))&&n(t,i)},r.prototype.checkEventOn=function(e){var t,i;try{for(var n=at(this._children),o=n.next();!o.done;o=n.next())if(o.value.checkEventOn(e))return!0}catch(a){t={error:a}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!1},r.prototype.dispatchEvent=function(e,t,i){var n=this._children.length-1;if(n>-1){for(var o=n;o>-1;o--)if(this._children[o].dispatchEvent(e,t,i))return!0}return this.onEvent(e,t,i)},r.prototype.addChild=function(e){return this._children.push(e),this},r.prototype.clear=function(){this._children=[]},r}(),vi=function(r){function e(t){var i=r.call(this)||this;return i.attrs=t.attrs,i.styles=t.styles,i}return V(e,r),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var i=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return V(o,n),o.prototype.checkEventOnImp=function(a,s,l){return t.checkEventOn(a,s,l)},o.prototype.drawImp=function(a,s,l){t.draw(a,s,l)},o}(e);return i},e}(De);function fi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=at(n),a=o.next();!a.done;a=o.next()){var s=a.value.coordinates;if(s.length>1)for(var l=1;l<s.length;l++){var u=s[l-1],c=s[l];if(u.x===c.x){if(Math.abs(u.y-r.y)+Math.abs(c.y-r.y)-Math.abs(u.y-c.y)<4&&Math.abs(r.x-u.x)<2)return!0}else{var h=ce(u,c),p=Ae(h,r),d=Math.abs(p-r.y);if(Math.abs(u.x-r.x)+Math.abs(c.x-r.x)-Math.abs(u.x-c.x)<4&&d*d/(h[0]*h[0]+1)<4)return!0}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function Ae(r,e){return r!==null?e.x*r[0]+r[1]:e.y}function Qt(r,e,t){return Ae(ce(r,e),t)}function ce(r,e){var t=r.x-e.x;if(t!==0){var i=(r.y-e.y)/t;return[i,r.y-i*r.x]}return null}function yi(r,e,t){var i=e.length,n=L(t)?t>0&&t<1?t:0:t?.5:0;if(n>0&&i>2){for(var o=e[0].x,a=e[0].y,s=1;s<i-1;s++){var l=e[s-1],u=e[s],c=e[s+1],h=u.x-l.x,p=u.y-l.y,d=c.x-u.x,v=c.y-u.y,g=c.x-l.x,f=c.y-l.y,x=Math.sqrt(h*h+p*p),m=Math.sqrt(d*d+v*v),y=m/(m+x),T=u.x+g*n*y,w=u.y+f*n*y;T=Math.min(T,Math.max(c.x,u.x)),w=Math.min(w,Math.max(c.y,u.y)),T=Math.max(T,Math.min(c.x,u.x)),w=Math.max(w,Math.min(c.y,u.y)),g=T-u.x,f=w-u.y;var C=u.x-g*x/m,_=u.y-f*x/m;C=Math.min(C,Math.max(l.x,u.x)),_=Math.min(_,Math.max(l.y,u.y)),C=Math.max(C,Math.min(l.x,u.x)),_=Math.max(_,Math.min(l.y,u.y)),g=u.x-C,f=u.y-_,T=u.x+g*m/x,w=u.y+f*m/x,r.bezierCurveTo(o,a,C,_,u.x,u.y),o=T,a=w}var S=e[i-1];r.bezierCurveTo(o,a,S.x,S.y,S.x,S.y)}else for(s=1;s<i;s++)r.lineTo(e[s].x,e[s].y)}var wn={name:"line",checkEventOn:fi,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?b.LineType.Solid:s,u=o.smooth,c=u!==void 0&&u,h=o.size,p=h===void 0?1:h,d=o.color,v=d===void 0?"currentColor":d,g=o.dashedValue,f=g===void 0?[2,2]:g;i.lineWidth=p,i.strokeStyle=v,l===b.LineType.Dashed?i.setLineDash(f):i.setLineDash([]);var x=p%2==1?.5:0;a.forEach(function(m){var y=m.coordinates;y.length>1&&(y.length!==2||y[0].x!==y[1].x&&y[0].y!==y[1].y?(i.save(),p%2==1&&i.translate(.5,.5),i.beginPath(),i.moveTo(y[0].x,y[0].y),yi(i,y,c),i.stroke(),i.closePath(),i.restore()):(i.beginPath(),y[0].x===y[1].x?(i.moveTo(y[0].x+x,y[0].y),i.lineTo(y[1].x+x,y[1].y)):(i.moveTo(y[0].x,y[0].y+x),i.lineTo(y[1].x,y[1].y+x)),i.stroke(),i.closePath()))})})(r,e,t)}};function mi(r,e,t){var i=t??0,n=[];if(r.length>1)if(r[0].x===r[1].x){var o=e.height;if(n.push({coordinates:[{x:r[0].x,y:0},{x:r[0].x,y:o}]}),r.length>2){n.push({coordinates:[{x:r[2].x,y:0},{x:r[2].x,y:o}]});for(var a=r[0].x-r[2].x,s=0;s<i;s++){var l=a*(s+1);n.push({coordinates:[{x:r[0].x+l,y:0},{x:r[0].x+l,y:o}]})}}}else{var u=e.width,c=ce(r[0],r[1]),h=c[0],p=c[1];if(n.push({coordinates:[{x:0,y:0*h+p},{x:u,y:u*h+p}]}),r.length>2){var d=r[2].y-h*r[2].x;for(n.push({coordinates:[{x:0,y:0*h+d},{x:u,y:u*h+d}]}),a=p-d,s=0;s<i;s++){var v=p+a*(s+1);n.push({coordinates:[{x:0,y:0*h+v},{x:u,y:u*h+v}]})}}}return n}var En={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:mi(r.coordinates,r.bounding)}]}},Sn={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:mi(r.coordinates,r.bounding,1)}]}},Pn={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t=r.chart,i=r.coordinates,n=r.bounding,o=r.overlay,a=r.yAxis,s=0;(e=a?.isInCandle())===null||e===void 0||e?s=t.getPrecision().price:t.getIndicators({paneId:o.paneId}).forEach(function(c){s=Math.max(s,c.precision)});var l=o.points[0].value,u=l===void 0?0:l;return[{type:"line",attrs:{coordinates:[i[0],{x:n.width,y:i[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:i[0].x,y:i[0].y,text:t.getDecimalFold().format(t.getThousandsSeparator().format(u.toFixed(s))),baseline:"bottom"}}]}};function In(r,e){if(r.length>1){var t={x:0,y:0};return t=r[0].x===r[1].x&&r[0].y!==r[1].y?r[0].y<r[1].y?{x:r[0].x,y:e.height}:{x:r[0].x,y:0}:r[0].x>r[1].x?{x:0,y:Qt(r[0],r[1],{x:0,y:r[0].y})}:{x:e.width,y:Qt(r[0],r[1],{x:e.width,y:r[0].y})},{coordinates:[r[0],t]}}return[]}var Mn={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:In(r.coordinates,r.bounding)}]}},kn={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Qt(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:Qt(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},Dn={name:"simpleAnnotation",totalStep:2,styles:{line:{style:b.LineType.Dashed}},createPointFigures:function(r){var e,t=r.overlay,i=r.coordinates,n="";E(t.extendData)&&(n=tt(t.extendData)?t.extendData(t):(e=t.extendData)!==null&&e!==void 0?e:"");var o=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:o,y:a},{x:o,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:s},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:n,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},An={name:"simpleTag",totalStep:2,styles:{line:{style:b.LineType.Dashed}},createPointFigures:function(r){var e=r.bounding,t=r.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(r){var e,t,i=r.chart,n=r.overlay,o=r.coordinates,a=r.bounding,s=r.yAxis,l="left",u=0;(e=s?.isFromZero())!==null&&e!==void 0&&e?(l="left",u=0):(l="right",u=a.width);var c="";return E(n.extendData)&&(c=tt(n.extendData)?n.extendData(n):(t=n.extendData)!==null&&t!==void 0?t:""),!E(c)&&L(n.points[0].value)&&(c=et(n.points[0].value,i.getPrecision().price)),{type:"text",attrs:{x:u,y:o[0].y,text:c,align:l,baseline:"middle"}}}},Kt={};function Fn(r){var e;return(e=Kt[r])!==null&&e!==void 0?e:null}[Tn,Cn,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]}}]}},En,Sn,Pn,Mn,{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},kn,{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;if(e.length===2){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=t.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]}},Dn,An].forEach(function(r){Kt[r.name]=Je.extend(r)});var _i={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function Rn(r){var e;return(e=_i[r])!==null&&e!==void 0?e:null}var it="candle_pane",xi="indicator_pane_",j="x_axis_pane",Bn=1,Ln=50,bi=9e5,On=function(){function r(e,t){var i,n,o,a,s,l=this;this._styles={grid:{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:b.LineType.Dashed,dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:b.LineType.Dashed,dashedValue:[2,2]}},candle:(s={show:!0,color:W.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},{type:b.CandleType.CandleSolid,bar:{compareRule:Mt.CurrentOpen,upColor:W.GREEN,downColor:W.RED,noChangeColor:W.GREY,upBorderColor:W.GREEN,downBorderColor:W.RED,noChangeBorderColor:W.GREY,upWickColor:W.GREEN,downWickColor:W.RED,noChangeWickColor:W.GREY},area:{lineSize:2,lineColor:W.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:kt(W.BLUE,.01)},{offset:1,color:kt(W.BLUE,.2)}],point:{show:!0,color:W.BLUE,radius:4,rippleColor:kt(W.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:F({},s),low:F({},s),last:{show:!0,compareRule:Mt.CurrentOpen,upColor:W.GREEN,downColor:W.RED,noChangeColor:W.GREY,line:{show:!0,style:b.LineType.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:b.PolygonType.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:b.LineType.Solid,borderSize:0,borderDashedValue:[2,2],color:W.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:b.TooltipShowRule.Always,showType:b.TooltipShowType.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:b.CandleTooltipRectPosition.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:W.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},features:[]}}),indicator:(o=kt(W.GREEN,.7),a=kt(W.RED,.7),{ohlc:{compareRule:Mt.CurrentOpen,upColor:o,downColor:a,noChangeColor:W.GREY},bars:[{style:b.PolygonType.Fill,borderStyle:b.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:o,downColor:a,noChangeColor:W.GREY}],lines:["#FF9600","#935EBD",W.BLUE,"#E11D74","#01C5C4"].map(function(f){return{style:b.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:f}}),circles:[{style:b.PolygonType.Fill,borderStyle:b.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:o,downColor:a,noChangeColor:W.GREY}],lastValueMark:{show:!1,text:{show:!1,style:b.PolygonType.Fill,color:W.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:b.LineType.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:b.TooltipShowRule.Always,showType:b.TooltipShowType.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:W.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},features:[]}}),xAxis:Ue(),yAxis:Ue(),separator:{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:kt(W.BLUE,.08)},crosshair:$i(),overlay:(i=kt(W.BLUE,.35),n=kt(W.BLUE,.25),{point:{color:W.BLUE,borderColor:i,borderSize:1,radius:5,activeColor:W.BLUE,activeBorderColor:i,activeBorderSize:3,activeRadius:5},line:{style:b.LineType.Solid,smooth:!1,color:W.BLUE,size:1,dashedValue:[2,2]},rect:{style:b.PolygonType.Fill,color:n,borderColor:W.BLUE,borderSize:1,borderRadius:0,borderStyle:b.LineType.Solid,borderDashedValue:[2,2]},polygon:{style:b.PolygonType.Fill,color:W.BLUE,borderColor:W.BLUE,borderSize:1,borderStyle:b.LineType.Solid,borderDashedValue:[2,2]},circle:{style:b.PolygonType.Fill,color:n,borderColor:W.BLUE,borderSize:1,borderStyle:b.LineType.Solid,borderDashedValue:[2,2]},arc:{style:b.LineType.Solid,color:W.BLUE,size:1,dashedValue:[2,2]},text:{style:b.PolygonType.Fill,color:W.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:b.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:W.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:W.BLUE}})},this._customApi={formatDate:function(f,x){return Ze(l._dateTimeFormat,f,x)},formatBigNumber:je},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(f){return Qe(f,l._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(f){return Ke(f,l._decimalFold.threshold)}},this._precision={price:2,volume:0},this._dataList=[],this._loadMoreDataCallback=null,this._loading=!0,this._loadDataMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=10,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeWeightTickMap=new Map,this._timeWeightTickList=[],this._minTimeSpan={compare:Number.MAX_SAFE_INTEGER,calc:bi},this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._activeTooltipFeatureInfo=null,this._actions=new Map,this._indicators=new Map,this._taskScheduler=new nn,this._overlays=new Map,this._progressOverlayInfo=null,this._pressedOverlayInfo={paneId:"",overlay:null,figureType:0,figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:0,figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:0,figureIndex:-1,figure:null},this._chart=e,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var u=t??{},c=u.styles,h=u.locale,p=u.timezone,d=u.customApi,v=u.thousandsSeparator,g=u.decimalFold;E(c)&&this.setStyles(c),Y(h)&&this.setLocale(h),this.setTimezone(p??""),E(d)&&this.setCustomApi(d),E(v)&&this.setThousandsSeparator(v),E(g)&&this.setDecimalFold(g)}return r.prototype.setStyles=function(e){var t,i,n=null;n=Y(e)?Rn(e):e,Z(this._styles,n),yt((i=(t=n?.candle)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.custom)&&(this._styles.candle.tooltip.custom=n.candle.tooltip.custom)},r.prototype.getStyles=function(){return this._styles},r.prototype.setCustomApi=function(e){Z(this._customApi,e)},r.prototype.getCustomApi=function(){return this._customApi},r.prototype.setLocale=function(e){this._locale=e},r.prototype.getLocale=function(){return this._locale},r.prototype.setTimezone=function(e){if(!E(this._dateTimeFormat)||this.getTimezone()!==e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};e.length>0&&(t.timeZone=e);var i=null;try{i=new Intl.DateTimeFormat("en",t)}catch{}i!==null&&(this._classifyTimeWeightTicks(this._dataList),this._dateTimeFormat=i)}},r.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},r.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},r.prototype.setThousandsSeparator=function(e){Z(this._thousandsSeparator,e)},r.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},r.prototype.setDecimalFold=function(e){Z(this._decimalFold,e)},r.prototype.getDecimalFold=function(){return this._decimalFold},r.prototype.getPrecision=function(){return this._precision},r.prototype.setPrecision=function(e){Z(this._precision,e),this._synchronizeIndicatorSeriesPrecision()},r.prototype.getDataList=function(){return this._dataList},r.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},r.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},r.prototype.addData=function(e,t,i){var n,o,a,s,l=this,u=!1,c=!1,h=0;if(yt(e)){switch(h=e.length,t){case st.Init:this.clearData(),this._dataList=e,this._loadDataMore.backward=(n=i?.backward)!==null&&n!==void 0&&n,this._loadDataMore.forward=(o=i?.forward)!==null&&o!==void 0&&o,this._classifyTimeWeightTicks(this._dataList),this.setOffsetRightDistance(this._offsetRightDistance),c=!0;break;case st.Backward:this._classifyTimeWeightTicks(e,!0),this._dataList=this._dataList.concat(e),this._loadDataMore.backward=(a=i?.backward)!==null&&a!==void 0&&a,c=h>0;break;case st.Forward:this._dataList=e.concat(this._dataList),this._classifyTimeWeightTicks(this._dataList),this._loadDataMore.forward=(s=i?.forward)!==null&&s!==void 0&&s,c=h>0}this._loading=!1,u=!0}else{var p=this._dataList.length,d=e.timestamp,v=K(this._dataList[p-1],"timestamp",0);if(d>v){this._classifyTimeWeightTicks([e],!0),this._dataList.push(e);var g=this.getLastBarRightSideDiffBarCount();g<0&&this.setLastBarRightSideDiffBarCount(--g),h=1,u=!0,c=!0}else d===v&&(this._dataList[p-1]=e,u=!0,c=!0)}u&&c&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this.getIndicatorsByFilter({}).forEach(function(f){l._addIndicatorCalcTask(f,t)}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},r.prototype.setLoadMoreDataCallback=function(e){this._loadMoreDataCallback=e},r.prototype._calcOptimalBarSpace=function(){var e=1-.2*Math.atan(Math.max(4,this._barSpace)-4)/(.5*Math.PI),t=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));t%2==0&&t+2>=this._barSpace&&--t,this._gapBarSpace=Math.max(1,t)},r.prototype._classifyTimeWeightTicks=function(e,t){var i=0,n=null;t!=null&&t?(i=this._dataList.length,n=this._dataList[i-1].timestamp):(this._timeWeightTickMap.clear(),this._minTimeSpan={compare:Number.MAX_SAFE_INTEGER,calc:bi}),hi(this._timeWeightTickMap,e,this._dateTimeFormat,i,this._minTimeSpan,n),this._minTimeSpan.compare!==Number.MAX_SAFE_INTEGER&&(this._minTimeSpan.calc=this._minTimeSpan.compare),this._timeWeightTickList=ke(this._timeWeightTickMap,this._barSpace,this._styles.xAxis.tickText)},r.prototype.getTimeWeightTickList=function(){return this._timeWeightTickList},r.prototype._adjustVisibleRange=function(){var e,t,i,n,o=this,a=this._dataList.length,s=this._totalBarSpace/this._barSpace,l=0,u=0;this._scrollLimitRole===1?(l=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,u=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(l=this._minVisibleBarCount.left,u=this._minVisibleBarCount.right),l=Math.max(0,l),u=Math.max(0,u);var c=s-Math.min(l,a);this._lastBarRightSideDiffBarCount>c&&(this._lastBarRightSideDiffBarCount=c);var h=-a+Math.min(u,a);this._lastBarRightSideDiffBarCount<h&&(this._lastBarRightSideDiffBarCount=h);var p=Math.round(this._lastBarRightSideDiffBarCount+a+.5),d=p;p>a&&(p=a);var v=Math.round(p-s)-1;v<0&&(v=0);var g=this._lastBarRightSideDiffBarCount>0?Math.round(a+this._lastBarRightSideDiffBarCount-s)-1:v;this._visibleRange={from:v,to:p,realFrom:g,realTo:d},this.executeAction(b.ActionType.OnVisibleRangeChange,this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var f=g;f<d;f++){var x=this._dataList[f],m=this.dataIndexToCoordinate(f);this._visibleRangeDataList.push({dataIndex:f,x:m,data:{prev:(e=this._dataList[f-1])!==null&&e!==void 0?e:x,current:x,next:(t=this._dataList[f-1])!==null&&t!==void 0?t:x}}),E(x)&&(this._visibleRangeHighLowPrice[0].price<x.high&&(this._visibleRangeHighLowPrice[0].price=x.high,this._visibleRangeHighLowPrice[0].x=m),this._visibleRangeHighLowPrice[1].price>x.low&&(this._visibleRangeHighLowPrice[1].price=x.low,this._visibleRangeHighLowPrice[1].x=m))}if(!this._loading&&E(this._loadMoreDataCallback)){var y=null;v===0?this._loadDataMore.forward&&(this._loading=!0,y={type:st.Forward,data:(i=this._dataList[0])!==null&&i!==void 0?i:null,callback:function(T,w){o.addData(T,st.Forward,{forward:w!=null&&w,backward:w!=null&&w})}}):p===a&&this._loadDataMore.backward&&(this._loading=!0,y={type:st.Backward,data:(n=this._dataList[a-1])!==null&&n!==void 0?n:null,callback:function(T,w){o.addData(T,st.Backward,{forward:w!=null&&w,backward:w!=null&&w})}}),E(y)&&this._loadMoreDataCallback(y)}},r.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},r.prototype.setBarSpace=function(e,t){e<Bn||e>Ln||this._barSpace===e||(this._barSpace=e,this._timeWeightTickList=ke(this._timeWeightTickMap,this._barSpace,this._styles.xAxis.tickText),this._calcOptimalBarSpace(),t?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},r.prototype.setTotalBarSpace=function(e){this._totalBarSpace!==e&&(this._totalBarSpace=e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},r.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,e):e,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,t!=null&&t&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})),this},r.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},r.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},r.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},r.prototype.setLastBarRightSideDiffBarCount=function(e){this._lastBarRightSideDiffBarCount=e},r.prototype.setMaxOffsetLeftDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.left=e},r.prototype.setMaxOffsetRightDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.right=e},r.prototype.setLeftMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.left=e},r.prototype.setRightMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.right=e},r.prototype.getVisibleRange=function(){return this._visibleRange},r.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},r.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0});var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this.executeAction(b.ActionType.OnScroll,{distance:n})}},r.prototype.getDataByDataIndex=function(e){var t;return(t=this._dataList[e])!==null&&t!==void 0?t:null},r.prototype.coordinateToFloatIndex=function(e){var t=this._dataList.length,i=(this._totalBarSpace-e)/this._barSpace,n=t+this._lastBarRightSideDiffBarCount-i;return Math.round(1e6*n)/1e6},r.prototype.dataIndexToTimestamp=function(e){var t=this._dataList.length;if(t===0)return null;var i=this.getDataByDataIndex(e);if(E(i))return i.timestamp;var n=t-1;return e>n?this._dataList[n].timestamp+this._minTimeSpan.calc*(e-n):e<0?this._dataList[0].timestamp-this._minTimeSpan.calc*Math.abs(e):null},r.prototype.timestampToDataIndex=function(e){var t=this._dataList.length;if(t===0)return 0;var i=t-1,n=this._dataList[i].timestamp;if(e>n)return i+Math.floor((e-n)/this._minTimeSpan.calc);var o=this._dataList[0].timestamp;return e<o?Math.floor((e-o)/this._minTimeSpan.calc):Ie(this._dataList,"timestamp",e)},r.prototype.dataIndexToCoordinate=function(e){var t=this._dataList.length+this._lastBarRightSideDiffBarCount-e;return Math.floor(this._totalBarSpace-(t-.5)*this._barSpace+.5)},r.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},r.prototype.zoom=function(e,t){var i,n=this;if(this._zoomEnabled){var o=t??null;L(o?.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var a=o.x,s=this.coordinateToFloatIndex(a),l=this._barSpace,u=this._barSpace+e*(this._barSpace/10);this.setBarSpace(u,function(){n._lastBarRightSideDiffBarCount+=s-n.coordinateToFloatIndex(a)});var c=this._barSpace/l;c!==1&&this.executeAction(b.ActionType.OnZoom,{scale:c})}},r.prototype.setZoomEnabled=function(e){this._zoomEnabled=e},r.prototype.isZoomEnabled=function(){return this._zoomEnabled},r.prototype.setScrollEnabled=function(e){this._scrollEnabled=e},r.prototype.isScrollEnabled=function(){return this._scrollEnabled},r.prototype.setCrosshair=function(e,t){var i,n=t??{},o=n.notInvalidate,a=n.notExecuteAction,s=n.forceInvalidate,l=e??{},u=0,c=0;c=L(l.x)?(u=this.coordinateToDataIndex(l.x))<0?0:u>this._dataList.length-1?this._dataList.length-1:u:u=this._dataList.length-1;var h=this._dataList[c],p=this.dataIndexToCoordinate(u),d=this._crosshair.x,v=this._crosshair.y,g=this._crosshair.paneId;this._crosshair=F(F({},l),{realX:p,kLineData:h,realDataIndex:u,dataIndex:c,timestamp:(i=this.dataIndexToTimestamp(u))!==null&&i!==void 0?i:void 0}),(d!==l.x||v!==l.y||g!==l.paneId||s!=null&&s)&&(!E(h)||a!=null&&a||this._chart.crosshairChange(this._crosshair),o!=null&&o||this._chart.updatePane(1))},r.prototype.getCrosshair=function(){return this._crosshair},r.prototype.setActiveTooltipFeatureInfo=function(e){this._activeTooltipFeatureInfo=e??null},r.prototype.getActiveTooltipFeatureInfo=function(){return this._activeTooltipFeatureInfo},r.prototype.executeAction=function(e,t){var i;(i=this._actions.get(e))===null||i===void 0||i.execute(t)},r.prototype.subscribeAction=function(e,t){var i;this._actions.has(e)||this._actions.set(e,new en),(i=this._actions.get(e))===null||i===void 0||i.subscribe(t)},r.prototype.unsubscribeAction=function(e,t){var i=this._actions.get(e);E(i)&&(i.unsubscribe(t),i.isEmpty()&&this._actions.delete(e))},r.prototype.hasAction=function(e){var t=this._actions.get(e);return E(t)&&!t.isEmpty()},r.prototype._sortIndicators=function(e){var t;Y(e)?(t=this._indicators.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._indicators.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype._addIndicatorCalcTask=function(e,t){var i=this;this._taskScheduler.addTask({id:oi(e.id),handler:function(){var n;(n=e.onDataStateChange)===null||n===void 0||n.call(e,{state:jt.Loading,type:t,indicator:e}),e.calcImp(i._dataList).then(function(o){var a;o&&(i._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),(a=e.onDataStateChange)===null||a===void 0||a.call(e,{state:jt.Ready,type:t,indicator:e}))}).catch(function(){var o;(o=e.onDataStateChange)===null||o===void 0||o.call(e,{state:jt.Error,type:t,indicator:e})})}})},r.prototype.addIndicator=function(e,t,i){var n=e.name;if(this.getIndicatorsByFilter(e).length>0)return!1;var o=this.getIndicatorsByPaneId(t),a=new(gi(n));return this._synchronizeIndicatorSeriesPrecision(a),a.paneId=t,a.override(e),i||(this.removeIndicator({paneId:t}),o=[]),o.push(a),this._indicators.set(t,o),this._sortIndicators(t),this._addIndicatorCalcTask(a,st.Init),!0},r.prototype.getIndicatorsByPaneId=function(e){var t;return(t=this._indicators.get(e))!==null&&t!==void 0?t:[]},r.prototype.getIndicatorsByFilter=function(e){var t=e.paneId,i=e.name,n=e.id,o=function(s){return E(n)?s.id===n:!E(i)||s.name===i},a=[];return E(t)?a=a.concat(this.getIndicatorsByPaneId(t).filter(o)):this._indicators.forEach(function(s){a=a.concat(s.filter(o))}),a},r.prototype.removeIndicator=function(e){var t=this,i=!1;return this.getIndicatorsByFilter(e).forEach(function(n){var o=t.getIndicatorsByPaneId(n.paneId),a=o.findIndex(function(s){return s.id===n.id});a>-1&&(t._taskScheduler.removeTask(oi(n.id)),o.splice(a,1),i=!0),o.length===0&&t._indicators.delete(n.paneId)}),i},r.prototype.hasIndicators=function(e){return this._indicators.has(e)},r.prototype._synchronizeIndicatorSeriesPrecision=function(e){var t=this._precision,i=t.price,n=t.volume,o=function(a){switch(a.series){case b.IndicatorSeries.Price:a.setSeriesPrecision(i);break;case b.IndicatorSeries.Volume:a.setSeriesPrecision(n)}};E(e)?o(e):this._indicators.forEach(function(a){a.forEach(function(s){o(s)})})},r.prototype.overrideIndicator=function(e){var t=this,i=!1,n=!1;return this.getIndicatorsByFilter(e).forEach(function(o){o.override(e);var a=o.shouldUpdateImp(),s=a.calc,l=a.draw;a.sort&&(n=!0),s?t._addIndicatorCalcTask(o,st.Update):l&&(i=!0)}),n&&this._sortIndicators(),!!i&&(this._chart.layout({update:!0}),!0)},r.prototype.getOverlaysByFilter=function(e){var t,i=e.id,n=e.groupId,o=e.paneId,a=e.name,s=function(c){return E(i)?c.id===i:E(n)?c.groupId===n&&(!E(a)||c.name===a):!E(a)||c.name===a},l=[];E(o)?l=l.concat(this.getOverlaysByPaneId(o).filter(s)):this._overlays.forEach(function(c){l=l.concat(c.filter(s))});var u=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay;return E(u)&&s(u)&&l.push(u),l},r.prototype.getOverlaysByPaneId=function(e){var t;if(!Y(e)){var i=[];return this._overlays.forEach(function(n){i=i.concat(n)}),i}return(t=this._overlays.get(e))!==null&&t!==void 0?t:[]},r.prototype._sortOverlays=function(e){var t;Y(e)?(t=this._overlays.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._overlays.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype.addOverlays=function(e,t){var i=this,n=[],o=e.map(function(a,s){var l,u,c,h,p,d,v,g;if(E(a.id)){var f=null;try{for(var x=at(i._overlays),m=x.next();!m.done;m=x.next())if(E(w=ft(m.value,2)[1].find(function(S){return S.id===a.id}))){f=w;break}}catch(S){l={error:S}}finally{try{m&&!m.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}if(E(f))return a.id}var y=Fn(a.name);if(E(y)){var T=(c=a.id)!==null&&c!==void 0?c:le("overlay_"),w=new y,C=(h=a.paneId)!==null&&h!==void 0?h:it;a.id=T,(p=a.groupId)!==null&&p!==void 0||(a.groupId=T);var _=i.getOverlaysByPaneId(C).length;return(d=a.zLevel)!==null&&d!==void 0||(a.zLevel=_),w.override(a),n.includes(C)||n.push(C),w.isDrawing()?i._progressOverlayInfo={paneId:C,overlay:w,appointPaneFlag:t[s]}:(i._overlays.has(C)||i._overlays.set(C,[]),(v=i._overlays.get(C))===null||v===void 0||v.push(w)),w.isStart()&&((g=w.onDrawStart)===null||g===void 0||g.call(w,{overlay:w,chart:i._chart})),T}return null});return n.length>0&&(this._sortOverlays(),n.forEach(function(a){i._chart.updatePane(1,a)}),this._chart.updatePane(1,j)),o},r.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},r.prototype.progressOverlayComplete=function(){var e;if(this._progressOverlayInfo!==null){var t=this._progressOverlayInfo,i=t.overlay,n=t.paneId;i.isDrawing()||(this._overlays.has(n)||this._overlays.set(n,[]),(e=this._overlays.get(n))===null||e===void 0||e.push(i),this._sortOverlays(n),this._progressOverlayInfo=null)}},r.prototype.updateProgressOverlayInfo=function(e,t){this._progressOverlayInfo!==null&&(qt(t)&&t&&(this._progressOverlayInfo.appointPaneFlag=t),this._progressOverlayInfo.paneId=e,this._progressOverlayInfo.overlay.override({paneId:e}))},r.prototype.overrideOverlay=function(e){var t=this,i=!1,n=[];return this.getOverlaysByFilter(e).forEach(function(o){o.override(e);var a=o.shouldUpdate(),s=a.sort,l=a.draw;s&&(i=!0),(s||l)&&(n.includes(o.paneId)||n.push(o.paneId))}),i&&this._sortOverlays(),n.length>0&&(n.forEach(function(o){t._chart.updatePane(1,o)}),this._chart.updatePane(1,j),!0)},r.prototype.removeOverlay=function(e){var t=this,i=[];return this.getOverlaysByFilter(e).forEach(function(n){var o,a=n.paneId,s=t.getOverlaysByPaneId(n.paneId);if((o=n.onRemoved)===null||o===void 0||o.call(n,{overlay:n,chart:t._chart}),i.includes(a)||i.push(a),n.isDrawing())t._progressOverlayInfo=null;else{var l=s.findIndex(function(u){return u.id===n.id});l>-1&&s.splice(l,1)}s.length===0&&t._overlays.delete(a)}),i.length>0&&(i.forEach(function(n){t._chart.updatePane(1,n)}),this._chart.updatePane(1,j),!0)},r.prototype.setPressedOverlayInfo=function(e){this._pressedOverlayInfo=e},r.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},r.prototype.setHoverOverlayInfo=function(e,t){var i,n=this._hoverOverlayInfo,o=n.overlay,a=n.figureType,s=n.figureIndex,l=n.figure,u=e.overlay;if((o?.id!==u?.id||a!==e.figureType||s!==e.figureIndex)&&(this._hoverOverlayInfo=e,o?.id!==u?.id)){var c=!1,h=!1;o!==null&&(o.override({zLevel:o.getPrevZLevel()}),h=!0,tt(o.onMouseLeave)&&ht("onMouseLeave",l)&&(o.onMouseLeave(F({chart:this._chart,overlay:o,figure:l??void 0},t)),c=!0)),u!==null&&(u.setPrevZLevel(u.zLevel),u.override({zLevel:Number.MAX_SAFE_INTEGER}),h=!0,tt(u.onMouseEnter)&&ht("onMouseEnter",e.figure)&&(u.onMouseEnter(F({chart:this._chart,overlay:u,figure:(i=e.figure)!==null&&i!==void 0?i:void 0},t)),c=!0)),h&&this._sortOverlays(),c||this._chart.updatePane(1)}},r.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},r.prototype.setClickOverlayInfo=function(e,t){var i,n,o,a,s,l,u=this._clickOverlayInfo,c=u.paneId,h=u.overlay,p=u.figureType,d=u.figure,v=u.figureIndex,g=e.overlay;(i=g?.isDrawing())!==null&&i!==void 0&&i||!ht("onClick",e.figure)||(n=g?.onClick)===null||n===void 0||n.call(g,F({chart:this._chart,overlay:g,figure:(o=e.figure)!==null&&o!==void 0?o:void 0},t)),h?.id===g?.id&&p===e.figureType&&v===e.figureIndex||(this._clickOverlayInfo=e,h?.id!==g?.id&&(ht("onDeselected",d)&&((a=h?.onDeselected)===null||a===void 0||a.call(h,F({chart:this._chart,overlay:h,figure:d??void 0},t))),ht("onSelected",e.figure)&&((s=g?.onSelected)===null||s===void 0||s.call(g,F({chart:this._chart,overlay:g,figure:(l=e.figure)!==null&&l!==void 0?l:void 0},t))),this._chart.updatePane(1,e.paneId),c!==e.paneId&&this._chart.updatePane(1,c),this._chart.updatePane(1,j)))},r.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},r.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},r.prototype.isOverlayDrawing=function(){var e,t;return(t=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay.isDrawing())!==null&&t!==void 0&&t},r.prototype.clearData=function(){this._loadDataMore.backward=!1,this._loadDataMore.forward=!1,this._loading=!0,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeWeightTickMap.clear(),this._timeWeightTickList=[],this._crosshair={},this._activeTooltipFeatureInfo=null},r.prototype.getChart=function(){return this._chart},r}(),ot="main",Et="xAxis",mt="yAxis",$t="separator",Ti=function(){function r(e,t){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Ht,this._mediaQueryListener=function(){var n=Dt(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*n),i._nextPixelHeight=Math.round(i._element.clientHeight*n),i._resetPixelRatio()},this._listener=t,this._element=Ct("canvas",e),this._ctx=this._element.getContext("2d"),function(){return Xe(this,void 0,void 0,function(){return Ge(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o){var a=new ResizeObserver(function(s){o(s.every(function(l){return"devicePixelContentBoxSize"in l})),a.disconnect()});a.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,n.sent()]}})})}().then(function(n){i._supportedDevicePixelContentBox=n,n?(i._resizeObserver=new ResizeObserver(function(o){var a=o.find(function(l){return l.target===i._element}),s=a?.devicePixelContentBoxSize[0];E(s)&&(i._nextPixelWidth=s.inlineSize,i._nextPixelHeight=s.blockSize,i._pixelWidth===i._nextPixelWidth&&i._pixelHeight===i._nextPixelHeight||i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(Dt(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(n){return!1})}return r.prototype._resetPixelRatio=function(){var e=this;this._executeListener(function(){var t=e._element.clientWidth,i=e._element.clientHeight;e._width=t,e._height=i,e._pixelWidth=e._nextPixelWidth,e._pixelHeight=e._nextPixelHeight,e._element.width=e._nextPixelWidth,e._element.height=e._nextPixelHeight;var n=e._nextPixelWidth/t,o=e._nextPixelHeight/i;e._ctx.scale(n,o)})},r.prototype._executeListener=function(e){var t=this;this._requestAnimationId===Ht&&(this._requestAnimationId=se(function(){t._ctx.clearRect(0,0,t._width,t._height),e?.(),t._listener(),t._requestAnimationId=Ht}))},r.prototype.update=function(e,t){if(this._width!==e||this._height!==t){if(this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px"),!this._supportedDevicePixelContentBox){var i=Dt(this._element);this._nextPixelWidth=Math.round(e*i),this._nextPixelHeight=Math.round(t*i),this._resetPixelRatio()}}else this._executeListener()},r.prototype.getElement=function(){return this._element},r.prototype.getContext=function(){return this._ctx},r.prototype.destroy=function(){E(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),E(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},r}(),Ci=function(r){function e(t,i){var n=r.call(this)||this;return n._bounding=ae(),n._pane=i,n._rootContainer=t,n._container=n.createContainer(),t.appendChild(n._container),n}return V(e,r),e.prototype.setBounding=function(t){return Z(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(De),Fe=function(r){function e(t,i){var n=r.call(this,t,i)||this;n._mainCanvas=new Ti({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateMain(n._mainCanvas.getContext())}),n._overlayCanvas=new Ti({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateOverlay(n._overlayCanvas.getContext())});var o=n.getContainer();return o.appendChild(n._mainCanvas.getElement()),o.appendChild(n._overlayCanvas.getElement()),n}return V(e,r),e.prototype.createContainer=function(){return Ct("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,i,n){var o=i.width,a=i.height,s=i.left;t.style.left="".concat(s,"px");var l=n,u=t.clientWidth,c=t.clientHeight;switch(o===u&&a===c||(t.style.width="".concat(o,"px"),t.style.height="".concat(a,"px"),l=3),l){case 0:this._mainCanvas.update(o,a);break;case 1:this._overlayCanvas.update(o,a);break;case 3:case 4:this._mainCanvas.update(o,a),this._overlayCanvas.update(o,a)}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=Ct("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Dt(a);return a.width=n*l,a.height=o*l,s.scale(l,l),s.drawImage(this._mainCanvas.getElement(),0,0,n,o),t&&s.drawImage(this._overlayCanvas.getElement(),0,0,n,o),a},e}(Ci);function wi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=at(n),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.y,c=s.r,h=r.x-l,p=r.y-u;if(!(h*h+p*p>c*c))return!0}}catch(d){t={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var Wn={name:"circle",checkEventOn:wi,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?b.PolygonType.Fill:s,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,v=d===void 0?"currentColor":d,g=o.borderStyle,f=g===void 0?b.LineType.Solid:g,x=o.borderDashedValue,m=x===void 0?[2,2]:x,y=!(l!==b.PolygonType.Fill&&o.style!==b.PolygonType.StrokeFill||Y(c)&&Nt(c));y&&(i.fillStyle=c,a.forEach(function(T){var w=T.x,C=T.y,_=T.r;i.beginPath(),i.arc(w,C,_,0,2*Math.PI),i.closePath(),i.fill()})),(l===b.PolygonType.Stroke||o.style===b.PolygonType.StrokeFill)&&p>0&&!Nt(v)&&(i.strokeStyle=v,i.lineWidth=p,f===b.LineType.Dashed?i.setLineDash(m):i.setLineDash([]),a.forEach(function(T){var w=T.x,C=T.y,_=T.r;(!y||_>p)&&(i.beginPath(),i.arc(w,C,_,0,2*Math.PI),i.closePath(),i.stroke())}))})(r,e,t)}};function Ei(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=at(n),a=o.next();!a.done;a=o.next()){for(var s=a.value,l=!1,u=s.coordinates,c=0,h=u.length-1;c<u.length;h=c++)u[c].y>r.y!=u[h].y>r.y&&r.x<(u[h].x-u[c].x)*(r.y-u[c].y)/(u[h].y-u[c].y)+u[c].x&&(l=!l);if(l)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var Vn={name:"polygon",checkEventOn:Ei,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?b.PolygonType.Fill:s,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,v=d===void 0?"currentColor":d,g=o.borderStyle,f=g===void 0?b.LineType.Solid:g,x=o.borderDashedValue,m=x===void 0?[2,2]:x;l!==b.PolygonType.Fill&&o.style!==b.PolygonType.StrokeFill||Y(c)&&Nt(c)||(i.fillStyle=c,a.forEach(function(y){var T=y.coordinates;i.beginPath(),i.moveTo(T[0].x,T[0].y);for(var w=1;w<T.length;w++)i.lineTo(T[w].x,T[w].y);i.closePath(),i.fill()})),(l===b.PolygonType.Stroke||o.style===b.PolygonType.StrokeFill)&&p>0&&!Nt(v)&&(i.strokeStyle=v,i.lineWidth=p,f===b.LineType.Dashed?i.setLineDash(m):i.setLineDash([]),a.forEach(function(y){var T=y.coordinates;i.beginPath(),i.moveTo(T[0].x,T[0].y);for(var w=1;w<T.length;w++)i.lineTo(T[w].x,T[w].y);i.closePath(),i.stroke()}))})(r,e,t)}};function Re(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=at(n),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.width;u<4&&(l-=2,u=4);var c=s.y,h=s.height;if(h<4&&(c-=2,h=4),r.x>=l&&r.x<=l+u&&r.y>=c&&r.y<=c+h)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function Si(r,e,t){var i,n=[];n=n.concat(e);var o=t.style,a=o===void 0?b.PolygonType.Fill:o,s=t.color,l=s===void 0?"transparent":s,u=t.borderSize,c=u===void 0?1:u,h=t.borderColor,p=h===void 0?"transparent":h,d=t.borderStyle,v=d===void 0?b.LineType.Solid:d,g=t.borderRadius,f=g===void 0?0:g,x=t.borderDashedValue,m=x===void 0?[2,2]:x,y=(i=r.roundRect)!==null&&i!==void 0?i:r.rect,T=!(a!==b.PolygonType.Fill&&t.style!==b.PolygonType.StrokeFill||Y(l)&&Nt(l));if(T&&(r.fillStyle=l,n.forEach(function(_){var S=_.x,P=_.y,M=_.width,R=_.height;r.beginPath(),y.call(r,S,P,M,R,f),r.closePath(),r.fill()})),(a===b.PolygonType.Stroke||t.style===b.PolygonType.StrokeFill)&&c>0&&!Nt(p)){r.strokeStyle=p,r.fillStyle=p,r.lineWidth=c,v===b.LineType.Dashed?r.setLineDash(m):r.setLineDash([]);var w=c%2==1?.5:0,C=Math.round(2*w);n.forEach(function(_){var S=_.x,P=_.y,M=_.width,R=_.height;M>2*c&&R>2*c?(r.beginPath(),y.call(r,S+w,P+w,M-C,R-C,f),r.closePath(),r.stroke()):T||r.fillRect(S,P,M,R)})}}var Nn={name:"rect",checkEventOn:Re,draw:function(r,e,t){Si(r,e,t)}};function Pi(r,e){var t=e.size,i=t===void 0?12:t,n=e.paddingLeft,o=n===void 0?0:n,a=e.paddingTop,s=a===void 0?0:a,l=e.paddingRight,u=l===void 0?0:l,c=e.paddingBottom,h=c===void 0?0:c,p=e.weight,d=p===void 0?"normal":p,v=e.family,g=r.x,f=r.y,x=r.text,m=r.align,y=m===void 0?"left":m,T=r.baseline,w=T===void 0?"top":T,C=r.width,_=r.height,S=C??o+Zt(x,i,d,v)+u,P=_??s+i+h,M=0;switch(y){case"left":case"start":M=g;break;case"right":case"end":M=g-S;break;default:M=g-S/2}var R=0;switch(w){case"top":case"hanging":R=f;break;case"bottom":case"ideographic":case"alphabetic":R=f-P;break;default:R=f-P/2}return{x:M,y:R,width:S,height:P}}function Ii(r,e,t){var i,n,o=[];o=o.concat(e);try{for(var a=at(o),s=a.next();!s.done;s=a.next()){var l=Pi(s.value,t),u=l.x,c=l.y,h=l.width,p=l.height;if(r.x>=u&&r.x<=u+h&&r.y>=c&&r.y<=c+p)return!0}}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return!1}var zn={name:"text",checkEventOn:Ii,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.color,l=s===void 0?"currentColor":s,u=o.size,c=u===void 0?12:u,h=o.family,p=o.weight,d=o.paddingLeft,v=d===void 0?0:d,g=o.paddingTop,f=g===void 0?0:g,x=o.paddingRight,m=x===void 0?0:x,y=a.map(function(T){return Pi(T,o)});Si(i,y,F(F({},o),{color:o.backgroundColor})),i.textAlign="left",i.textBaseline="top",i.font=Lt(c,p,h),i.fillStyle=l,a.forEach(function(T,w){var C=y[w];i.fillText(T.text,C.x+v,C.y+f,C.width-v-m)})})(r,e,t)}};function Mi(r,e){var t,i,n,o,a,s,l=[];l=l.concat(e);try{for(var u=at(l),c=u.next();!c.done;c=u.next()){var h=c.value;if(Math.abs((o=h,a=void 0,s=void 0,a=(n=r).x-o.x,s=n.y-o.y,Math.sqrt(a*a+s*s)-h.r))<2){var p=h.r,d=h.startAngle,v=h.endAngle,g=p*Math.cos(d)+h.x,f=p*Math.sin(d)+h.y,x=p*Math.cos(v)+h.x,m=p*Math.sin(v)+h.y;if(r.x<=Math.max(g,x)+2&&r.x>=Math.min(g,x)-2&&r.y<=Math.max(f,m)+2&&r.y>=Math.min(f,m)-2)return!0}}}catch(y){t={error:y}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return!1}var Yn={name:"arc",checkEventOn:Mi,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?b.LineType.Solid:s,u=o.size,c=u===void 0?1:u,h=o.color,p=h===void 0?"currentColor":h,d=o.dashedValue,v=d===void 0?[2,2]:d;i.lineWidth=c,i.strokeStyle=p,l===b.LineType.Dashed?i.setLineDash(v):i.setLineDash([]),a.forEach(function(g){var f=g.x,x=g.y,m=g.r,y=g.startAngle,T=g.endAngle;i.beginPath(),i.arc(f,x,m,y,T),i.stroke(),i.closePath()})})(r,e,t)}};function ki(r,e,t,i,n,o,a){var s=ft(i,7),l=s[0],u=s[1],c=s[2],h=s[3],p=s[4],d=s[5],v=s[6],g=function(f,x,m,y,T,w,C,_,S){for(var P=function(N,U,z,G,H,lt,X,ut,rt){var q=H*Math.PI/180,J=(N-ut)/2,nt=(U-rt)/2,Q=Math.cos(q)*J+Math.sin(q)*nt,$=-Math.sin(q)*J+Math.cos(q)*nt,ct=Math.pow(Q,2)/Math.pow(z,2)+Math.pow($,2)/Math.pow(G,2);ct>1&&(z*=Math.sqrt(ct),G*=Math.sqrt(ct));var ee=lt===X?-1:1,ie=Math.pow(z,2)*Math.pow(G,2)-Math.pow(z,2)*Math.pow($,2)-Math.pow(G,2)*Math.pow(Q,2),ne=Math.pow(z,2)*Math.pow($,2)+Math.pow(G,2)*Math.pow(Q,2),_t=ee*Math.sqrt(Math.abs(ie/ne))*(z*$/G),At=ee*Math.sqrt(Math.abs(ie/ne))*(-G*Q/z),re=Math.cos(q)*_t-Math.sin(q)*At+(N+ut)/2,pe=Math.sin(q)*_t+Math.cos(q)*At+(U+rt)/2,ge=Math.atan2(($-At)/G,(Q-_t)/z),xt=Math.atan2((-$-At)/G,(-Q-_t)/z)-ge;return xt<0&&X===1?xt+=2*Math.PI:xt>0&&X===0&&(xt-=2*Math.PI),{cx:re,cy:pe,startAngle:ge,deltaAngle:xt}}(f,x,m,y,T,w,C,_,S),M=P.cx,R=P.cy,O=P.startAngle,k=P.deltaAngle,D=[],I=Math.ceil(Math.abs(k)/(Math.PI/2)),A=0;A<I;A++){var B=Hn(M,R,m,y,T,O+A*k/I,O+(A+1)*k/I);D.push(B)}return D}(e,t,l,u,c,h,p,a?e+d:d+n,a?t+v:v+o);g.forEach(function(f){r.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])})}function Hn(r,e,t,i,n,o,a){var s=Math.sin(a-o)*(Math.sqrt(4+3*Math.pow(Math.tan((a-o)/2),2))-1)/3,l=Math.cos(n),u=Math.sin(n),c=r+t*Math.cos(o)*l-i*Math.sin(o)*u,h=e+t*Math.cos(o)*u+i*Math.sin(o)*l,p=r+t*Math.cos(a)*l-i*Math.sin(a)*u,d=e+t*Math.cos(a)*u+i*Math.sin(a)*l;return[c+s*(-t*Math.sin(o)*l-i*Math.cos(o)*u),h+s*(-t*Math.sin(o)*u+i*Math.cos(o)*l),p-s*(-t*Math.sin(a)*l-i*Math.cos(a)*u),d-s*(-t*Math.sin(a)*u+i*Math.cos(a)*l),p,d]}var Xn={name:"path",checkEventOn:Re,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.lineWidth,l=s===void 0?1:s,u=o.color,c=u===void 0?"currentColor":u;i.lineWidth=l,i.strokeStyle=c,i.setLineDash([]),a.forEach(function(h){var p=h.x,d=h.y,v=h.path.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(E(v)){var g=p,f=d;i.beginPath(),v.forEach(function(x){var m=0,y=0,T=0,w=0,C=x[0],_=x.slice(1).trim().split(/[\s,]+/).map(Number);switch(C){case"M":m=_[0]+g,y=_[1]+f,i.moveTo(m,y),T=m,w=y;break;case"m":m+=_[0],y+=_[1],i.moveTo(m,y),T=m,w=y;break;case"L":m=_[0]+g,y=_[1]+f,i.lineTo(m,y);break;case"l":m+=_[0],y+=_[1],i.lineTo(m,y);break;case"H":m=_[0]+g,i.lineTo(m,y);break;case"h":m+=_[0],i.lineTo(m,y);break;case"V":y=_[0]+f,i.lineTo(m,y);break;case"v":y+=_[0],i.lineTo(m,y);break;case"C":i.bezierCurveTo(_[0]+g,_[1]+f,_[2]+g,_[3]+f,_[4]+g,_[5]+f),m=_[4]+g,y=_[5]+f;break;case"c":i.bezierCurveTo(m+_[0],y+_[1],m+_[2],y+_[3],m+_[4],y+_[5]),m+=_[4],y+=_[5];break;case"S":i.bezierCurveTo(m,y,_[0]+g,_[1]+f,_[2]+g,_[3]+f),m=_[2]+g,y=_[3]+f;break;case"s":i.bezierCurveTo(m,y,m+_[0],y+_[1],m+_[2],y+_[3]),m+=_[2],y+=_[3];break;case"Q":i.quadraticCurveTo(_[0]+g,_[1]+f,_[2]+g,_[3]+f),m=_[2]+g,y=_[3]+f;break;case"q":i.quadraticCurveTo(m+_[0],y+_[1],m+_[2],y+_[3]),m+=_[2],y+=_[3];break;case"T":i.quadraticCurveTo(m,y,_[0]+g,_[1]+f),m=_[0]+g,y=_[1]+f;break;case"t":i.quadraticCurveTo(m,y,m+_[0],y+_[1]),m+=_[0],y+=_[1];break;case"A":ki(i,m,y,_,g,f,!1),m=_[5]+g,y=_[6]+f;break;case"a":ki(i,m,y,_,g,f,!0),m+=_[5],y+=_[6];break;case"Z":case"z":i.closePath(),m=T,y=w}}),o.style===me.Fill?i.fill():i.stroke()}})})(r,e,t)}},Jt={};[Wn,wn,Vn,Nn,zn,Yn,Xn].forEach(function(r){Jt[r.name]=vi.extend(r)});var St,gt=function(r){function e(t){var i=r.call(this)||this;return i._widget=t,i}return V(e,r),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,i){var n,o,a=(n=t.name,(o=Jt[n])!==null&&o!==void 0?o:null);if(a!==null){var s=new a(t);if(E(i)){for(var l in i)i.hasOwnProperty(l)&&s.registerEvent(l,i[l]);this.addChild(s)}return s}return null},e.prototype.draw=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.clear(),this.drawImp(t,i)},e}(De),Gn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n,o=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=o.getBounding(),u=s.getStyles().grid;if(u.show){t.save(),t.globalCompositeOperation="destination-over";var c=u.horizontal;if(c.show){var h=a.getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:0,y:d.coord},{x:l.width,y:d.coord}]}});(i=this.createFigure({name:"line",attrs:h,styles:c}))===null||i===void 0||i.draw(t)}var p=u.vertical;p.show&&(h=s.getXAxisPane().getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:d.coord,y:0},{x:d.coord,y:l.height}]}}),(n=this.createFigure({name:"line",attrs:h,styles:p}))===null||n===void 0||n.draw(t)),t.restore()}},e}(gt),Di=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.eachChildren=function(t){for(var i=this.getWidget().getPane().getChart().getChartStore(),n=i.getVisibleRangeDataList(),o=i.getBarSpace(),a=n.length,s=0;s<a;)t(n[s],o,s),++s},e}(gt),Ai=function(r){function e(){var t=r.apply(this,Ut([],ft(arguments),!1))||this;return t._boundCandleBarClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction(b.ActionType.OnCandleBarClick,i),!1}},t}return V(e,r),e.prototype.drawImp=function(t){var i=this,n=this.getWidget().getPane(),o=n.getId()===it,a=n.getChart().getChartStore(),s=this.getCandleBarOptions();if(s!==null){var l=s.type,u=s.styles,c=0,h=0;if(s.type===b.CandleType.Ohlc){var p=a.getBarSpace().gapBar;(c=Math.min(Math.max(Math.round(.2*p),1),8))>2&&c%2==1&&c--,h=Math.floor(h/2)}var d=n.getAxisComponent();this.eachChildren(function(v,g){var f,x=v.x,m=v.data,y=m.current,T=m.prev;if(E(y)){var w=y.open,C=y.high,_=y.low,S=y.close,P=u.compareRule===Mt.CurrentOpen?w:(f=T?.close)!==null&&f!==void 0?f:S,M=[];S>P?(M[0]=u.upColor,M[1]=u.upBorderColor,M[2]=u.upWickColor):S<P?(M[0]=u.downColor,M[1]=u.downBorderColor,M[2]=u.downWickColor):(M[0]=u.noChangeColor,M[1]=u.noChangeBorderColor,M[2]=u.noChangeWickColor);var R=d.convertToPixel(w),O=d.convertToPixel(S),k=[R,O,d.convertToPixel(C),d.convertToPixel(_)];k.sort(function(A,B){return A-B});var D=g.gapBar%2==0?1:0,I=[];switch(l){case b.CandleType.CandleSolid:I=i._createSolidBar(x,k,g,M,D);break;case b.CandleType.CandleStroke:I=i._createStrokeBar(x,k,g,M,D);break;case b.CandleType.CandleUpStroke:I=S>w?i._createStrokeBar(x,k,g,M,D):i._createSolidBar(x,k,g,M,D);break;case b.CandleType.CandleDownStroke:I=w>S?i._createStrokeBar(x,k,g,M,D):i._createSolidBar(x,k,g,M,D);break;case b.CandleType.Ohlc:I=[{name:"rect",attrs:[{x:x-h,y:k[0],width:c,height:k[3]-k[0]},{x:x-g.halfGapBar,y:R+c>k[3]?k[3]-c:R,width:g.halfGapBar,height:c},{x:x+h,y:O+c>k[3]?k[3]-c:O,width:g.halfGapBar-h,height:c}],styles:{color:M[0]}}]}I.forEach(function(A){var B,N=null;o&&(N={mouseClickEvent:i._boundCandleBarClickEvent(v)}),(B=i.createFigure(A,N??void 0))===null||B===void 0||B.draw(t)})}})}},e.prototype.getCandleBarOptions=function(){var t=this.getWidget().getPane().getChart().getStyles().candle;return{type:t.type,styles:t.bar}},e.prototype._createSolidBar=function(t,i,n,o,a){return[{name:"rect",attrs:{x:t,y:i[0],width:1,height:i[3]-i[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:b.PolygonType.StrokeFill,color:o[0],borderColor:o[1]}}]},e.prototype._createStrokeBar=function(t,i,n,o,a){return[{name:"rect",attrs:[{x:t,y:i[0],width:1,height:i[1]-i[0]},{x:t,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:b.PolygonType.Stroke,borderColor:o[1]}}]},e}(Di),Un=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.getCandleBarOptions=function(){var t,i,n=this.getWidget().getPane();if(!n.getAxisComponent().isInCandle()){var o=n.getChart().getChartStore(),a=o.getIndicatorsByPaneId(n.getId());try{for(var s=at(a),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.shouldOhlc&&u.visible){var c=u.styles,h=o.getStyles().indicator,p=K(c,"ohlc.compareRule",h.ohlc.compareRule),d=K(c,"ohlc.upColor",h.ohlc.upColor),v=K(c,"ohlc.downColor",h.ohlc.downColor),g=K(c,"ohlc.noChangeColor",h.ohlc.noChangeColor);return{type:b.CandleType.Ohlc,styles:{compareRule:p,upColor:d,downColor:v,noChangeColor:g,upBorderColor:d,downBorderColor:v,noChangeBorderColor:g,upWickColor:d,downWickColor:v,noChangeWickColor:g}}}}}catch(f){t={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}}return null},e.prototype.drawImp=function(t){var i=this;r.prototype.drawImp.call(this,t);var n=this.getWidget(),o=n.getPane(),a=o.getChart(),s=n.getBounding(),l=a.getXAxisPane().getAxisComponent(),u=o.getAxisComponent(),c=a.getChartStore(),h=c.getIndicatorsByPaneId(o.getId()),p=c.getStyles().indicator;t.save(),h.forEach(function(d){if(d.visible){d.zLevel<0?t.globalCompositeOperation="destination-over":t.globalCompositeOperation="source-over";var v=!1;if(d.draw!==null&&(t.save(),v=d.draw({ctx:t,chart:a,indicator:d,bounding:s,xAxis:l,yAxis:u}),t.restore()),!v){var g=d.result,f=[];i.eachChildren(function(x,m){var y,T,w,C=m.halfGapBar,_=x.dataIndex,S=x.x,P=l.convertToPixel(_-1),M=l.convertToPixel(_+1),R=(y=g[_-1])!==null&&y!==void 0?y:null,O=(T=g[_])!==null&&T!==void 0?T:null,k=(w=g[_+1])!==null&&w!==void 0?w:null,D={x:P},I={x:S},A={x:M};d.figures.forEach(function(B){var N=B.key,U=R?.[N];L(U)&&(D[N]=u.convertToPixel(U));var z=O?.[N];L(z)&&(I[N]=u.convertToPixel(z));var G=k?.[N];L(G)&&(A[N]=u.convertToPixel(G))}),we(d,_,p,function(B,N,U){var z,G,H;if(E(O?.[B.key])){var lt=I[B.key],X=(z=B.attrs)===null||z===void 0?void 0:z.call(B,{data:{prev:R,current:O,next:k},coordinate:{prev:D,current:I,next:A},bounding:s,barSpace:m,xAxis:l,yAxis:u});if(!E(X))switch(B.type){case"circle":X={x:S,y:lt,r:Math.max(1,C)};break;case"rect":case"bar":var ut=(G=B.baseValue)!==null&&G!==void 0?G:u.getRange().from,rt=u.convertToPixel(ut),q=Math.abs(rt-lt);ut!==O?.[B.key]&&(q=Math.max(1,q)),X={x:S-C,y:lt>rt?rt:lt,width:Math.max(1,2*C),height:q};break;case"line":E(f[U])||(f[U]=[]),L(I[B.key])&&L(A[B.key])&&f[U].push({coordinates:[{x:I.x,y:I[B.key]},{x:A.x,y:A[B.key]}],styles:N})}var J=B.type;E(X)&&J!=="line"&&((H=i.createFigure({name:J==="bar"?"rect":J,attrs:X,styles:N}))===null||H===void 0||H.draw(t))}})}),f.forEach(function(x){var m,y,T,w;if(x.length>1){for(var C=[{coordinates:[x[0].coordinates[0],x[0].coordinates[1]],styles:x[0].styles}],_=1;_<x.length;_++){var S=C[C.length-1],P=x[_],M=S.coordinates[S.coordinates.length-1];M.x===P.coordinates[0].x&&M.y===P.coordinates[0].y&&S.styles.style===P.styles.style&&S.styles.color===P.styles.color&&S.styles.size===P.styles.size&&S.styles.smooth===P.styles.smooth&&((m=S.styles.dashedValue)===null||m===void 0?void 0:m[0])===((y=P.styles.dashedValue)===null||y===void 0?void 0:y[0])&&((T=S.styles.dashedValue)===null||T===void 0?void 0:T[1])===((w=P.styles.dashedValue)===null||w===void 0?void 0:w[1])?S.coordinates.push(P.coordinates[1]):C.push({coordinates:[P.coordinates[0],P.coordinates[1]],styles:P.styles})}C.forEach(function(R){var O,k=R.coordinates,D=R.styles;(O=i.createFigure({name:"line",attrs:{coordinates:k},styles:D}))===null||O===void 0||O.draw(t)})}})}}}),t.restore()},e}(Ai),qn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=i.getBounding(),a=i.getPane().getChart().getChartStore(),s=a.getCrosshair(),l=a.getStyles().crosshair;if(Y(s.paneId)&&l.show){if(s.paneId===n.getId()){var u=s.y;this._drawLine(t,[{x:0,y:u},{x:o.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:o.height}],l.vertical)}},e.prototype._drawLine=function(t,i,n){var o;if(n.show){var a=n.line;a.show&&((o=this.createFigure({name:"line",attrs:{coordinates:i},styles:a}))===null||o===void 0||o.draw(t))}},e}(gt),Fi=function(r){function e(){var t=r.apply(this,Ut([],ft(arguments),!1))||this;return t._boundFeatureClickEvent=function(i){return function(){var n,o=t.getWidget().getPane(),a=i.indicator,s=Gt(i,["indicator"]);return E(a)?(n=a.onClick)===null||n===void 0||n.call(a,F({target:Ce.Feature,chart:o.getChart(),indicator:a},s)):o.getChart().getChartStore().executeAction(b.ActionType.OnCandleTooltipFeatureClick,i),!0}},t._boundFeatureMouseMoveEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().setActiveTooltipFeatureInfo(i),!0}},t}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore();if(E(n.getCrosshair().kLineData)){var o=i.getBounding(),a=n.getStyles().indicator.tooltip,s=a.offsetLeft,l=a.offsetTop,u=a.offsetRight;this.drawIndicatorTooltip(t,s,l,o.width-u)}},e.prototype.drawIndicatorTooltip=function(t,i,n,o){var a=this,s=this.getWidget().getPane(),l=s.getChart().getChartStore(),u=l.getStyles().indicator.tooltip;if(this.isDrawTooltip(l.getCrosshair(),u)){var c=l.getIndicatorsByPaneId(s.getId()),h=u.text;c.forEach(function(p){var d=0,v={x:i,y:n},g=a.getIndicatorTooltipData(p),f=g.name,x=g.calcParamsText,m=g.legends,y=g.features,T=f.length>0,w=m.length>0;if(T||w){var C=ft(a.classifyTooltipFeatures(y),3),_=C[0],S=C[1],P=C[2];if(d=a.drawStandardTooltipFeatures(t,_,v,p,i,d,o),T){var M=f;x.length>0&&(M="".concat(M).concat(x)),d=a.drawStandardTooltipLegends(t,[{title:{text:"",color:h.color},value:{text:M,color:h.color}}],v,i,d,o,h)}d=a.drawStandardTooltipFeatures(t,S,v,p,i,d,o),w&&(d=a.drawStandardTooltipLegends(t,m,v,i,d,o,u.text)),d=a.drawStandardTooltipFeatures(t,P,v,p,i,d,o),n=v.y+d}})}return n},e.prototype.drawStandardTooltipFeatures=function(t,i,n,o,a,s,l){var u=this;if(i.length>0){var c=0,h=0;i.forEach(function(g){var f=g.marginLeft,x=f===void 0?0:f,m=g.marginTop,y=m===void 0?0:m,T=g.marginRight,w=T===void 0?0:T,C=g.marginBottom,_=C===void 0?0:C,S=g.paddingLeft,P=S===void 0?0:S,M=g.paddingTop,R=M===void 0?0:M,O=g.paddingRight,k=O===void 0?0:O,D=g.paddingBottom,I=D===void 0?0:D,A=g.size,B=A===void 0?0:A,N=g.type,U=g.iconFont,z=0;N===b.TooltipFeatureType.IconFont?(t.font=Lt(B,"normal",U.family),z=t.measureText(U.content).width):z=B,c+=x+P+z+k+w,h=Math.max(h,y+R+B+I+_)}),n.x+c>l?(n.x=a,n.y+=s,s=h):s=Math.max(s,h);var p=this.getWidget().getPane(),d=p.getId(),v=p.getChart().getChartStore().getActiveTooltipFeatureInfo();i.forEach(function(g){var f,x,m,y,T=g.marginLeft,w=T===void 0?0:T,C=g.marginTop,_=C===void 0?0:C,S=g.marginRight,P=S===void 0?0:S,M=g.paddingLeft,R=M===void 0?0:M,O=g.paddingTop,k=O===void 0?0:O,D=g.paddingRight,I=D===void 0?0:D,A=g.paddingBottom,B=A===void 0?0:A,N=g.backgroundColor,U=g.activeBackgroundColor,z=g.borderRadius,G=g.size,H=G===void 0?0:G,lt=g.color,X=g.activeColor,ut=g.type,rt=g.iconFont,q=g.path,J=v?.paneId===d&&((f=v.indicator)===null||f===void 0?void 0:f.id)===o?.id&&v.feature.id===g.id,nt=0,Q={mouseClickEvent:u._boundFeatureClickEvent({paneId:d,indicator:o,feature:g}),mouseMoveEvent:u._boundFeatureMouseMoveEvent({paneId:d,indicator:o,feature:g})},$=J&&X!=null?X:lt,ct=J&&U!=null?U:N;ut===b.TooltipFeatureType.IconFont?((x=u.createFigure({name:"text",attrs:{text:rt.content,x:n.x+w,y:n.y+_},styles:{paddingLeft:R,paddingTop:k,paddingRight:I,paddingBottom:B,borderRadius:z,size:H,family:rt.family,color:$,backgroundColor:ct}},Q))===null||x===void 0||x.draw(t),nt=t.measureText(rt.content).width):((m=u.createFigure({name:"rect",attrs:{x:n.x+w,y:n.y+_,width:H,height:H},styles:{paddingLeft:R,paddingTop:k,paddingRight:I,paddingBottom:B,color:ct}},Q))===null||m===void 0||m.draw(t),(y=u.createFigure({name:"path",attrs:{path:q.path,x:n.x+w+R,y:n.y+_+k,width:H,height:H},styles:{style:q.style,lineWidth:q.lineWidth,color:$}}))===null||y===void 0||y.draw(t),nt=H),n.x+=w+R+nt+I+P})}return s},e.prototype.drawStandardTooltipLegends=function(t,i,n,o,a,s,l){var u=this;if(i.length>0){var c=l.marginLeft,h=l.marginTop,p=l.marginRight,d=l.marginBottom,v=l.size,g=l.family,f=l.weight;t.font=Lt(v,f,g),i.forEach(function(x){var m,y,T=x.title,w=x.value,C=t.measureText(T.text).width,_=C+t.measureText(w.text).width,S=h+v+d;n.x+c+_+p>s?(n.x=o,n.y+=a,a=S):a=Math.max(a,S),T.text.length>0&&((m=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+h,text:T.text},styles:{color:T.color,size:v,family:g,weight:f}}))===null||m===void 0||m.draw(t)),(y=u.createFigure({name:"text",attrs:{x:n.x+c+C,y:n.y+h,text:w.text},styles:{color:w.color,size:v,family:g,weight:f}}))===null||y===void 0||y.draw(t),n.x+=c+_+p})}return a},e.prototype.isDrawTooltip=function(t,i){var n=i.showRule;return n===b.TooltipShowRule.Always||n===b.TooltipShowRule.FollowCross&&Y(t.paneId)},e.prototype.getIndicatorTooltipData=function(t){var i,n,o=this.getWidget().getPane().getChart().getChartStore(),a=o.getStyles().indicator,s=a.tooltip,l=s.showName?t.shortName:"",u="";if(s.showParams){var c=t.calcParams;c.length>0&&(u="(".concat(c.join(","),")"))}var h={name:l,calcParamsText:u,legends:[],features:s.features},p=o.getCrosshair().dataIndex,d=t.result,v=o.getCustomApi(),g=o.getDecimalFold(),f=o.getThousandsSeparator(),x=[];if(t.visible){var m=(n=(i=d[p])!==null&&i!==void 0?i:d[p-1])!==null&&n!==void 0?n:{};we(t,p,a,function(k,D){if(Y(k.title)){var I=D.color,A=m[k.key];L(A)&&(A=et(A,t.precision),t.shouldFormatBigNumber&&(A=v.formatBigNumber(A)),A=g.format(f.format(A))),x.push({title:{text:k.title,color:I},value:{text:A??s.defaultValue,color:I}})}}),h.legends=x}if(tt(t.createTooltipDataSource)){var y=this.getWidget(),T=y.getPane(),w=T.getChart(),C=t.createTooltipDataSource({chart:w,indicator:t,crosshair:o.getCrosshair(),bounding:y.getBounding(),xAxis:T.getChart().getXAxisPane().getAxisComponent(),yAxis:T.getAxisComponent()}),_=C.name,S=C.calcParamsText,P=C.legends,M=C.features;if(Y(_)&&s.showName&&(h.name=_),Y(S)&&s.showParams&&(h.calcParamsText=S),E(M)&&(h.features=M),E(P)&&t.visible){var R=[],O=a.tooltip.text.color;P.forEach(function(k){var D={text:"",color:O};pt(k.title)?D=k.title:D.text=k.title;var I={text:"",color:O};pt(k.value)?I=k.value:I.text=k.value,L(Number(I.text))&&(I.text=g.format(f.format(I.text))),R.push({title:D,value:I})}),h.legends=R}}return h},e.prototype.classifyTooltipFeatures=function(t){var i=[],n=[],o=[];return t.forEach(function(a){switch(a.position){case b.TooltipFeaturePosition.Left:i.push(a);break;case b.TooltipFeaturePosition.Middle:n.push(a);break;case b.TooltipFeaturePosition.Right:o.push(a)}}),[i,n,o]},e}(gt),Ri=function(r){function e(t){var i=r.call(this,t)||this;return i._initEvent(),i}return V(e,r),e.prototype._initEvent=function(){var t=this,i=this.getWidget().getPane(),n=i.getId(),o=i.getChart(),a=o.getChartStore();this.registerEvent("mouseMoveEvent",function(s){var l,u=a.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;c.isStart()&&(a.updateProgressOverlayInfo(n),h=n);var p=c.points.length-1;return c.isDrawing()&&h===n&&(c.eventMoveForDrawing(t._coordinateToPoint(c,s)),(l=c.onDrawing)===null||l===void 0||l.call(c,F({chart:o,overlay:c},s))),t._figureMouseMoveEvent(c,1,p,{key:"".concat(Yt,"point_").concat(p),type:"circle",attrs:{}})(s)}return a.setHoverOverlayInfo({paneId:n,overlay:null,figureType:0,figureIndex:-1,figure:null},s),!1}).registerEvent("mouseClickEvent",function(s){var l,u,c=a.getProgressOverlayInfo();if(c!==null){var h=c.overlay,p=c.paneId;h.isStart()&&(a.updateProgressOverlayInfo(n,!0),p=n);var d=h.points.length-1;return h.isDrawing()&&p===n&&(h.eventMoveForDrawing(t._coordinateToPoint(h,s)),(l=h.onDrawing)===null||l===void 0||l.call(h,F({chart:o,overlay:h},s)),h.nextStep(),h.isDrawing()||(a.progressOverlayComplete(),(u=h.onDrawEnd)===null||u===void 0||u.call(h,F({chart:o,overlay:h},s)))),t._figureMouseClickEvent(h,1,d,{key:"".concat(Yt,"point_").concat(d),type:"circle",attrs:{}})(s)}return a.setClickOverlayInfo({paneId:n,overlay:null,figureType:0,figureIndex:-1,figure:null},s),!1}).registerEvent("mouseDoubleClickEvent",function(s){var l,u=a.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;c.isDrawing()&&h===n&&(c.forceComplete(),c.isDrawing()||(a.progressOverlayComplete(),(l=c.onDrawEnd)===null||l===void 0||l.call(c,F({chart:o,overlay:c},s))));var p=c.points.length-1;return t._figureMouseClickEvent(c,1,p,{key:"".concat(Yt,"point_").concat(p),type:"circle",attrs:{}})(s)}return!1}).registerEvent("mouseRightClickEvent",function(s){var l=a.getProgressOverlayInfo();if(l!==null){var u=l.overlay;if(u.isDrawing()){var c=u.points.length-1;return t._figureMouseRightClickEvent(u,1,c,{key:"".concat(Yt,"point_").concat(c),type:"circle",attrs:{}})(s)}}return!1}).registerEvent("mouseUpEvent",function(s){var l,u=a.getPressedOverlayInfo(),c=u.overlay,h=u.figure;return c!==null&&ht("onPressedMoveEnd",h)&&((l=c.onPressedMoveEnd)===null||l===void 0||l.call(c,F({chart:o,overlay:c,figure:h??void 0},s))),a.setPressedOverlayInfo({paneId:n,overlay:null,figureType:0,figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(s){var l,u,c=a.getPressedOverlayInfo(),h=c.overlay,p=c.figureType,d=c.figureIndex,v=c.figure;if(h!==null&&ht("onPressedMoving",v)){if(!(h.lock||(u=(l=h.onPressedMoving)===null||l===void 0?void 0:l.call(h,F({chart:o,overlay:h,figure:v??void 0},s)))!==null&&u!==void 0&&u)){var g=t._coordinateToPoint(h,s);p===1?h.eventPressedPointMove(g,d):h.eventPressedOtherMove(g,t.getWidget().getPane().getChart().getChartStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,i,n,o){return t.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(t,i,n,o),mouseDownEvent:this._figureMouseDownEvent(t,i,n,o),mouseClickEvent:this._figureMouseClickEvent(t,i,n,o),mouseRightClickEvent:this._figureMouseRightClickEvent(t,i,n,o),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,i,n,o)}},e.prototype._figureMouseMoveEvent=function(t,i,n,o){var a=this;return function(s){var l=a.getWidget().getPane();return l.getChart().getChartStore().setHoverOverlayInfo({paneId:l.getId(),overlay:t,figureType:i,figure:o,figureIndex:n},s),ht("onMouseEnter",o)&&!t.isDrawing()}},e.prototype._figureMouseDownEvent=function(t,i,n,o){var a=this;return function(s){var l,u=a.getWidget().getPane(),c=u.getId();return t.startPressedMove(a._coordinateToPoint(t,s)),!!ht("onPressedMoveStart",o)&&((l=t.onPressedMoveStart)===null||l===void 0||l.call(t,F({chart:u.getChart(),overlay:t,figure:o},s)),u.getChart().getChartStore().setPressedOverlayInfo({paneId:c,overlay:t,figureType:i,figureIndex:n,figure:o}),!t.isDrawing())}},e.prototype._figureMouseClickEvent=function(t,i,n,o){var a=this;return function(s){var l=a.getWidget().getPane(),u=l.getId();return l.getChart().getChartStore().setClickOverlayInfo({paneId:u,overlay:t,figureType:i,figureIndex:n,figure:o},s),ht("onClick",o)&&!t.isDrawing()}},e.prototype._figureMouseDoubleClickEvent=function(t,i,n,o){var a=this;return function(s){var l;return!!ht("onDoubleClick",o)&&((l=t.onDoubleClick)===null||l===void 0||l.call(t,F(F({},s),{chart:a.getWidget().getPane().getChart(),figure:o,overlay:t})),!t.isDrawing())}},e.prototype._figureMouseRightClickEvent=function(t,i,n,o){var a=this;return function(s){var l,u;return!!ht("onRightClick",o)&&((u=(l=t.onRightClick)===null||l===void 0?void 0:l.call(t,F({chart:a.getWidget().getPane().getChart(),overlay:t,figure:o},s)))!==null&&u!==void 0&&u||a.getWidget().getPane().getChart().getChartStore().removeOverlay(t),!t.isDrawing())}},e.prototype._coordinateToPoint=function(t,i){var n,o={},a=this.getWidget().getPane(),s=a.getChart(),l=a.getId(),u=s.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=s.getXAxisPane().getAxisComponent().convertFromPixel(i.x),h=(n=u.dataIndexToTimestamp(c))!==null&&n!==void 0?n:void 0;o.timestamp=h,o.dataIndex=c}if(this.coordinateToPointValueFlag()){var p=a.getAxisComponent(),d=p.convertFromPixel(i.y);if(t.mode!==b.OverlayMode.Normal&&l===it&&L(o.dataIndex)){var v=u.getDataByDataIndex(o.dataIndex);if(v!==null){var g=t.modeSensitivity;if(d>v.high)if(t.mode===b.OverlayMode.WeakMagnet){var f=p.convertToPixel(v.high);d<p.convertFromPixel(f-g)&&(d=v.high)}else d=v.high;else if(d<v.low)if(t.mode===b.OverlayMode.WeakMagnet){var x=p.convertToPixel(v.low);d>p.convertFromPixel(x-g)&&(d=v.low)}else d=v.low;else{var m=Math.max(v.open,v.close),y=Math.min(v.open,v.close);d=d>m?d-m<v.high-d?m:v.high:d<y?d-v.low<y-d?v.low:y:m-d<d-y?m:y}}}o.value=d}return o},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,i,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(t,i,n):r.prototype.dispatchEvent.call(this,t,i,n)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var i=this;this.getCompleteOverlays().forEach(function(o){o.visible&&i._drawOverlay(t,o)});var n=this.getProgressOverlay();E(n)&&n.visible&&this._drawOverlay(t,n)},e.prototype._drawOverlay=function(t,i){var n=i.points,o=this.getWidget().getPane(),a=o.getChart(),s=a.getChartStore(),l=o.getAxisComponent(),u=a.getXAxisPane().getAxisComponent(),c=n.map(function(p){var d,v=null;L(p.timestamp)&&(v=s.timestampToDataIndex(p.timestamp));var g={x:0,y:0};return L(v)&&(g.x=u.convertToPixel(v)),L(p.value)&&(g.y=(d=l?.convertToPixel(p.value))!==null&&d!==void 0?d:0),g});if(c.length>0){var h=[].concat(this.getFigures(i,c));this.drawFigures(t,i,h)}this.drawDefaultFigures(t,i,c)},e.prototype.drawFigures=function(t,i,n){var o=this,a=this.getWidget().getPane().getChart().getStyles().overlay;n.forEach(function(s,l){var u=s.type,c=s.styles,h=s.attrs;[].concat(h).forEach(function(p){var d,v,g=o._createFigureEvents(i,2,l,s),f=F(F(F({},a[u]),(d=i.styles)===null||d===void 0?void 0:d[u]),c);(v=o.createFigure({name:u,attrs:p,styles:f},g??void 0))===null||v===void 0||v.draw(t)})})},e.prototype.getCompleteOverlays=function(){var t=this.getWidget().getPane();return t.getChart().getChartStore().getOverlaysByPaneId(t.getId())},e.prototype.getProgressOverlay=function(){var t=this.getWidget().getPane(),i=t.getChart().getChartStore().getProgressOverlayInfo();return E(i)&&i.paneId===t.getId()?i.overlay:null},e.prototype.getFigures=function(t,i){var n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(n=t.createPointFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e.prototype.drawDefaultFigures=function(t,i,n){var o,a,s=this;if(i.needDefaultPointFigure){var l=this.getWidget().getPane().getChart().getChartStore(),u=l.getHoverOverlayInfo(),c=l.getClickOverlayInfo();if(((o=u.overlay)===null||o===void 0?void 0:o.id)===i.id&&u.figureType!==0||((a=c.overlay)===null||a===void 0?void 0:a.id)===i.id&&c.figureType!==0){var h=l.getStyles().overlay,p=i.styles,d=F(F({},h.point),p?.point);n.forEach(function(v,g){var f,x,m,y,T,w=v.x,C=v.y,_=d.radius,S=d.color,P=d.borderColor,M=d.borderSize;((f=u.overlay)===null||f===void 0?void 0:f.id)===i.id&&u.figureType===1&&((x=u.figure)===null||x===void 0?void 0:x.key)==="".concat(Yt,"point_").concat(g)&&(_=d.activeRadius,S=d.activeColor,P=d.activeBorderColor,M=d.activeBorderSize),(y=s.createFigure({name:"circle",attrs:{x:w,y:C,r:_+M},styles:{color:P}},(m=s._createFigureEvents(i,1,g,{key:"".concat(Yt,"point_").concat(g),type:"circle",attrs:{x:w,y:C,r:_+M},styles:{color:P}}))!==null&&m!==void 0?m:void 0))===null||y===void 0||y.draw(t),(T=s.createFigure({name:"circle",attrs:{x:w,y:C,r:_},styles:{color:S}}))===null||T===void 0||T.draw(t)})}}},e}(gt),Bi=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._gridView=new Gn(n),n._indicatorView=new Un(n),n._crosshairLineView=new qn(n),n._tooltipView=n.createTooltipView(),n._overlayView=new Ri(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n}return V(e,r),e.prototype.getName=function(){return ot},e.prototype.updateMain=function(t){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t))},e.prototype.createTooltipView=function(){return new Fi(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(t),this._crosshairLineView.draw(t)),this._tooltipView.draw(t)},e}(Fe),Zn=function(r){function e(){var t=r.apply(this,Ut([],ft(arguments),!1))||this;return t._ripplePoint=t.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),t._animationFrameTime=0,t._animation=new Se({iterationCount:1/0}).doFrame(function(i){t._animationFrameTime=i;var n=t.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),t}return V(e,r),e.prototype.drawImp=function(t){var i,n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=l.getDataList().length-1,c=a.getBounding(),h=s.getAxisComponent(),p=l.getStyles().candle.area,d=[],v=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER,f=null;if(this.eachChildren(function(C){var _=C.x,S=C.data.current,P=S?.[p.value];if(L(P)){var M=h.convertToPixel(P);g===Number.MIN_SAFE_INTEGER&&(g=_),d.push({x:_,y:M}),v=Math.min(v,M),C.dataIndex===u&&(f={x:_,y:M})}}),d.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:p.lineColor,size:p.lineSize,smooth:p.smooth}}))===null||i===void 0||i.draw(t);var x=p.backgroundColor,m="";if(yt(x)){var y=t.createLinearGradient(0,c.height,0,v);try{x.forEach(function(C){var _=C.offset,S=C.color;y.addColorStop(_,S)})}catch{}m=y}else m=x;t.fillStyle=m,t.beginPath(),t.moveTo(g,c.height),t.lineTo(d[0].x,d[0].y),yi(t,d,p.smooth),t.lineTo(d[d.length-1].x,c.height),t.closePath(),t.fill()}var T=p.point;if(T.show&&E(f)){(n=this.createFigure({name:"circle",attrs:{x:f.x,y:f.y,r:T.radius},styles:{style:"fill",color:T.color}}))===null||n===void 0||n.draw(t);var w=T.rippleRadius;T.animation&&(w=T.radius+this._animationFrameTime/T.animationDuration*(T.rippleRadius-T.radius),this._animation.setDuration(T.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:f.x,y:f.y,r:w}).setStyles({style:"fill",color:T.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(Di),jn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget().getPane(),n=i.getChart().getChartStore(),o=n.getStyles().candle.priceMark,a=o.high,s=o.low;if(o.show&&(a.show||s.show)){var l=n.getVisibleRangeHighLowPrice(),u=n.getPrecision(),c=i.getAxisComponent(),h=l[0],p=h.price,d=h.x,v=l[1],g=v.price,f=v.x,x=c.convertToPixel(p),m=c.convertToPixel(g),y=n.getDecimalFold(),T=n.getThousandsSeparator();a.show&&p!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,y.format(T.format(et(p,u.price))),{x:d,y:x},x<m?[-2,-5]:[2,5],a),s.show&&g!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,y.format(T.format(et(g,u.price))),{x:f,y:m},x<m?[2,5]:[-2,-5],s)}},e.prototype._drawMark=function(t,i,n,o,a){var s,l,u,c=n.x,h=n.y+o[0];(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+o[0]},{x:c,y:h},{x:c+2,y:h+o[0]}]},styles:{color:a.color}}))===null||s===void 0||s.draw(t);var p=0,d=0,v="left";c>this.getWidget().getBounding().width/2?(d=(p=c-5)-a.textOffset,v="right"):(v="left",d=(p=c+5)+a.textOffset);var g=h+o[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:g},{x:p,y:g}]},styles:{color:a.color}}))===null||l===void 0||l.draw(t),(u=this.createFigure({name:"text",attrs:{x:d,y:g,text:i,align:v,baseline:"middle"},styles:{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}}))===null||u===void 0||u.draw(t)},e}(gt),Qn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n,o,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getChart().getChartStore(),c=u.getStyles().candle.priceMark,h=c.last,p=h.line;if(c.show&&h.show&&p.show){var d=s.getAxisComponent(),v=u.getDataList(),g=v[v.length-1];if(E(g)){var f=g.close,x=g.open,m=h.compareRule===Mt.CurrentOpen?x:(n=(i=v[v.length-2])===null||i===void 0?void 0:i.close)!==null&&n!==void 0?n:f,y=d.convertToNicePixel(f),T="";T=f>m?h.upColor:f<m?h.downColor:h.noChangeColor,(o=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y},{x:l.width,y}]},styles:{style:p.style,color:T,size:p.size,dashedValue:p.dashedValue}}))===null||o===void 0||o.draw(t)}}},e}(gt);(function(r){r.Left="left",r.Right="right"})(St||(St={}));var Li=function(){function r(e){this.scrollZoomEnabled=!0,this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return r.prototype.getParent=function(){return this._parent},r.prototype.buildTicks=function(e){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),!(this._prevRange.from===this._range.from&&this._prevRange.to===this._range.to&&!e)&&(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0)},r.prototype.getTicks=function(){return this._ticks},r.prototype.setRange=function(e){this._autoCalcTickFlag=!1,this._range=e},r.prototype.getRange=function(){return this._range},r.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},r.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},r}(),he={"zh-CN":{time:"\u65F6\u95F4\uFF1A",open:"\u5F00\uFF1A",high:"\u9AD8\uFF1A",low:"\u4F4E\uFF1A",close:"\u6536\uFF1A",volume:"\u6210\u4EA4\u91CF\uFF1A",turnover:"\u6210\u4EA4\u989D\uFF1A",change:"\u6DA8\u5E45\uFF1A"},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "}},Kn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore(),o=n.getCrosshair();if(E(o.kLineData)){var a=i.getBounding(),s=n.getStyles(),l=s.candle,u=s.indicator;if(l.tooltip.showType===b.TooltipShowType.Rect&&u.tooltip.showType===b.TooltipShowType.Rect){var c=this.isDrawTooltip(o,l.tooltip),h=this.isDrawTooltip(o,u.tooltip);this._drawRectTooltip(t,c,h,l.tooltip.offsetTop)}else if(l.tooltip.showType===b.TooltipShowType.Standard&&u.tooltip.showType===b.TooltipShowType.Standard){var p=l.tooltip,d=p.offsetLeft,v=p.offsetTop,g=p.offsetRight,f=a.width-g,x=this._drawCandleStandardTooltip(t,d,v,f);this.drawIndicatorTooltip(t,d,x,f)}else if(l.tooltip.showType===b.TooltipShowType.Rect&&u.tooltip.showType===b.TooltipShowType.Standard){var m=l.tooltip,y=(d=m.offsetLeft,v=m.offsetTop,g=m.offsetRight,f=a.width-g,this.drawIndicatorTooltip(t,d,v,f));c=this.isDrawTooltip(o,l.tooltip),this._drawRectTooltip(t,c,!1,y)}else{var T=l.tooltip,w=(d=T.offsetLeft,v=T.offsetTop,g=T.offsetRight,f=a.width-g,this._drawCandleStandardTooltip(t,d,v,f));h=this.isDrawTooltip(o,u.tooltip),this._drawRectTooltip(t,!1,h,w)}}},e.prototype._drawCandleStandardTooltip=function(t,i,n,o){var a=this.getWidget().getPane().getChart().getChartStore(),s=a.getStyles().candle.tooltip,l=s.text,u=0,c={x:i,y:n},h=a.getCrosshair();if(this.isDrawTooltip(h,s)){var p=this._getCandleTooltipLegends(),d=ft(this.classifyTooltipFeatures(s.features),3),v=d[0],g=d[1],f=d[2];u=this.drawStandardTooltipFeatures(t,v,c,null,i,u,o),u=this.drawStandardTooltipFeatures(t,g,c,null,i,u,o),p.length>0&&(u=this.drawStandardTooltipLegends(t,p,c,i,u,o,l)),u=this.drawStandardTooltipFeatures(t,f,c,null,i,u,o)}return c.y+u},e.prototype._drawRectTooltip=function(t,i,n,o){var a,s,l=this,u=this.getWidget(),c=u.getPane(),h=c.getChart().getChartStore(),p=h.getStyles(),d=p.candle,v=p.indicator,g=d.tooltip,f=v.tooltip;if(i||n){var x=this._getCandleTooltipLegends(),m=g.offsetLeft,y=g.offsetTop,T=g.offsetRight,w=g.offsetBottom,C=g.text,_=C.marginLeft,S=C.marginRight,P=C.marginTop,M=C.marginBottom,R=C.size,O=C.weight,k=C.family,D=g.rect,I=D.position,A=D.paddingLeft,B=D.paddingRight,N=D.paddingTop,U=D.paddingBottom,z=D.offsetLeft,G=D.offsetRight,H=D.offsetTop,lt=D.offsetBottom,X=D.borderSize,ut=D.borderRadius,rt=D.borderColor,q=D.color,J=0,nt=0,Q=0;i&&(t.font=Lt(R,O,k),x.forEach(function(Pt){var vt=Pt.title,dt=Pt.value,Tt="".concat(vt.text).concat(dt.text),It=t.measureText(Tt).width+_+S;J=Math.max(J,It)}),Q+=(M+P+R)*x.length);var $=f.text,ct=$.marginLeft,ee=$.marginRight,ie=$.marginTop,ne=$.marginBottom,_t=$.size,At=$.weight,re=$.family,pe=[];if(n){var ge=h.getIndicatorsByPaneId(c.getId());t.font=Lt(_t,At,re),ge.forEach(function(Pt){var vt=l.getIndicatorTooltipData(Pt).legends;pe.push(vt),vt.forEach(function(dt){var Tt=dt.title,It=dt.value,ye="".concat(Tt.text).concat(It.text),wr=t.measureText(ye).width+ct+ee;J=Math.max(J,wr),Q+=ie+ne+_t})})}if((nt+=J)!==0&&Q!==0){var xt=h.getCrosshair(),ve=u.getBounding(),Zi=c.getYAxisWidget().getBounding();nt+=2*X+A+B,Q+=2*X+N+U;var br=ve.width/2,ji=I===b.CandleTooltipRectPosition.Pointer&&xt.paneId===it,Qi=((a=xt.realX)!==null&&a!==void 0?a:0)>br,bt=0;if(ji){var Ki=xt.realX;bt=Qi?Ki-G-nt:Ki+z}else{var fe=this.getWidget().getPane().getAxisComponent();Qi?(bt=z+m,fe.inside&&fe.position===St.Left&&(bt+=Zi.width)):(bt=ve.width-G-nt-T,fe.inside&&fe.position===St.Right&&(bt-=Zi.width))}var Xt=o+H;ji&&((Xt=xt.y-Q/2)+Q>ve.height-lt-w&&(Xt=ve.height-lt-Q-w),Xt<o+H&&(Xt=o+H+y)),(s=this.createFigure({name:"rect",attrs:{x:bt,y:Xt,width:nt,height:Q},styles:{style:b.PolygonType.StrokeFill,color:q,borderColor:rt,borderSize:X,borderRadius:ut}}))===null||s===void 0||s.draw(t);var Tr=bt+X+A+_,Ft=Xt+X+N;if(i&&x.forEach(function(Pt){var vt,dt;Ft+=P;var Tt=Pt.title;(vt=l.createFigure({name:"text",attrs:{x:Tr,y:Ft,text:Tt.text},styles:{color:Tt.color,size:R,family:k,weight:O}}))===null||vt===void 0||vt.draw(t);var It=Pt.value;(dt=l.createFigure({name:"text",attrs:{x:bt+nt-X-S-B,y:Ft,text:It.text,align:"right"},styles:{color:It.color,size:R,family:k,weight:O}}))===null||dt===void 0||dt.draw(t),Ft+=R+M}),n){var Cr=bt+X+A+ct;pe.forEach(function(Pt){Pt.forEach(function(vt){var dt,Tt;Ft+=ie;var It=vt.title,ye=vt.value;(dt=l.createFigure({name:"text",attrs:{x:Cr,y:Ft,text:It.text},styles:{color:It.color,size:_t,family:re,weight:At}}))===null||dt===void 0||dt.draw(t),(Tt=l.createFigure({name:"text",attrs:{x:bt+nt-X-ee-B,y:Ft,text:ye.text,align:"right"},styles:{color:ye.color,size:_t,family:re,weight:At}}))===null||Tt===void 0||Tt.draw(t),Ft+=_t+ne})})}}}},e.prototype._getCandleTooltipLegends=function(){var t,i,n,o,a,s,l=this.getWidget().getPane().getChart().getChartStore(),u=l.getStyles().candle,c=l.getDataList(),h=l.getCustomApi(),p=l.getDecimalFold(),d=l.getThousandsSeparator(),v=l.getLocale(),g=l.getPrecision(),f=g.price,x=g.volume,m=(t=l.getCrosshair().dataIndex)!==null&&t!==void 0?t:0,y=u.tooltip,T=y.text.color,w=(i=c[m-1])!==null&&i!==void 0?i:null,C=c[m],_=(n=w?.close)!==null&&n!==void 0?n:C.close,S=C.close-_,P={"{time}":h.formatDate(C.timestamp,"YYYY-MM-DD HH:mm",b.FormatDateType.Tooltip),"{open}":p.format(d.format(et(C.open,f))),"{high}":p.format(d.format(et(C.high,f))),"{low}":p.format(d.format(et(C.low,f))),"{close}":p.format(d.format(et(C.close,f))),"{volume}":p.format(d.format(h.formatBigNumber(et((o=C.volume)!==null&&o!==void 0?o:y.defaultValue,x)))),"{turnover}":p.format(d.format(et((a=C.turnover)!==null&&a!==void 0?a:y.defaultValue,f))),"{change}":_===0?y.defaultValue:"".concat(d.format(et(S/_*100)),"%")};return(tt(y.custom)?y.custom({prev:w,current:C,next:(s=c[m+1])!==null&&s!==void 0?s:null},u):y.custom).map(function(M){var R,O=M.title,k=M.value,D={text:"",color:T};pt(O)?D=F({},O):D.text=O,D.text=function(N,U){var z;return(z=he[U][N])!==null&&z!==void 0?z:N}(D.text,v);var I={text:y.defaultValue,color:T};pt(k)?I=F({},k):I.text=k;var A=/{(\S*)}/.exec(I.text);if(A!==null&&A.length>1){var B="{".concat(A[1],"}");I.text=I.text.replace(B,(R=P[B])!==null&&R!==void 0?R:y.defaultValue),B==="{change}"&&(I.color=S===0?u.priceMark.last.noChangeColor:S>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:D,value:I}})},e}(Fi),$n=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._candleBarView=new Ai(n),n._candleAreaView=new Zn(n),n._candleHighLowPriceView=new jn(n),n._candleLastPriceLineView=new Qn(n),n.addChild(n._candleBarView),n}return V(e,r),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!==b.CandleType.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Kn(this)},e}(Bi),Oi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t,i){var n,o,a=this,s=this.getWidget(),l=s.getPane(),u=s.getBounding(),c=l.getAxisComponent(),h=this.getAxisStyles(l.getChart().getStyles());if(h.show&&(h.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(u,h),styles:h.axisLine}))===null||n===void 0||n.draw(t)),!i[0])){var p=c.getTicks();if(h.tickLine.show&&this.createTickLines(p,u,h).forEach(function(v){var g;(g=a.createFigure({name:"line",attrs:v,styles:h.tickLine}))===null||g===void 0||g.draw(t)}),h.tickText.show){var d=this.createTickTexts(p,u,h);(o=this.createFigure({name:"text",attrs:d,styles:h.tickText}))===null||o===void 0||o.draw(t)}}},e}(gt),Jn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,i){var n=this.getWidget().getPane().getAxisComponent(),o=i.axisLine.size,a=0;return{coordinates:[{x:a=n.isFromZero()?0:t.width-o,y:0},{x:a,y:t.height}]}},e.prototype.createTickLines=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=0,u=0;return o.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=i.width,a.show&&(l-=a.size),u=l-s.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=n.tickText,u=0;o.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=i.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},e}(Oi),tr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n,o,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getChart().getChartStore(),c=u.getStyles().candle.priceMark,h=c.last,p=h.text;if(c.show&&h.show&&p.show){var d=u.getPrecision(),v=s.getAxisComponent(),g=u.getDataList(),f=g[g.length-1];if(E(f)){var x=f.close,m=f.open,y=h.compareRule===Mt.CurrentOpen?m:(n=(i=g[g.length-2])===null||i===void 0?void 0:i.close)!==null&&n!==void 0?n:x,T=v.convertToNicePixel(x),w="";w=x>y?h.upColor:x<y?h.downColor:h.noChangeColor;var C=v.getRange(),_=v.displayValueToText(v.realValueToDisplayValue(v.valueToRealValue(x,{range:C}),{range:C}),d.price);_=u.getDecimalFold().format(u.getThousandsSeparator().format(_));var S=0,P="left";v.isFromZero()?(S=0,P="left"):(S=l.width,P="right"),(o=this.createFigure({name:"text",attrs:{x:S,y:T,text:_,align:P,baseline:"middle"},styles:F(F({},p),{backgroundColor:w})}))===null||o===void 0||o.draw(t)}}},e}(gt),er=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().indicator,u=l.lastValueMark,c=u.text;if(u.show){var h=o.getAxisComponent(),p=h.getRange(),d=s.getDataList().length-1,v=s.getIndicatorsByPaneId(o.getId()),g=s.getCustomApi(),f=s.getDecimalFold(),x=s.getThousandsSeparator();v.forEach(function(m){var y,T,w=m.result,C=(T=(y=w[d])!==null&&y!==void 0?y:w[d-1])!==null&&T!==void 0?T:{};if(E(C)&&m.visible){var _=m.precision;we(m,d,l,function(S,P){var M,R=C[S.key];if(L(R)){var O=h.convertToNicePixel(R),k=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(R,{range:p}),{range:p}),_);m.shouldFormatBigNumber&&(k=g.formatBigNumber(k)),k=f.format(x.format(k));var D=0,I="left";h.isFromZero()?(D=0,I="left"):(D=a.width,I="right"),(M=i.createFigure({name:"text",attrs:{x:D,y:O,text:k,align:I,baseline:"middle"},styles:F(F({},c),{backgroundColor:P.color})}))===null||M===void 0||M.draw(t)}})}})}},e}(gt),Wi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,i,n){this.drawFigures(t,i,this.getDefaultFigures(i,n))},e.prototype.getDefaultFigures=function(t,i){var n,o=this.getWidget(),a=o.getPane(),s=a.getChart().getChartStore(),l=s.getClickOverlayInfo(),u=[];if(t.needDefaultYAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)&&l.paneId===a.getId()){var c=a.getAxisComponent(),h=o.getBounding(),p=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,v=c.isFromZero(),g="left",f=0;v?(g="left",f=0):(g="right",f=h.width);var x=s.getDecimalFold(),m=s.getThousandsSeparator();i.forEach(function(y,T){var w=t.points[T];if(L(w.value)){p=Math.min(p,y.y),d=Math.max(d,y.y);var C=x.format(m.format(et(w.value,s.getPrecision().price)));u.push({type:"text",attrs:{x:f,y:y.y,text:C,align:g,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&u.unshift({type:"rect",attrs:{x:0,y:p,width:h.width,height:d-p},ignoreEvent:!0})}return u},e.prototype.getFigures=function(t,i){var n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(n=t.createYAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(Ri),Vi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=n.getPane().getChart().getChartStore(),l=s.getCrosshair(),u=s.getStyles().crosshair;if(Y(l.paneId)&&this.compare(l,o.getId())&&u.show){var c=this.getDirectionStyles(u),h=c.text;if(c.show&&h.show){var p=o.getAxisComponent(),d=this.getText(l,s,p);t.font=Lt(h.size,h.weight,h.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(d,t.measureText(d).width,l,a,p,h),styles:h}))===null||i===void 0||i.draw(t)}}},e.prototype.compare=function(t,i){return t.paneId===i},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,i,n){var o=n,a=n.convertFromPixel(t.y),s=0,l=!1;o.isInCandle()?s=i.getPrecision().price:i.getIndicatorsByPaneId(t.paneId).forEach(function(h){s=Math.max(h.precision,s),l||(l=h.shouldFormatBigNumber)});var u=o.getRange(),c=o.displayValueToText(o.realValueToDisplayValue(o.valueToRealValue(a,{range:u}),{range:u}),s);return l&&(c=i.getCustomApi().formatBigNumber(c)),i.getDecimalFold().format(i.getThousandsSeparator().format(c))},e.prototype.getTextAttrs=function(t,i,n,o,a,s){var l=0,u="left";return a.isFromZero()?(l=0,u="left"):(l=o.width,u="right"),{x:l,y:n.y,text:t,align:u,baseline:"middle"}},e}(gt),ir=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._yAxisView=new Jn(n),n._candleLastPriceLabelView=new tr(n),n._indicatorLastValueView=new er(n),n._overlayYAxisView=new Wi(n),n._crosshairHorizontalLabelView=new Vi(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return V(e,r),e.prototype.getName=function(){return mt},e.prototype.updateMain=function(t){var i=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(t,i),i||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t))},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t))},e}(Fe),te=function(r){function e(t,i){var n=r.call(this,t)||this;return n.reverse=!1,n.inside=!1,n.position=St.Right,n.gap={top:.2,bottom:.1},n.createRange=function(o){return o.defaultRange},n.minSpan=function(o){return Ot(-o)},n.valueToRealValue=function(o){return o},n.realValueToDisplayValue=function(o){return o},n.displayValueToRealValue=function(o){return o},n.realValueToValue=function(o){return o},n.displayValueToText=function(o,a){return et(o,a)},n.override(i),n}return V(e,r),e.prototype.override=function(t){var i=t.name,n=t.gap,o=Gt(t,["name","gap"]);Y(this.name)||(this.name=i),Z(this.gap,n),Z(this,o)},e.prototype.createRangeImp=function(){var t=this.getParent(),i=t.getChart(),n=i.getChartStore(),o=t.getId(),a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=!1,u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,p=n.getIndicatorsByPaneId(o);p.forEach(function(H){l||(l=H.shouldOhlc),h=Math.min(h,H.precision),L(H.minValue)&&(u=Math.min(u,H.minValue)),L(H.maxValue)&&(c=Math.max(c,H.maxValue))});var d=4,v=this.isInCandle();if(v){var g=n.getPrecision().price;d=h!==Number.MAX_SAFE_INTEGER?Math.min(h,g):g}else h!==Number.MAX_SAFE_INTEGER&&(d=h);var f=n.getVisibleRangeDataList(),x=i.getStyles().candle,m=x.type===b.CandleType.Area,y=x.area.value,T=v&&!m||!v&&l;f.forEach(function(H){var lt=H.dataIndex,X=H.data.current;if(E(X)&&(T&&(a=Math.min(a,X.low),s=Math.max(s,X.high)),v&&m)){var ut=X[y];L(ut)&&(a=Math.min(a,ut),s=Math.max(s,ut))}p.forEach(function(rt){var q,J=rt.result,nt=rt.figures,Q=(q=J[lt])!==null&&q!==void 0?q:{};nt.forEach(function($){var ct=Q[$.key];L(ct)&&(a=Math.min(a,ct),s=Math.max(s,ct))})})}),a!==Number.MAX_SAFE_INTEGER&&s!==Number.MIN_SAFE_INTEGER?(a=Math.min(u,a),s=Math.max(c,s)):(a=0,s=10);var w=s-a,C={from:a,to:s,range:w,realFrom:a,realTo:s,realRange:w,displayFrom:a,displayTo:s,displayRange:w},_=this.createRange({chart:i,paneId:o,defaultRange:C}),S=_.realFrom,P=_.realTo,M=_.realRange,R=this.minSpan(d);if(S===P||M<R){var O=u===S,k=c===P;S=O?S:k?S-8*R:S-4*R,P=k?P:O?P+8*R:P+4*R}var D=this.getBounding().height,I=this.gap,A=I.top;A>=1&&(A/=D);var B=I.bottom;B>=1&&(B/=D),S-=(M=P-S)*B,P+=M*A;var N=this.realValueToValue(S,{range:_}),U=this.realValueToValue(P,{range:_}),z=this.realValueToDisplayValue(S,{range:_}),G=this.realValueToDisplayValue(P,{range:_});return{from:N,to:U,range:U-N,realFrom:S,realTo:P,realRange:P-S,displayFrom:z,displayTo:G,displayRange:G-z}},e.prototype.isInCandle=function(){return this.getParent().getId()===it},e.prototype.isFromZero=function(){return this.position===St.Left&&this.inside||this.position===St.Right&&!this.inside},e.prototype.createTicksImp=function(){var t,i,n=this,o=this.getRange(),a=o.displayFrom,s=o.displayTo,l=o.displayRange,u=[];if(l>=0){var c=function(D){var I=Math.floor(wt(D)),A=Ot(I),B=D/A;return+(D=(B<1.5?1:B<2.5?2:B<3.5?3:B<4.5?4:B<5.5?5:B<6.5?6:8)*A).toFixed(Math.abs(I))}(l/8),h=function(D){var I=D.toString(),A=I.indexOf("e");if(A>0){var B=+I.slice(A+1);return B<0?-B:0}var N=I.indexOf(".");return N<0?0:I.length-1-N}(c),p=ni(Math.ceil(a/c)*c,h),d=ni(Math.floor(s/c)*c,h),v=0,g=p;if(c!==0)for(;g<=d;){var f=g.toFixed(h);u[v]={text:f,coord:0,value:f},++v,g+=c}}var x=this.getParent(),m=(i=(t=x.getYAxisWidget())===null||t===void 0?void 0:t.getBounding().height)!==null&&i!==void 0?i:0,y=x.getChart().getChartStore(),T=[],w=y.getIndicatorsByPaneId(x.getId()),C=y.getStyles(),_=0,S=!1;this.isInCandle()?_=y.getPrecision().price:w.forEach(function(D){_=Math.max(_,D.precision),S||(S=D.shouldFormatBigNumber)});var P=y.getCustomApi(),M=y.getThousandsSeparator(),R=y.getDecimalFold(),O=C.xAxis.tickText.size,k=NaN;return u.forEach(function(D){var I=D.value,A=n.displayValueToText(+I,_),B=n.convertToPixel(n.realValueToValue(n.displayValueToRealValue(+I,{range:o}),{range:o}));S&&(A=P.formatBigNumber(I)),A=R.format(M.format(A));var N=L(k);B>O&&B<m-O&&(N&&Math.abs(k-B)>2*O||!N)&&(T.push({text:A,coord:B,value:I}),k=B)}),tt(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:T}):T},e.prototype.getAutoSize=function(){var t=this.getParent(),i=t.getChart().getChartStore(),n=i.getStyles(),o=n.yAxis,a=o.size;if(a!=="auto")return a;var s=0;if(o.show&&(o.axisLine.show&&(s+=o.axisLine.size),o.tickLine.show&&(s+=o.tickLine.length),o.tickText.show)){var l=0;this.getTicks().forEach(function(m){l=Math.max(l,Zt(m.text,o.tickText.size,o.tickText.weight,o.tickText.family))}),s+=o.tickText.marginStart+o.tickText.marginEnd+l}var u=n.crosshair,c=0;if(u.show&&u.horizontal.show&&u.horizontal.text.show){var h=i.getIndicatorsByPaneId(t.getId()),p=0,d=!1;h.forEach(function(m){p=Math.max(m.precision,p),d||(d=m.shouldFormatBigNumber)});var v=2;if(this.isInCandle()){var g=i.getPrecision().price,f=n.indicator.lastValueMark;v=f.show&&f.text.show?Math.max(p,g):g}else v=p;var x=et(this.getRange().displayTo,v);d&&(x=i.getCustomApi().formatBigNumber(x)),x=i.getDecimalFold().format(x),c+=u.horizontal.text.paddingLeft+u.horizontal.text.paddingRight+2*u.horizontal.text.borderSize+Zt(x,u.horizontal.text.size,u.horizontal.text.weight,u.horizontal.text.family)}return Math.max(s,c)},e.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var i=this.getBounding().height,n=this.getRange(),o=n.realFrom,a=n.realRange,s=(this.reverse?t/i:1-t/i)*a+o;return this.realValueToValue(s,{range:n})},e.prototype.convertToPixel=function(t){var i,n,o=this.getRange(),a=this.valueToRealValue(t,{range:o}),s=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,l=(a-o.realFrom)/o.realRange;return this.reverse?Math.round(l*s):Math.round((1-l)*s)},e.prototype.convertToNicePixel=function(t){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.convertToPixel(t);return Math.round(Math.max(.05*o,Math.min(a,.98*o)))},e.extend=function(t){var i=function(n){function o(a){return n.call(this,a,t)||this}return V(o,n),o}(e);return i},e}(Li),nr={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(r){return"".concat(et(r,2),"%")},valueToRealValue:function(r,e){var t=e.range;return(r-t.from)/t.range*t.realRange+t.realFrom},realValueToValue:function(r,e){var t=e.range;return(r-t.realFrom)/t.realRange*t.range+t.from},createRange:function(r){var e=r.chart,t=r.defaultRange,i=e.getDataList()[e.getVisibleRange().from];if(E(i)){var n=t.from,o=t.to,a=t.range,s=(t.from-i.close)/i.close*100,l=(t.to-i.close)/i.close*100,u=l-s;return{from:n,to:o,range:a,realFrom:s,realTo:l,realRange:u,displayFrom:s,displayTo:l,displayRange:u}}return t}},rr={name:"logarithm",minSpan:function(r){return .05*Ot(-r)},valueToRealValue:function(r){return r<0?-wt(Math.abs(r)):wt(r)},realValueToDisplayValue:function(r){return r<0?-Ot(Math.abs(r)):Ot(r)},displayValueToRealValue:function(r){return r<0?-wt(Math.abs(r)):wt(r)},realValueToValue:function(r){return r<0?-Ot(Math.abs(r)):Ot(r)},createRange:function(r){var e=r.defaultRange,t=e.from,i=e.to,n=e.range,o=t<0?-wt(Math.abs(t)):wt(t),a=i<0?-wt(Math.abs(i)):wt(i);return{from:t,to:i,range:n,realFrom:o,realTo:a,realRange:a-o,displayFrom:t,displayTo:i,displayRange:n}}},Be={normal:te.extend({name:"normal"}),percentage:te.extend(nr),logarithm:te.extend(rr)},Ni=function(){function r(e,t){this._bounding=ae(),this._originalBounding=ae(),this._visible=!0,this._chart=e,this._id=t,this._container=Ct("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return r.prototype.getContainer=function(){return this._container},r.prototype.setVisible=function(e){this._visible!==e&&(this._container.style.display=e?"block":"none",this._visible=e)},r.prototype.getVisible=function(){return this._visible},r.prototype.getId=function(){return this._id},r.prototype.getChart=function(){return this._chart},r.prototype.getBounding=function(){return this._bounding},r.prototype.setOriginalBounding=function(e){Z(this._originalBounding,e)},r.prototype.getOriginalBounding=function(){return this._originalBounding},r.prototype.update=function(e){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(e??3,this._container,this._bounding)},r}(),zi=function(r){function e(t,i,n){var o=r.call(this,t,i)||this;o._yAxisWidget=null,o._options={id:"",minHeight:30,dragEnabled:!0,order:0,height:100,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var a=o.getContainer();return o._mainWidget=o.createMainWidget(a),o._yAxisWidget=o.createYAxisWidget(a),o.setOptions(n),o}return V(e,r),e.prototype.setOptions=function(t){var i,n,o,a,s,l=this.getId();if(l===it||l===j){var u=(i=t.axis)===null||i===void 0?void 0:i.name;(!E(this._axis)||E(u)&&this._options.axis.name!==u)&&(this._axis=this.createAxisComponent(u??"normal"))}else E(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof te&&this._axis.setAutoCalcTickFlag(!0),Z(this._options,t),this._axis.override(F(F({},this._options.axis),{name:(o=(n=t.axis)===null||n===void 0?void 0:n.name)!==null&&o!==void 0?o:"normal"}));var c=null,h="default";return this.getId()===j?(c=this.getMainWidget().getContainer(),h="ew-resize"):(c=this.getYAxisWidget().getContainer(),h="ns-resize"),(s=(a=t.axis)===null||a===void 0?void 0:a.scrollZoomEnabled)===null||s===void 0||s?c.style.cursor=h:c.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,i,n,o){var a,s,l,u;Z(this.getBounding(),t);var c={};E(t.height)&&(c.height=t.height),E(t.top)&&(c.top=t.top),this._mainWidget.setBounding(c);var h=E(i);return h&&this._mainWidget.setBounding(i),E(this._yAxisWidget)&&(this._yAxisWidget.setBounding(c),this._axis.position===St.Left?E(n)&&this._yAxisWidget.setBounding(F(F({},n),{left:0})):E(o)&&(this._yAxisWidget.setBounding(o),h&&this._yAxisWidget.setBounding({left:((a=i.left)!==null&&a!==void 0?a:0)+((s=i.width)!==null&&s!==void 0?s:0)+((l=i.right)!==null&&l!==void 0?l:0)-((u=o.width)!==null&&u!==void 0?u:0)}))),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var i;this._mainWidget.update(t),(i=this._yAxisWidget)===null||i===void 0||i.update(t)},e.prototype.destroy=function(){var t;this._mainWidget.destroy(),(t=this._yAxisWidget)===null||t===void 0||t.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=Ct("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Dt(a);a.width=n*l,a.height=o*l,s.scale(l,l);var u=this._mainWidget.getBounding();if(s.drawImage(this._mainWidget.getImage(t),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();s.drawImage(this._yAxisWidget.getImage(t),c.left,0,c.width,c.height)}return a},e.prototype.createYAxisWidget=function(t){return null},e}(Ni),Yi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.createAxisComponent=function(t){var i=function(n){var o;return(o=Be[n])!==null&&o!==void 0?o:Be.normal}(t??"default");return new i(this)},e.prototype.createMainWidget=function(t){return new Bi(t,this)},e.prototype.createYAxisWidget=function(t){return new ir(t,this)},e}(zi),or=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.createMainWidget=function(t){return new $n(t,this)},e}(Yi),ar=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,i,n){var o=n.tickLine,a=n.axisLine.size;return t.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+o.length}]}})},e.prototype.createTickTexts=function(t,i,n){var o=n.tickText,a=n.axisLine.size,s=n.tickLine.length;return t.map(function(l){return{x:l.coord,y:a+s+o.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(Oi),sr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},e.prototype.getProgressOverlay=function(){var t,i;return(i=(t=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||t===void 0?void 0:t.overlay)!==null&&i!==void 0?i:null},e.prototype.getDefaultFigures=function(t,i){var n,o=[],a=this.getWidget(),s=a.getPane().getChart().getChartStore(),l=s.getClickOverlayInfo();if(t.needDefaultXAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;i.forEach(function(h,p){u=Math.min(u,h.x),c=Math.max(c,h.x);var d=t.points[p];if(L(d.timestamp)){var v=s.getCustomApi().formatDate(d.timestamp,"YYYY-MM-DD HH:mm",b.FormatDateType.Crosshair);o.push({type:"text",attrs:{x:h.x,y:0,text:v,align:"center"},ignoreEvent:!0})}}),i.length>1&&o.unshift({type:"rect",attrs:{x:u,y:0,width:c-u,height:a.getBounding().height},ignoreEvent:!0})}return o},e.prototype.getFigures=function(t,i){var n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(n=t.createXAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(Wi),lr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.compare=function(t){return E(t.timestamp)},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,i){var n=t.timestamp;return i.getCustomApi().formatDate(n,"YYYY-MM-DD HH:mm",b.FormatDateType.Crosshair)},e.prototype.getTextAttrs=function(t,i,n,o,a,s){var l=n.realX,u=0,c="center";return l-i/2-s.paddingLeft<0?(u=0,c="left"):l+i/2+s.paddingRight>o.width?(u=o.width,c="right"):u=l,{x:u,y:0,text:t,align:c,baseline:"top"}},e}(Vi),ur=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._xAxisView=new ar(n),n._overlayXAxisView=new sr(n),n._crosshairVerticalLabelView=new lr(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return V(e,r),e.prototype.getName=function(){return Et},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(Fe),Hi=function(r){function e(t,i){var n=r.call(this,t)||this;return n.override(i),n}return V(e,r),e.prototype.override=function(t){var i=t.name,n=t.scrollZoomEnabled,o=t.createTicks;Y(this.name)||(this.name=i),this.scrollZoomEnabled=n??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},e.prototype.createRangeImp=function(){var t=this.getParent().getChart().getChartStore().getVisibleRange(),i=t.realFrom,n=t.realTo,o=n-i+1;return{from:i,to:n,range:o,realFrom:i,realTo:n,realRange:o,displayFrom:i,displayTo:n,displayRange:o}},e.prototype.createTicksImp=function(){var t=this,i=this.getRange(),n=i.realFrom,o=i.realTo,a=this.getParent().getChart().getChartStore(),s=a.getCustomApi().formatDate,l=a.getTimeWeightTickList(),u=[],c=function(y,T){var w,C;try{for(var _=at(y),S=_.next();!S.done;S=_.next()){var P=S.value;if(P.dataIndex>=T&&P.dataIndex<o){var M=P.timestamp,R=P.weight,O=P.dataIndex,k="";switch(R){case ai:k=s(M,"YYYY",b.FormatDateType.XAxis);break;case si:k=s(M,"YYYY-MM",b.FormatDateType.XAxis);break;case li:k=s(M,"MM-DD",b.FormatDateType.XAxis);break;case ui:case Me:k=s(M,"HH:mm",b.FormatDateType.XAxis);break;case ci:k=s(M,"HH:mm:ss",b.FormatDateType.XAxis);break;default:k=s(M,"YYYY-MM-DD HH:mm",b.FormatDateType.XAxis)}u.push({coord:t.convertToPixel(O),value:M,text:k})}}}catch(D){w={error:D}}finally{try{S&&!S.done&&(C=_.return)&&C.call(_)}finally{if(w)throw w.error}}};if(c(l,n),l.length>0){for(var h=a.getBarSpace().bar,p=a.getStyles().xAxis.tickText,d=di(h,p),v=l[l.length-1].dataIndex+d-1,g=[],f=v;f<o;f++){var x=a.dataIndexToTimestamp(f);L(x)&&g.push({timestamp:x})}if(g.length>0){var m=new Map;hi(m,g,a.getDateTimeFormat(),v),c(ke(m,h,p),v)}}return tt(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:u}):u},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),i=t.xAxis,n=i.size;if(n!=="auto")return n;var o=t.crosshair,a=0;i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show&&(a+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var s=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(s+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+2*o.vertical.text.borderSize+o.vertical.text.size),Math.max(a,s)},e.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.coordinateToDataIndex(t);return i.dataIndexToTimestamp(n)},e.prototype.convertTimestampToPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.timestampToDataIndex(t);return i.dataIndexToCoordinate(n)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(t)},e.extend=function(t){var i=function(n){function o(a){return n.call(this,a,t)||this}return V(o,n),o}(e);return i},e}(Li),Le={normal:Hi.extend({name:"normal"})},cr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.createAxisComponent=function(t){var i=function(n){var o;return(o=Le[n])!==null&&o!==void 0?o:Le.normal}(t);return new i(this)},e.prototype.createMainWidget=function(t){return new ur(t,this)},e}(zi),hr=function(r){function e(t,i){var n,o,a,s=r.call(this,t,i)||this;return s._dragFlag=!1,s._dragStartY=0,s._topPaneHeight=0,s._bottomPaneHeight=0,s._topPane=null,s._bottomPane=null,s._pressedMouseMoveEvent=(n=s._pressedTouchMouseMoveEvent,o=20,a=0,function(){var l=Date.now();l-a>o&&(n.apply(this,arguments),a=l)}),s.registerEvent("touchStartEvent",s._mouseDownEvent.bind(s)).registerEvent("touchMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("touchEndEvent",s._mouseUpEvent.bind(s)).registerEvent("mouseDownEvent",s._mouseDownEvent.bind(s)).registerEvent("mouseUpEvent",s._mouseUpEvent.bind(s)).registerEvent("pressedMouseMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("mouseEnterEvent",s._mouseEnterEvent.bind(s)).registerEvent("mouseLeaveEvent",s._mouseLeaveEvent.bind(s)),s}return V(e,r),e.prototype.getName=function(){return $t},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){var i=this;this._dragFlag=!0,this._dragStartY=t.pageY;var n=this.getPane(),o=n.getChart();this._topPane=n.getTopPane(),this._bottomPane=n.getBottomPane();var a=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var s=a.findIndex(function(h){var p;return h.getId()===((p=i._topPane)===null||p===void 0?void 0:p.getId())}),l=s-1;l>-1;l--){var u=a[l];if(u.getOptions().state!=="minimize"){this._topPane=u;break}}if(this._bottomPane.getOptions().state==="minimize")for(s=a.findIndex(function(h){var p;return h.getId()===((p=i._bottomPane)===null||p===void 0?void 0:p.getId())}),l=s+1;l<a.length;l++){var c=a[l];if(c.getOptions().state!=="minimize"){this._bottomPane=c;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var i=t.pageY-this._dragStartY,n=i<0;if(E(this._topPane)&&E(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var a=null,s=null,l=0,u=0;n?(a=this._topPane,s=this._bottomPane,l=this._topPaneHeight,u=this._bottomPaneHeight):(a=this._bottomPane,s=this._topPane,l=this._bottomPaneHeight,u=this._topPaneHeight);var c=a.getOptions().minHeight;if(l>c){var h=Math.max(l-Math.abs(i),c),p=l-h;a.setBounding({height:h}),s.setBounding({height:u+p});var d=this.getPane(),v=d.getChart();v.getChartStore().executeAction(b.ActionType.OnPaneDrag,{paneId:d.getId()}),v.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getBottomPane().getOptions().dragEnabled){var i=t.getChart().getStyles().separator;return this.getContainer().style.background=i.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="transparent",!0)},e.prototype.createContainer=function(){return Ct("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,i,n){if(n===4||n===2){var o=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-o.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(Ci),dr=function(r){function e(t,i,n,o){var a=r.call(this,t,i)||this;return a.getContainer().style.overflow="",a._topPane=n,a._bottomPane=o,a._separatorWidget=new hr(a.getContainer(),a),a}return V(e,r),e.prototype.setBounding=function(t){return Z(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=this.getChart().getStyles().separator,s=Ct("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=Dt(s);return s.width=n*u,s.height=o*u,l.scale(u,u),l.fillStyle=a.color,l.fillRect(0,0,n,o),s},e.prototype.updateImp=function(t,i,n){if(t===4||t===2){var o=this.getChart().getStyles().separator;i.style.backgroundColor=o.color,i.style.height="".concat(n.height,"px"),i.style.marginLeft="".concat(n.left,"px"),i.style.width="".concat(n.width,"px"),this._separatorWidget.update(t)}},e}(Ni);function Xi(){return typeof window<"u"&&window.navigator.userAgent.toLowerCase().includes("firefox")}function Oe(){return typeof window<"u"&&/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var We,pr=5,gr=5,Gi=5,Ui=30,Ve=0,vr=1,fr=2,yr=function(){function r(e,t,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Oe(),this._onFirefoxOutsideMouseUp=function(o){n._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){n._firesTouchEvents(o)?(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._tapCoordinate).manhattanDistance<Ui&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(o),n._handler.doubleTapEvent),n._resetTapTimeout())):(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._clickCoordinate).manhattanDistance<Gi&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(o),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()))},this._target=e,this._handler=t,this._options=i,this._init()}return r.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},r.prototype._mouseEnterHandler=function(e){var t,i,n,o=this;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){o._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){o._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){o._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},r.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},r.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(!E(this._handler.mouseWheelHortEvent)||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(!E(this._handler.mouseWheelVertEvent))return;var t=-e.deltaY/100;if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(t!==0){var i=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),i)}}},r.prototype._contextMenuHandler=function(e){this._preventDefault(e)},r.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),n=i.xOffset,o=i.yOffset,a=i.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(a<gr)){if(!this._touchMoveExceededManhattanDistance){var s=.5*n,l=o>=s&&!this._options.treatVertDragAsPageScroll(),u=s>o&&!this._options.treatHorzDragAsPageScroll();l||u||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},r.prototype._mouseMoveWithDownHandler=function(e){e.button===Ve&&(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate).manhattanDistance>=pr&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent))},r.prototype._mouseTouchMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return{xOffset:i,yOffset:n,manhattanDistance:i+n}},r.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(e,t);this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance<Ui&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||(this._processEvent(i,this._handler.tapEvent),E(this._handler.tapEvent)&&this._preventDefault(e)),this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},r.prototype._mouseUpHandler=function(e){if(e.button===Ve){var t=this._makeCompatEvent(e);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Xi()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._firesTouchEvents(e)||(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance<Gi&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent))}},r.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},r.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),500),this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(t))}},r.prototype._mouseDownHandler=function(e){if(e.button===fr)return this._preventDefault(e),void this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);if(e.button===Ve){var t=this._target.ownerDocument.documentElement;Xi()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",n),this._mousePressed=!0,this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(e)))}},r.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,i=function(n){e._handler.mouseDownOutsideEvent!=null&&(n.composed&&e._target.contains(n.composedPath()[0])||n.target!==null&&e._target.contains(n.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0}),Oe()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===vr)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},r.prototype._initPinch=function(){var e=this;(E(this._handler.pinchStartEvent)||E(this._handler.pinchEvent)||E(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",function(t){e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(t.touches.length===2&&e._startPinchMiddleCoordinate!==null&&E(e._handler.pinchEvent)){var i=e._getTouchDistance(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(F(F({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},r.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},r.prototype._startPinch=function(e){var t=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),E(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},r.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,E(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},r.prototype._mouseLeaveHandler=function(e){var t,i,n;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),this._firesTouchEvents(e)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Oe())},r.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},r.prototype._firesTouchEvents=function(e){var t;return E((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+500},r.prototype._processEvent=function(e,t){t?.call(this._handler,e)},r.prototype._makeCompatEvent=function(e,t){var i=this,n=t??e,o=this._target.getBoundingClientRect();return{x:n.clientX-o.left,y:n.clientY-o.top,pageX:n.pageX,pageY:n.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click"&&e.type!=="wheel",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},r.prototype._getTouchDistance=function(e,t){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},r.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},r.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},r.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},r.prototype._touchWithId=function(e,t){for(var i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null},r}(),mr=function(){function r(e,t){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":i._chart.getChartStore().zoom(.5);break;case"Minus":i._chart.getChartStore().zoom(-.5);break;case"ArrowLeft":(o=i._chart.getChartStore()).startScroll(),o.scroll(-3*o.getBarSpace().bar);break;case"ArrowRight":var o;(o=i._chart.getChartStore()).startScroll(),o.scroll(3*o.getBarSpace().bar)}},this._container=e,this._chart=t,this._event=new yr(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return r.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},r.prototype.pinchEvent=function(e,t){var i=this._findWidgetByEvent(e),n=i.pane,o=i.widget;if(n?.getId()!==j&&o?.getName()===ot){var a=this._makeWidgetEvent(e,o),s=5*(t-this._pinchScale);return this._pinchScale=t,this._chart.getChartStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},r.prototype.mouseWheelHortEvent=function(e,t){var i=this._chart.getChartStore();return i.startScroll(),i.scroll(t),!0},r.prototype.mouseWheelVertEvent=function(e,t){var i=this._findWidgetByEvent(e).widget,n=this._makeWidgetEvent(e,i);return i?.getName()===ot&&(this._chart.getChartStore().zoom(t,{x:n.x,y:n.y}),!0)},r.prototype.mouseDownEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(this._mouseDownWidget=n,n!==null){var o=this._makeWidgetEvent(e,n);switch(n.getName()){case $t:return n.dispatchEvent("mouseDownEvent",o);case ot:var a=i.getAxisComponent();if(!a.getAutoCalcTickFlag()){var s=a.getRange();this._prevYAxisRange=F({},s)}return this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),n.dispatchEvent("mouseDownEvent",o);case Et:return this._processXAxisScrollStartEvent(n,o);case mt:return this._processYAxisScaleStartEvent(n,o)}}return!1},r.prototype.mouseMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),a=o.pane,s=o.widget,l=this._makeWidgetEvent(e,s);if(((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())===a?.getId()&&((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())===s?.getName()||(s?.dispatchEvent("mouseEnterEvent",l),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null)switch(s.getName()){case ot:var u=s.dispatchEvent("mouseMoveEvent",l),c={x:l.x,y:l.y,paneId:a?.getId()};return u?(c=void 0,s.getContainer().style.cursor="pointer"):s.getContainer().style.cursor="crosshair",this._chart.getChartStore().setCrosshair(c),u;case $t:case Et:case mt:return u=s.dispatchEvent("mouseMoveEvent",l),this._chart.getChartStore().setCrosshair(),u}return!1},r.prototype.pressedMouseMoveEvent=function(e){var t,i;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===$t)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var n=this._findWidgetByEvent(e),o=n.pane,a=n.widget;if(a!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===o?.getId()&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===a.getName()){var s=this._makeWidgetEvent(e,a);switch(a.getName()){case ot:var l=void 0,u=a.dispatchEvent("pressedMouseMoveEvent",s);return u||(l={x:s.x,y:s.y,paneId:o?.getId()},this._processMainScrollingEvent(a,s)),this._chart.getChartStore().setCrosshair(l,{forceInvalidate:!0}),u;case Et:return this._processXAxisScrollingEvent(a,s);case mt:return this._processYAxisScalingEvent(a,s)}}return!1},r.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case ot:case $t:case Et:case mt:i=t.dispatchEvent("mouseUpEvent",n)}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},r.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var i=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",i)}return!1},r.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case ot:case Et:case mt:i=t.dispatchEvent("mouseRightClickEvent",n)}i&&this._chart.updatePane(1)}return!1},r.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null)switch(n.getName()){case ot:var o=this._makeWidgetEvent(e,n);return n.dispatchEvent("mouseDoubleClickEvent",o);case mt:var a=i.getAxisComponent();if(!a.getAutoCalcTickFlag())return a.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0}return!1},r.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},r.prototype.touchStartEvent=function(e){var t,i=this._findWidgetByEvent(e),n=i.pane,o=i.widget;if(o!==null){var a=this._makeWidgetEvent(e,o);switch((t=a.preventDefault)===null||t===void 0||t.call(a),o.getName()){case ot:var s=this._chart.getChartStore();if(o.dispatchEvent("mouseDownEvent",a))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,s.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(ti(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var l=n.getAxisComponent();if(!l.getAutoCalcTickFlag()){var u=l.getRange();this._prevYAxisRange=F({},u)}if(this._startScrollCoordinate={x:a.x,y:a.y},s.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var c=a.x-this._touchCoordinate.x,h=a.y-this._touchCoordinate.y;Math.sqrt(c*c+h*h)<10?(this._touchCoordinate={x:a.x,y:a.y},s.setCrosshair({x:a.x,y:a.y,paneId:n?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,s.setCrosshair())}return!0;case Et:return this._processXAxisScrollStartEvent(o,a);case mt:return this._processYAxisScaleStartEvent(o,a)}}return!1},r.prototype.touchMoveEvent=function(e){var t,i=this._findWidgetByEvent(e),n=i.pane,o=i.widget;if(o!==null){var a=this._makeWidgetEvent(e,o);(t=a.preventDefault)===null||t===void 0||t.call(a);var s=o.getName(),l=this._chart.getChartStore();switch(s){case ot:return o.dispatchEvent("pressedMouseMoveEvent",a)?(l.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?l.setCrosshair({x:a.x,y:a.y,paneId:n?.getId()}):this._processMainScrollingEvent(o,a),!0);case Et:return this._processXAxisScrollingEvent(o,a);case mt:return this._processYAxisScalingEvent(o,a)}}return!1},r.prototype.touchEndEvent=function(e){var t=this,i=this._findWidgetByEvent(e).widget;if(i!==null){var n=this._makeWidgetEvent(e,i);switch(i.getName()){case ot:if(i.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var o=new Date().getTime()-this._flingStartTime,a=(n.x-this._startScrollCoordinate.x)/(o>0?o:1)*20;if(o<200&&Math.abs(a)>0){var s=this._chart.getChartStore(),l=function(){t._flingScrollRequestId=se(function(){s.startScroll(),s.scroll(a),a*=.975,Math.abs(a)<1?t._flingScrollRequestId!==null&&(ti(t._flingScrollRequestId),t._flingScrollRequestId=null):l()})};l()}}return!0;case Et:case mt:i.dispatchEvent("mouseUpEvent",n)&&this._chart.updatePane(1)}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},r.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget,o=!1;if(n!==null){var a=this._makeWidgetEvent(e,n),s=n.dispatchEvent("mouseClickEvent",a);if(n.getName()===ot){var l=this._makeWidgetEvent(e,n),u=this._chart.getChartStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,{notInvalidate:!0}),o=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:l.x,y:l.y},u.setCrosshair({x:l.x,y:l.y,paneId:i?.getId()},{notInvalidate:!0}),o=!0),this._touchCancelCrosshair=!1)}(o||s)&&this._chart.updatePane(1)}return o},r.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},r.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null&&n.getName()===ot){var o=this._makeWidgetEvent(e,n);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:i?.getId()}),!0}return!1},r.prototype._processMainScrollingEvent=function(e,t){if(this._startScrollCoordinate!==null){var i=e.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!i.getAutoCalcTickFlag()&&i.scrollZoomEnabled){var n=this._prevYAxisRange,o=n.from,a=n.to,s=n.range*((i.reverse?this._startScrollCoordinate.y-t.y:t.y-this._startScrollCoordinate.y)/e.getBounding().height),l=o+s,u=a+s,c=i.valueToRealValue(l,{range:this._prevYAxisRange}),h=i.valueToRealValue(u,{range:this._prevYAxisRange}),p=i.realValueToDisplayValue(c,{range:this._prevYAxisRange}),d=i.realValueToDisplayValue(h,{range:this._prevYAxisRange});i.setRange({from:l,to:u,range:u-l,realFrom:c,realTo:h,realRange:h-c,displayFrom:p,displayTo:d,displayRange:d-p})}var v=t.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(v)}},r.prototype._processXAxisScrollStartEvent=function(e,t){var i=e.dispatchEvent("mouseDownEvent",t);return i&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:t.x,y:t.y},this._xAxisStartScaleDistance=t.pageX,i},r.prototype._processXAxisScrollingEvent=function(e,t){var i,n=e.dispatchEvent("pressedMouseMoveEvent",t);if(n)this._chart.updatePane(1);else if(e.getPane().getAxisComponent().scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var o=this._xAxisStartScaleDistance/t.pageX;if(Number.isFinite(o)){var a=10*(o-this._xAxisScale);this._xAxisScale=o,this._chart.getChartStore().zoom(a,(i=this._xAxisStartScaleCoordinate)!==null&&i!==void 0?i:void 0)}}return n},r.prototype._processYAxisScaleStartEvent=function(e,t){var i=e.dispatchEvent("mouseDownEvent",t);i&&this._chart.updatePane(1);var n=e.getPane().getAxisComponent().getRange();return this._prevYAxisRange=F({},n),this._yAxisStartScaleDistance=t.pageY,i},r.prototype._processYAxisScalingEvent=function(e,t){var i=e.dispatchEvent("pressedMouseMoveEvent",t);if(i)this._chart.updatePane(1);else{var n=e.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&n.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){var o=this._prevYAxisRange,a=o.from,s=o.to,l=o.range,u=l*(t.pageY/this._yAxisStartScaleDistance),c=(u-l)/2,h=a-c,p=s+c,d=n.valueToRealValue(h,{range:this._prevYAxisRange}),v=n.valueToRealValue(p,{range:this._prevYAxisRange}),g=n.realValueToDisplayValue(d,{range:this._prevYAxisRange}),f=n.realValueToDisplayValue(v,{range:this._prevYAxisRange});n.setRange({from:h,to:p,range:u,realFrom:d,realTo:v,realRange:v-d,displayFrom:g,displayTo:f,displayRange:f-g}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return i},r.prototype._findWidgetByEvent=function(e){var t,i,n,o,a=e.x,s=e.y,l=this._chart.getSeparatorPanes(),u=this._chart.getStyles().separator.size;try{for(var c=at(l),h=c.next();!h.done;h=c.next()){var p=ft(h.value,2)[1],d=(m=p.getBounding()).top-Math.round((7-u)/2);if(a>=m.left&&a<=m.left+m.width&&s>=d&&s<=d+7)return{pane:p,widget:p.getWidget()}}}catch(P){t={error:P}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}var v=this._chart.getDrawPanes(),g=null;try{for(var f=at(v),x=f.next();!x.done;x=f.next()){var m,y=x.value;if(a>=(m=y.getBounding()).left&&a<=m.left+m.width&&s>=m.top&&s<=m.top+m.height){g=y;break}}}catch(P){n={error:P}}finally{try{x&&!x.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}var T=null;if(g!==null){if(!E(T)){var w=g.getMainWidget(),C=w.getBounding();a>=C.left&&a<=C.left+C.width&&s>=C.top&&s<=C.top+C.height&&(T=w)}if(!E(T)){var _=g.getYAxisWidget();if(_!==null){var S=_.getBounding();a>=S.left&&a<=S.left+S.width&&s>=S.top&&s<=S.top+S.height&&(T=_)}}}return{pane:g,widget:T}},r.prototype._makeWidgetEvent=function(e,t){var i,n,o,a=(i=t?.getBounding())!==null&&i!==void 0?i:null;return F(F({},e),{x:e.x-((n=a?.left)!==null&&n!==void 0?n:0),y:e.y-((o=a?.top)!==null&&o!==void 0?o:0)})},r.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},r}();b.DomPosition=void 0,(We=b.DomPosition||(b.DomPosition={})).Root="root",We.Main="main",We.YAxis="yAxis";var qi=function(){function r(e,t){this._chartBounding=ae(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._initContainer(e),this._chartEvent=new mr(this._chartContainer,this),this._chartStore=new On(this,t),this._initPanes(t),this._layout()}return r.prototype._initContainer=function(e){this._container=e,this._chartContainer=Ct("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer),this._cacheChartBounding()},r.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},r.prototype._initPanes=function(e){var t,i=this,n=(t=e?.layout)!==null&&t!==void 0?t:[{type:"candle"}],o=function(s){var l,u;if(!E(i._candlePane)){var c=(l=s.options)!==null&&l!==void 0?l:{};Z(c,{id:it}),i._candlePane=i._createPane(or,it,c),((u=s.content)!==null&&u!==void 0?u:[]).forEach(function(h){i.createIndicator(h,!0,c)})}},a=function(s){if(!E(i._xAxisPane)){var l=i._createPane(cr,j,s??{});i._xAxisPane=l}};n.forEach(function(s){var l,u,c;switch(s.type){case"candle":o(s);break;case"indicator":var h=(l=s.content)!==null&&l!==void 0?l:[];if(h.length>0){var p=(c=(u=s.options)===null||u===void 0?void 0:u.id)!==null&&c!==void 0?c:null;E(p)&&(p=le(xi));var d=F(F({},s.options),{id:p});h.forEach(function(v){i.createIndicator(v,!0,d)})}break;case"xAxis":a(s.options)}}),o({}),a({order:Number.MAX_SAFE_INTEGER})},r.prototype._createPane=function(e,t,i){var n=new e(this,t,i??{});return this._drawPanes.push(n),n},r.prototype._recalculatePaneHeight=function(e,t,i){if(i===0)return!1;var n=this._drawPanes.filter(function(h){var p=h.getId();return h.getOptions().state==="normal"&&p!==e.getId()&&p!==j}),o=n.length;if(o===0)return!1;if(e.getId()!==it&&E(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var a=this._candlePane.getBounding().height;if(a>0){var s=this._candlePane.getOptions().minHeight,l=a+i;l<s&&(t-=a+i-(l=s)),this._candlePane.setBounding({height:l})}}else{var u=i,c=Math.floor(i/o);n.forEach(function(h,p){var d=h.getBounding().height,v=0;(v=p===o-1?d+u:d+c)<h.getOptions().minHeight&&(v=h.getOptions().minHeight),h.setBounding({height:v}),u-=v-d}),Math.abs(u)>0&&(t-=u)}return e.setBounding({height:t}),!0},r.prototype.getDrawPaneById=function(e){if(e===it)return this._candlePane;if(e===j)return this._xAxisPane;var t=this._drawPanes.find(function(i){return i.getId()===e});return t??null},r.prototype.getContainer=function(){return this._container},r.prototype.getChartStore=function(){return this._chartStore},r.prototype.getXAxisPane=function(){return this._xAxisPane},r.prototype.getDrawPanes=function(){return this._drawPanes},r.prototype.getSeparatorPanes=function(){return this._separatorPanes},r.prototype.layout=function(e){var t,i,n,o,a,s,l=this;(t=e.sort)!==null&&t!==void 0&&t&&(this._layoutOptions.sort=e.sort),(i=e.measureHeight)!==null&&i!==void 0&&i&&(this._layoutOptions.measureHeight=e.measureHeight),(n=e.measureWidth)!==null&&n!==void 0&&n&&(this._layoutOptions.measureWidth=e.measureWidth),(o=e.update)!==null&&o!==void 0&&o&&(this._layoutOptions.update=e.update),(a=e.buildYAxisTick)!==null&&a!==void 0&&a&&(this._layoutOptions.buildYAxisTick=e.buildYAxisTick),(s=e.buildYAxisTick)!==null&&s!==void 0&&s&&(this._layoutOptions.forceBuildYAxisTick=e.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(u){l._layout(),l._layoutPending=!1}).catch(function(u){}))},r.prototype._layout=function(){var e=this,t=this._layoutOptions,i=t.sort,n=t.measureHeight,o=t.measureWidth,a=t.update,s=t.buildYAxisTick,l=t.forceBuildYAxisTick;if(i){for(;E(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(I,A){return I.getOptions().order-A.getOptions().order});var u=null;this._drawPanes.forEach(function(I){if(I.getId()!==j){if(E(u)){var A=new dr(e,"",u,I);e._chartContainer.appendChild(A.getContainer()),e._separatorPanes.set(I,A)}u=I}e._chartContainer.appendChild(I.getContainer())})}if(n){var c=this._chartBounding.height,h=this.getStyles().separator.size,p=this._xAxisPane.getAxisComponent().getAutoSize(),d=c-p;d<0&&(d=0),this._drawPanes.forEach(function(I){var A=I.getId();if(E(e._separatorPanes.get(I))&&(d-=h),A!==j&&A!==it&&I.getVisible()){var B=I.getBounding().height;B>d?(B=d,d=0):d-=B,I.setBounding({height:B})}}),this._candlePane.setBounding({height:Math.max(d,0)}),this._xAxisPane.setBounding({height:p});var v=0;this._drawPanes.forEach(function(I){var A=e._separatorPanes.get(I);E(A)&&(A.setBounding({height:h,top:v}),v+=h),I.setBounding({top:v}),v+=I.getBounding().height})}var g=o;if((s||l)&&this._drawPanes.forEach(function(I){var A=I.getAxisComponent().buildTicks(l);g||(g=A)}),g){var f=this._chartBounding.width,x=this.getStyles(),m=0,y=!0,T=0,w=!0;this._drawPanes.forEach(function(I){if(I.getId()!==j){var A=I.getAxisComponent(),B=A.inside,N=A.getAutoSize();A.position===St.Left?(m=Math.max(m,N),B&&(y=!1)):(T=Math.max(T,N),B&&(w=!1))}});var C=f,_=0,S=0;y&&(C-=m,_=m),w&&(C-=T,S=T),this._chartStore.setTotalBarSpace(C);var P={width:f},M={width:C,left:_,right:S},R={width:m},O={width:T},k=x.separator.fill,D={};D=k?P:M,this._drawPanes.forEach(function(I){var A;(A=e._separatorPanes.get(I))===null||A===void 0||A.setBounding(D),I.setBounding(P,M,R,O)})}a&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,forceBuildYAxisTick:!1}},r.prototype.updatePane=function(e,t){var i=this;if(E(t)){var n=this.getDrawPaneById(t);n?.update(e)}else this._drawPanes.forEach(function(o){var a;o.update(e),(a=i._separatorPanes.get(o))===null||a===void 0||a.update(e)})},r.prototype.crosshairChange=function(e){var t=this;if(this._chartStore.hasAction(b.ActionType.OnCrosshairChange)){var i={};this._drawPanes.forEach(function(n){var o=n.getId(),a={};t._chartStore.getIndicatorsByPaneId(o).forEach(function(s){var l,u=s.result;a[s.name]=u[(l=e.dataIndex)!==null&&l!==void 0?l:u.length-1]}),i[o]=a}),Y(e.paneId)&&this._chartStore.executeAction(b.ActionType.OnCrosshairChange,F(F({},e),{indicatorData:i}))}},r.prototype.getDom=function(e,t){var i,n;if(!E(e))return this._chartContainer;var o=this.getDrawPaneById(e);if(E(o))switch(t??b.DomPosition.Root){case b.DomPosition.Root:return o.getContainer();case b.DomPosition.Main:return o.getMainWidget().getContainer();case b.DomPosition.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&n!==void 0?n:null}return null},r.prototype.getSize=function(e,t){var i,n;if(!E(e))return this._chartBounding;var o=this.getDrawPaneById(e);if(E(o))switch(t??b.DomPosition.Root){case b.DomPosition.Root:return o.getBounding();case b.DomPosition.Main:return o.getMainWidget().getBounding();case b.DomPosition.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&n!==void 0?n:null}return null},r.prototype.setPrecision=function(e){this._chartStore.setPrecision(e)},r.prototype.getPrecision=function(){return this._chartStore.getPrecision()},r.prototype.setStyles=function(e){var t=this;this._setOptions(function(){t._chartStore.setStyles(e)})},r.prototype.getStyles=function(){return this._chartStore.getStyles()},r.prototype.setCustomApi=function(e){var t=this;this._setOptions(function(){t._chartStore.setCustomApi(e)})},r.prototype.getCustomApi=function(){return this._chartStore.getCustomApi()},r.prototype.setLocale=function(e){var t=this;this._setOptions(function(){t._chartStore.setLocale(e)})},r.prototype.getLocale=function(){return this._chartStore.getLocale()},r.prototype.setTimezone=function(e){var t=this;this._setOptions(function(){t._chartStore.setTimezone(e)})},r.prototype.getTimezone=function(){return this._chartStore.getTimezone()},r.prototype.setThousandsSeparator=function(e){var t=this;this._setOptions(function(){t._chartStore.setThousandsSeparator(e)})},r.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},r.prototype.setDecimalFold=function(e){var t=this;this._setOptions(function(){t._chartStore.setDecimalFold(e)})},r.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},r.prototype._setOptions=function(e){e(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.setOffsetRightDistance=function(e){this._chartStore.setOffsetRightDistance(e,!0)},r.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},r.prototype.setMaxOffsetLeftDistance=function(e){e<0||this._chartStore.setMaxOffsetLeftDistance(e)},r.prototype.setMaxOffsetRightDistance=function(e){e<0||this._chartStore.setMaxOffsetRightDistance(e)},r.prototype.setLeftMinVisibleBarCount=function(e){e<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(e))},r.prototype.setRightMinVisibleBarCount=function(e){e<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(e))},r.prototype.setBarSpace=function(e){this._chartStore.setBarSpace(e)},r.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},r.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},r.prototype.clearData=function(){this._chartStore.clearData()},r.prototype.getDataList=function(){return this._chartStore.getDataList()},r.prototype.applyNewData=function(e,t){this._drawPanes.forEach(function(n){n.getAxisComponent().setAutoCalcTickFlag(!0)});var i={forward:!1,backward:!1};qt(t)?(i.forward=t,i.backward=t):i=F(F({},i),t),this._chartStore.addData(e,st.Init,i)},r.prototype.updateData=function(e){this._chartStore.addData(e,st.Update)},r.prototype.setLoadMoreDataCallback=function(e){this._chartStore.setLoadMoreDataCallback(e)},r.prototype.createIndicator=function(e,t,i){var n,o=Y(e)?{name:e}:e;if(gi(o.name)===null)return null;var a=i??{};if(Y(a.id)||(a.id=le(xi)),Y(o.id)||(o.id=le(o.name)),this._chartStore.addIndicator(o,a.id,t!=null&&t)){var s=!1;return E(this.getDrawPaneById(a.id))||(this._createPane(Yi,a.id,a),(n=a.height)!==null&&n!==void 0||(a.height=100),s=!0),this.setPaneOptions(a),this.layout({sort:s,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),o.id}return null},r.prototype.overrideIndicator=function(e){return this._chartStore.overrideIndicator(e)},r.prototype.getIndicators=function(e){return this._chartStore.getIndicatorsByFilter(e??{})},r.prototype.removeIndicator=function(e){var t=this,i=this._chartStore.removeIndicator(e??{});if(i){var n=!1,o=[];this._drawPanes.forEach(function(a){var s=a.getId();s!==it&&s!==j&&o.push(s)}),o.forEach(function(a){if(!t._chartStore.hasIndicators(a)){var s=t._drawPanes.findIndex(function(u){return u.getId()===a}),l=t._drawPanes[s];E(l)&&(n=!0,t._recalculatePaneHeight(l,0,l.getBounding().height),t._drawPanes.splice(s,1),l.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:n,measureHeight:n,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return i},r.prototype.createOverlay=function(e){var t=this,i=[],n=[],o=function(s){E(s.paneId)&&t.getDrawPaneById(s.paneId)!==null?n.push(!0):(s.paneId=it,n.push(!1)),i.push(s)};Y(e)?o({name:e}):yt(e)?e.forEach(function(s){var l=null;l=Y(s)?{name:s}:s,o(l)}):o(e);var a=this._chartStore.addOverlays(i,n);return yt(e)?a:a[0]},r.prototype.getOverlays=function(e){return this._chartStore.getOverlaysByFilter(e??{})},r.prototype.overrideOverlay=function(e){return this._chartStore.overrideOverlay(e)},r.prototype.removeOverlay=function(e){return this._chartStore.removeOverlay(e??{})},r.prototype.setPaneOptions=function(e){var t,i,n,o=this,a=!1,s=!1,l=E(e.id),u=function(d){var v=d.getId();if(l&&e.id===v||!l){if(v!==j){if(L(e.height)&&e.height>0){var g=Math.max((n=e.minHeight)!==null&&n!==void 0?n:d.getOptions().minHeight,0),f=Math.max(g,e.height);s=!0,a=!0,d.setOriginalBounding({height:f}),c._recalculatePaneHeight(d,f,-f)}if(E(e.state)&&d.getOptions().state!==e.state){a=!0,s=!0;var x=e.state;switch(x){case"maximize":if(!E(c._drawPanes.find(function(C){var _=C.getId();return C.getOptions().state==="maximize"&&_!==j}))){d.getOptions().state==="normal"&&d.setOriginalBounding({height:d.getBounding().height}),d.setOptions({state:x});var m=c._chartBounding.height;d.setBounding({height:m-c._xAxisPane.getBounding().height}),c._drawPanes.forEach(function(C){var _;C.getId()!==j&&C.getId()!==v&&(C.setBounding({height:C.getOriginalBounding().height}),C.setVisible(!1),(_=o._separatorPanes.get(C))===null||_===void 0||_.setVisible(!1))})}break;case"minimize":f=d.getBounding().height;var y=d.getOptions().state,T=f-30;y==="maximize"&&(T=d.getOriginalBounding().height-30),c._recalculatePaneHeight(d,30,T)&&(y==="normal"&&d.setOriginalBounding({height:f}),d.setOptions({state:x})),c._drawPanes.forEach(function(C){var _;C.getId()!==j&&(C.setVisible(!0),(_=o._separatorPanes.get(C))===null||_===void 0||_.setVisible(!0))});break;default:f=d.getOriginalBounding().height,c._recalculatePaneHeight(d,f,d.getBounding().height-f)&&d.setOptions({state:x}),c._drawPanes.forEach(function(C){var _;C.getId()!==j&&(C.setVisible(!0),(_=o._separatorPanes.get(C))===null||_===void 0||_.setVisible(!0))})}}}E(e.axis)&&(s=!0);var w=F({},e);if(delete w.state,d.setOptions(w),v===e.id)return"break"}},c=this;try{for(var h=at(this._drawPanes),p=h.next();!p.done&&u(p.value)!=="break";p=h.next());}catch(d){t={error:d}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}s&&this.layout({measureHeight:a,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.getPaneOptions=function(e){var t;if(E(e)){var i=this.getDrawPaneById(e);return(t=i?.getOptions())!==null&&t!==void 0?t:null}return this._drawPanes.map(function(n){return n.getOptions()})},r.prototype.setZoomEnabled=function(e){this._chartStore.setZoomEnabled(e)},r.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},r.prototype.setScrollEnabled=function(e){this._chartStore.setScrollEnabled(e)},r.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},r.prototype.scrollByDistance=function(e,t){var i=this,n=L(t)&&t>0?t:0;if(this._chartStore.startScroll(),n>0){var o=new Se({duration:n});o.doFrame(function(a){var s=e*(a/n);i._chartStore.scroll(s)}),o.start()}else this._chartStore.scroll(e)},r.prototype.scrollToRealTime=function(e){var t=this._chartStore.getBarSpace().bar,i=(this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/t)*t;this.scrollByDistance(i,e)},r.prototype.scrollToDataIndex=function(e,t){var i=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-e))*this._chartStore.getBarSpace().bar;this.scrollByDistance(i,t)},r.prototype.scrollToTimestamp=function(e,t){var i=Ie(this.getDataList(),"timestamp",e);this.scrollToDataIndex(i,t)},r.prototype.zoomAtCoordinate=function(e,t,i){var n=this,o=L(i)&&i>0?i:0,a=this._chartStore.getBarSpace().bar,s=a*e-a;if(o>0){var l=0,u=new Se({duration:o});u.doFrame(function(c){var h=s*(c/o),p=(h-l)/n._chartStore.getBarSpace().bar*10;n._chartStore.zoom(p,t),l=h}),u.start()}else this._chartStore.zoom(s/a*10,t)},r.prototype.zoomAtDataIndex=function(e,t,i){var n=this._chartStore.dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:n,y:0},i)},r.prototype.zoomAtTimestamp=function(e,t,i){var n=Ie(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,n,i)},r.prototype.convertToPixel=function(e,t){var i,n=this,o=t??{},a=o.paneId,s=a===void 0?it:a,l=o.absolute,u=l!==void 0&&l,c=[];if(s!==j){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=h.getAxisComponent();c=d.map(function(f){var x={},m=f.dataIndex;if(L(f.timestamp)&&(m=n._chartStore.timestampToDataIndex(f.timestamp)),L(m)&&(x.x=v.convertToPixel(m)),L(f.value)){var y=g.convertToPixel(f.value);x.y=u?p.top+y:y}return x})}}return yt(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},r.prototype.convertFromPixel=function(e,t){var i,n=this,o=t??{},a=o.paneId,s=a===void 0?it:a,l=o.absolute,u=l!==void 0&&l,c=[];if(s!==j){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=h.getAxisComponent();c=d.map(function(f){var x,m={};if(L(f.x)){var y=v.convertFromPixel(f.x);m.dataIndex=y,m.timestamp=(x=n._chartStore.dataIndexToTimestamp(y))!==null&&x!==void 0?x:void 0}if(L(f.y)){var T=u?f.y-p.top:f.y;m.value=g.convertFromPixel(T)}return m})}}return yt(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},r.prototype.executeAction=function(e,t){var i;if(e===b.ActionType.OnCrosshairChange){var n=F({},t);(i=n.paneId)!==null&&i!==void 0||(n.paneId=it),this._chartStore.setCrosshair(n,{notExecuteAction:!0})}},r.prototype.subscribeAction=function(e,t){this._chartStore.subscribeAction(e,t)},r.prototype.unsubscribeAction=function(e,t){this._chartStore.unsubscribeAction(e,t)},r.prototype.getConvertPictureUrl=function(e,t,i){var n=this,o=this._chartBounding,a=o.width,s=o.height,l=Ct("canvas",{width:"".concat(a,"px"),height:"".concat(s,"px"),boxSizing:"border-box"}),u=l.getContext("2d"),c=Dt(l);l.width=a*c,l.height=s*c,u.scale(c,c),u.fillStyle=i??"#FFFFFF",u.fillRect(0,0,a,s);var h=e!=null&&e;return this._drawPanes.forEach(function(p){var d=n._separatorPanes.get(p);if(E(d)){var v=d.getBounding();u.drawImage(d.getImage(h),v.left,v.top,v.width,v.height)}var g=p.getBounding();u.drawImage(p.getImage(h),0,g.top,a,g.height)}),l.toDataURL("image/".concat(t??"jpeg"))},r.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(e){e.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},r}(),de=new Map,_r=1,xr={clone:Vt,merge:Z,isString:Y,isNumber:L,isValid:E,isObject:pt,isArray:yt,isFunction:tt,isBoolean:qt,formatValue:K,formatPrecision:et,formatBigNumber:je,formatDate:Ze,formatThousands:Qe,formatFoldDecimal:Ke,calcTextWidth:Zt,getLinearSlopeIntercept:ce,getLinearYFromSlopeIntercept:Ae,getLinearYFromCoordinates:Qt,checkCoordinateOnArc:Mi,checkCoordinateOnCircle:wi,checkCoordinateOnLine:fi,checkCoordinateOnPolygon:Ei,checkCoordinateOnRect:Re,checkCoordinateOnText:Ii};b.dispose=function(r){var e,t,i=null;if(r instanceof qi)i=r.id;else{var n=null;i=(e=(n=Y(r)?document.getElementById(r):r)==null?void 0:n.getAttribute("k-line-chart-id"))!==null&&e!==void 0?e:null}i!==null&&((t=de.get(i))===null||t===void 0||t.destroy(),de.delete(i))},b.getFigureClass=function(r){var e;return(e=Jt[r])!==null&&e!==void 0?e:null},b.getOverlayClass=function(r){var e;return(e=Kt[r])!==null&&e!==void 0?e:null},b.getSupportedFigures=function(){return Object.keys(Jt)},b.getSupportedIndicators=function(){return Object.keys(ue)},b.getSupportedLocales=function(){return Object.keys(he)},b.getSupportedOverlays=function(){return Object.keys(Kt)},b.init=function(r,e){var t=null;if((t=Y(r)?document.getElementById(r):r)===null)return null;var i=de.get(t.id);if(E(i))return i;var n="k_line_chart_".concat(_r++);return(i=new qi(t,e)).id=n,t.setAttribute("k-line-chart-id",n),de.set(n,i),i},b.registerFigure=function(r){Jt[r.name]=vi.extend(r)},b.registerIndicator=function(r){ue[r.name]=$e.extend(r)},b.registerLocale=function(r,e){he[r]=F(F({},he[r]),e)},b.registerOverlay=function(r){Kt[r.name]=Je.extend(r)},b.registerStyles=function(r,e){_i[r]=e},b.registerXAxis=function(r){Le[r.name]=Hi.extend(r)},b.registerYAxis=function(r){Be[r.name]=te.extend(r)},b.utils=xr,b.version=function(){return"10.0.0-alpha5"}});</script>
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f5f0d6d79a8fb0825e285ab72dc542cb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8860a245><!--[--><div class="banner top" role="banner" data-v-c9605c31><span data-v-c9605c31>üîî¬†¬†v9 Â∞ÜÁª¥Êä§Âà∞ 2025 Âπ¥ 5 Êúà‰ªΩÔºåÂª∫ËÆÆÂ∞ΩÂø´ËøÅÁßªÂà∞Êñ∞ÁâàÊú¨„ÄÇ</span><button class="banner-close" data-v-c9605c31><span class="close" data-v-c9605c31>√ó</span></button></div><!--]--><!--[--><span tabindex="-1" data-v-9a6d1a1b></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9a6d1a1b>Skip to content</a><!--]--><!----><header class="VPNav" data-v-8860a245 data-v-85bf38ae><div class="VPNavBar" data-v-85bf38ae data-v-8ebf25d2><div class="wrapper" data-v-8ebf25d2><div class="container" data-v-8ebf25d2><div class="title" data-v-8ebf25d2><div class="VPNavBarTitle has-sidebar" data-v-8ebf25d2 data-v-fd550826><a class="title" href="/" data-v-fd550826><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo-nav.svg" alt data-v-a6a06042><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-8ebf25d2><div class="content-body" data-v-8ebf25d2><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8ebf25d2><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="ÊêúÁ¥¢ÊñáÊ°£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">ÊêúÁ¥¢ÊñáÊ°£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8ebf25d2 data-v-cbd72a9f><span id="main-nav-aria-label" class="visually-hidden" data-v-cbd72a9f> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/guide/introduction" tabindex="0" data-v-cbd72a9f data-v-00bd4455><!--[--><span data-v-00bd4455>ÊåáÂçó</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-cbd72a9f data-v-05835acc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-05835acc><span class="text" data-v-05835acc><!----><span data-v-05835acc>API</span><span class="vpi-chevron-down text-icon" data-v-05835acc></span></span></button><div class="menu" data-v-05835acc><div class="VPMenu" data-v-05835acc data-v-d779daad><div class="items" data-v-d779daad><!--[--><!--[--><div class="VPMenuLink" data-v-d779daad data-v-ae882010><a class="VPLink link" href="/api/chart/init" data-v-ae882010><!--[--><span data-v-ae882010>ÂõæË°®API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d779daad data-v-ae882010><a class="VPLink link" href="/api/instance/getDom" data-v-ae882010><!--[--><span data-v-ae882010>ÂÆû‰æãAPI</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://pro.klinecharts.com" target="_blank" rel="noreferrer" tabindex="0" data-v-cbd72a9f data-v-00bd4455><!--[--><span data-v-00bd4455>Pro</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://preview.klinecharts.com" target="_blank" rel="noreferrer" tabindex="0" data-v-cbd72a9f data-v-00bd4455><!--[--><span data-v-00bd4455>È¢ÑËßà</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/customize" tabindex="0" data-v-cbd72a9f data-v-00bd4455><!--[--><span data-v-00bd4455>ÂÆöÂà∂</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/sponsor" tabindex="0" data-v-cbd72a9f data-v-00bd4455><!--[--><span data-v-00bd4455>ËµûÂä©</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-cbd72a9f data-v-05835acc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-05835acc><span class="text" data-v-05835acc><!----><span data-v-05835acc>10.0.0-alpha5</span><span class="vpi-chevron-down text-icon" data-v-05835acc></span></span></button><div class="menu" data-v-05835acc><div class="VPMenu" data-v-05835acc data-v-d779daad><div class="items" data-v-d779daad><!--[--><!--[--><div class="VPMenuLink" data-v-d779daad data-v-ae882010><a class="VPLink link vp-external-link-icon" href="https://v9.klinecharts.com" target="_blank" rel="noreferrer" data-v-ae882010><!--[--><span data-v-ae882010>9.x ÊñáÊ°£</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d779daad data-v-ae882010><a class="VPLink link vp-external-link-icon" href="https://v8.klinecharts.com/zh-CN" target="_blank" rel="noreferrer" data-v-ae882010><!--[--><span data-v-ae882010>8.x ÊñáÊ°£</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-8ebf25d2 data-v-276b7b04 data-v-05835acc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-05835acc><span class="text" data-v-05835acc><span class="vpi-languages option-icon" data-v-05835acc></span><!----><span class="vpi-chevron-down text-icon" data-v-05835acc></span></span></button><div class="menu" data-v-05835acc><div class="VPMenu" data-v-05835acc data-v-d779daad><!----><!--[--><!--[--><div class="items" data-v-276b7b04><p class="title" data-v-276b7b04>üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá</p><!--[--><div class="VPMenuLink" data-v-276b7b04 data-v-ae882010><a class="VPLink link" href="/en-US/guide/data-source" data-v-ae882010><!--[--><span data-v-ae882010>üá¨üáß English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-8ebf25d2 data-v-bf8a9b71><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bf8a9b71 data-v-c2958f22 data-v-69ddc2dc><span class="check" data-v-69ddc2dc><span class="icon" data-v-69ddc2dc><!--[--><span class="vpi-sun sun" data-v-c2958f22></span><span class="vpi-moon moon" data-v-c2958f22></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8ebf25d2 data-v-d3dff0ca data-v-eeefa3da><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-eeefa3da data-v-7f8340fa><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-eeefa3da data-v-7f8340fa><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/guide/feedback" aria-label target="_blank" rel="noopener" data-v-eeefa3da data-v-7f8340fa><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8ebf25d2 data-v-74f5d662 data-v-05835acc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-05835acc><span class="vpi-more-horizontal icon" data-v-05835acc></span></button><div class="menu" data-v-05835acc><div class="VPMenu" data-v-05835acc data-v-d779daad><!----><!--[--><!--[--><div class="group translations" data-v-74f5d662><p class="trans-title" data-v-74f5d662>üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá</p><!--[--><div class="VPMenuLink" data-v-74f5d662 data-v-ae882010><a class="VPLink link" href="/en-US/guide/data-source" data-v-ae882010><!--[--><span data-v-ae882010>üá¨üáß English</span><!--]--></a></div><!--]--></div><div class="group" data-v-74f5d662><div class="item appearance" data-v-74f5d662><p class="label" data-v-74f5d662>‰∏ªÈ¢ò</p><div class="appearance-action" data-v-74f5d662><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-74f5d662 data-v-c2958f22 data-v-69ddc2dc><span class="check" data-v-69ddc2dc><span class="icon" data-v-69ddc2dc><!--[--><span class="vpi-sun sun" data-v-c2958f22></span><span class="vpi-moon moon" data-v-c2958f22></span><!--]--></span></span></button></div></div></div><div class="group" data-v-74f5d662><div class="item social-links" data-v-74f5d662><div class="VPSocialLinks social-links-list" data-v-74f5d662 data-v-eeefa3da><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-eeefa3da data-v-7f8340fa><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-eeefa3da data-v-7f8340fa><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/guide/feedback" aria-label target="_blank" rel="noopener" data-v-eeefa3da data-v-7f8340fa><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8ebf25d2 data-v-a039c727><span class="container" data-v-a039c727><span class="top" data-v-a039c727></span><span class="middle" data-v-a039c727></span><span class="bottom" data-v-a039c727></span></span></button></div></div></div></div><div class="divider" data-v-8ebf25d2><div class="divider-line" data-v-8ebf25d2></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-8860a245 data-v-e106f0d0><div class="container" data-v-e106f0d0><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e106f0d0><span class="vpi-align-left menu-icon" data-v-e106f0d0></span><span class="menu-text" data-v-e106f0d0>ËèúÂçï</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e106f0d0 data-v-0972c5cf><button data-v-0972c5cf>ËøîÂõûÈ°∂ÈÉ®</button><!----></div></div></div><aside class="VPSidebar" data-v-8860a245 data-v-b9196a77><div class="curtain" data-v-b9196a77></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b9196a77><span class="visually-hidden" id="sidebar-aria-label" data-v-b9196a77> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-1f950c5d><section class="VPSidebarItem level-0 collapsible" data-v-1f950c5d data-v-8fa073e4><div class="item" role="button" tabindex="0" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><h2 class="text" data-v-8fa073e4>ÂºÄÂßã</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-8fa073e4><span class="vpi-chevron-right caret-icon" data-v-8fa073e4></span></div></div><div class="items" data-v-8fa073e4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/introduction" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>ÁÆÄ‰ªã</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/quick-start" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Âø´ÈÄü‰∏äÊâã</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-1f950c5d><section class="VPSidebarItem level-0 collapsible has-active" data-v-1f950c5d data-v-8fa073e4><div class="item" role="button" tabindex="0" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><h2 class="text" data-v-8fa073e4>Âü∫Á°Ä</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-8fa073e4><span class="vpi-chevron-right caret-icon" data-v-8fa073e4></span></div></div><div class="items" data-v-8fa073e4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/styles" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Ê†∑ÂºèÈÖçÁΩÆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/data-source" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Êï∞ÊçÆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/i18n" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>ÂõΩÈôÖÂåñ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/environment" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>ÁéØÂ¢ÉË¶ÅÊ±Ç</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/hot-key" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Âø´Êç∑ÈîÆ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-1f950c5d><section class="VPSidebarItem level-0 collapsible" data-v-1f950c5d data-v-8fa073e4><div class="item" role="button" tabindex="0" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><h2 class="text" data-v-8fa073e4>ËøõÈò∂</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-8fa073e4><span class="vpi-chevron-right caret-icon" data-v-8fa073e4></span></div></div><div class="items" data-v-8fa073e4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/figure" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Âü∫Á°ÄÂõæÂΩ¢</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/indicator" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>ÊäÄÊúØÊåáÊ†á</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/overlay" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Ë¶ÜÁõñÁâ©</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/local-development" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Êú¨Âú∞ÂºÄÂèë</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-1f950c5d><section class="VPSidebarItem level-0 collapsible" data-v-1f950c5d data-v-8fa073e4><div class="item" role="button" tabindex="0" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><h2 class="text" data-v-8fa073e4>ÂÖ∂ÂÆÉ</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-8fa073e4><span class="vpi-chevron-right caret-icon" data-v-8fa073e4></span></div></div><div class="items" data-v-8fa073e4><!--[--><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/v9-to-v10" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>‰ªé 9.x Âà∞ 10.x</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/faq" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Â∏∏ËßÅÈóÆÈ¢ò</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/feedback" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>ÂèçÈ¶àÂíåÂÖ±Âª∫</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-8fa073e4 data-v-8fa073e4><div class="item" data-v-8fa073e4><div class="indicator" data-v-8fa073e4></div><a class="VPLink link link" href="/guide/changelog" data-v-8fa073e4><!--[--><p class="text" data-v-8fa073e4>Êõ¥Êñ∞Êó•Âøó</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8860a245 data-v-89940233><div class="VPDoc has-sidebar has-aside" data-v-89940233 data-v-2b74accd><!--[--><!--]--><div class="container" data-v-2b74accd><div class="aside" data-v-2b74accd><div class="aside-curtain" data-v-2b74accd></div><div class="aside-container" data-v-2b74accd><div class="aside-content" data-v-2b74accd><div class="VPDocAside" data-v-2b74accd data-v-52d12016><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-52d12016 data-v-8fdcdee7><div class="content" data-v-8fdcdee7><div class="outline-marker" data-v-8fdcdee7></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-8fdcdee7>È°µÈù¢ÂØºËà™</div><ul class="VPDocOutlineItem root" data-v-8fdcdee7 data-v-ddb9736b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-52d12016></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><a class="asideSponsor" href="https://www.tradingx.cloud/" target="_blank" rel="noopener noreferrer" data-v-2e8097db><img class="" src="/images/sponsors/tradingx.png" alt="tradingx" data-v-2e8097db><span style="padding:6px 22px 0 22px;text-align:center;" data-v-2e8097db>‰ª•ÂÖçË¥πËµãËÉΩ‰∏ì‰∏öÔºå‰ª•ÂàõÊñ∞ÈáçÂ°ë‰∫§Êòì</span></a><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-2b74accd><div class="content-container" data-v-2b74accd><!--[--><!--]--><main class="main" data-v-2b74accd><div style="position:relative;" class="vp-doc _guide_data-source" data-v-2b74accd><div><h1 id="üìö-Êï∞ÊçÆ" tabindex="-1">üìö Êï∞ÊçÆ <a class="header-anchor" href="#üìö-Êï∞ÊçÆ" aria-label="Permalink to &quot;üìö Êï∞ÊçÆ&quot;">‚Äã</a></h1><p>ÂõæË°®ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÂøÖÈ°ªÊòØÂõ∫ÂÆöÊ†ºÂºè„ÄÇÈÄöËøáÂõæË°®ÂÆû‰æã API <a href="/api/instance/applyNewData">applyNewData(dataList, more)</a> Ôºå <a href="/api/instance/updateData">updateData(data)</a> Âíå <a href="/api/instance/setLoadMoreDataCallback">setLoadMoreDataCallback(callback)</a> Êù•ÂíåÂõæË°®ËøõË°åÊï∞ÊçÆ‰∫§‰∫í„ÄÇ</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Êó∂Èó¥Êà≥ÔºåÊØ´ÁßíÁ∫ßÂà´ÔºåÂøÖË¶ÅÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  timestamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ÂºÄÁõò‰ª∑ÔºåÂøÖË¶ÅÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Êî∂Áõò‰ª∑ÔºåÂøÖË¶ÅÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ÊúÄÈ´ò‰ª∑ÔºåÂøÖË¶ÅÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  high</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ÊúÄ‰Ωé‰ª∑ÔºåÂøÖË¶ÅÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  low</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Êàê‰∫§ÈáèÔºåÈùûÂøÖÈ°ªÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Êàê‰∫§È¢ùÔºåÈùûÂøÖÈ°ªÂ≠óÊÆµÔºåÂ¶ÇÊûúÈúÄË¶ÅÂ±ïÁ§∫ÊäÄÊúØÊåáÊ†á&#39;EMV&#39;Âíå&#39;AVP&#39;ÔºåÂàôÈúÄË¶Å‰∏∫ËØ•Â≠óÊÆµÂ°´ÂÖÖÊï∞ÊçÆ„ÄÇ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  turnover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-2b74accd data-v-d63e56d8><!--[--><!--]--><div class="edit-info" data-v-d63e56d8><div class="edit-link" data-v-d63e56d8><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/klinecharts/KLineChart/edit/main/docs/guide/data-source.md" target="_blank" rel="noreferrer" data-v-d63e56d8><!--[--><span class="vpi-square-pen edit-link-icon" data-v-d63e56d8></span> Âú® GitHub ‰∏äÁºñËæëÊ≠§È°µÈù¢<!--]--></a></div><div class="last-updated" data-v-d63e56d8><p class="VPLastUpdated" data-v-d63e56d8 data-v-7f794a10>ÊúÄÂêéÊõ¥Êñ∞‰∫é: <time datetime="2024-11-28T18:50:04.000Z" data-v-7f794a10></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-d63e56d8><span class="visually-hidden" id="doc-footer-aria-label" data-v-d63e56d8>Pager</span><div class="pager" data-v-d63e56d8><a class="VPLink link pager-link prev" href="/guide/styles" data-v-d63e56d8><!--[--><span class="desc" data-v-d63e56d8>‰∏ä‰∏ÄÁØá</span><span class="title" data-v-d63e56d8>Ê†∑ÂºèÈÖçÁΩÆ</span><!--]--></a></div><div class="pager" data-v-d63e56d8><a class="VPLink link pager-link next" href="/guide/i18n" data-v-d63e56d8><!--[--><span class="desc" data-v-d63e56d8>‰∏ã‰∏ÄÁØá</span><span class="title" data-v-d63e56d8>ÂõΩÈôÖÂåñ</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-8860a245 data-v-ceaae7c5><div class="container" data-v-ceaae7c5><p class="message" data-v-ceaae7c5>Released under the <a href="https://github.com/klinecharts/KLineChart/blob/main/LICENSE">Apache License V2</a>.</p><p class="copyright" data-v-ceaae7c5>Copyright ¬© 2018-2025 <a href="https://github.com/liihuu">liihuu</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>