<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>registerLocale(locale, locales) | KLineChart</title>
    <meta name="description" content="💹📈 可高度自定义的专业级轻量金融图表。">
    <meta name="generator" content="VitePress v2.0.0-alpha.2">
    <link rel="preload stylesheet" href="/assets/style.D2X52yFv.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.a448040b.js"></script>
    <script type="module" src="/assets/app.DRICSTYd.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.C1ppDT4A.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BXnzT7e1.js">
    <link rel="modulepreload" href="/assets/chunks/index.f_ER63ca.js">
    <link rel="modulepreload" href="/assets/chunks/index.CZ5p4-N9.js">
    <link rel="modulepreload" href="/assets/api_chart_registerLocale.md.DnnKFeNj.lean.js">
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <script>/**
     * @license
     * KLineChart v10.0.0-alpha4
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */(function(m,Mt){typeof exports=="object"&&typeof module<"u"?Mt(exports):typeof define=="function"&&define.amd?define(["exports"],Mt):Mt((m=typeof globalThis<"u"?globalThis:m||self).klinecharts={})})(this,function(m){"use strict";var Mt=function(o,e){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},Mt(o,e)};function N(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=o}Mt(o,e),o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ae,he,de,Re,pe,Fe,Ft,wt,A=function(){return A=Object.assign||function(o){for(var e,t=1,i=arguments.length;t<i;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o},A.apply(this,arguments)};function $t(o,e){var t={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&e.indexOf(i)<0&&(t[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(o);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(o,i[n])&&(t[i[n]]=o[i[n]])}return t}function Be(o,e,t,i){return new(t||(t=Promise))(function(n,r){function a(u){try{l(i.next(u))}catch(c){r(c)}}function s(u){try{l(i.throw(u))}catch(c){r(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(a,s)}l((i=i.apply(o,e||[])).next())})}function Le(o,e){var t,i,n,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(t=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){r=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){r.label=c[1];break}if(c[0]===6&&r.label<n[1]){r.label=n[1],n=c;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(c);break}n[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(o,r)}catch(h){c=[6,h],i=0}finally{t=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function tt(o){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&o[e],i=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(o,e){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var i,n,r=t.call(o),a=[];try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){n={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return a}function Yt(o,e,t){if(t||arguments.length===2)for(var i,n=0,r=e.length;n<r;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return o.concat(i||Array.prototype.slice.call(e))}function Y(o,e){if(nt(o)||nt(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=o[t],n=e[t];nt(n)&&nt(i)?Y(i,n):S(e[t])&&(o[t]=Bt(e[t]))}}}function Bt(o){if(!nt(o))return o;var e=null;for(var t in e=st(o)?[]:{},o)if(Object.prototype.hasOwnProperty.call(o,t)){var i=o[t];nt(i)?e[t]=Bt(i):e[t]=i}return e}function st(o){return Object.prototype.toString.call(o)==="[object Array]"}function j(o){return typeof o=="function"}function nt(o){return typeof o=="object"&&S(o)}function L(o){return typeof o=="number"&&Number.isFinite(o)}function S(o){return o!=null}function Ht(o){return typeof o=="boolean"}function z(o){return typeof o=="string"}function Lt(o){return o==="transparent"||o==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(o)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(o)}function St(o,e){var t=o.replace(/^#/,""),i=parseInt(t,16),n=i>>8&255,r=255&i;return"rgba(".concat(i>>16&255,", ").concat(n,", ").concat(r,", ").concat(e??1,")")}typeof SuppressedError=="function"&&SuppressedError,m.LineType=void 0,(Ae=m.LineType||(m.LineType={})).Dashed="dashed",Ae.Solid="solid",m.PolygonType=void 0,(he=m.PolygonType||(m.PolygonType={})).Stroke="stroke",he.Fill="fill",he.StrokeFill="stroke_fill",m.TooltipShowRule=void 0,(de=m.TooltipShowRule||(m.TooltipShowRule={})).Always="always",de.FollowCross="follow_cross",de.None="none",m.TooltipShowType=void 0,(Re=m.TooltipShowType||(m.TooltipShowType={})).Standard="standard",Re.Rect="rect",m.TooltipIconPosition=void 0,(pe=m.TooltipIconPosition||(m.TooltipIconPosition={})).Left="left",pe.Middle="middle",pe.Right="right",m.CandleTooltipRectPosition=void 0,(Fe=m.CandleTooltipRectPosition||(m.CandleTooltipRectPosition={})).Fixed="fixed",Fe.Pointer="pointer",m.CandleType=void 0,(Ft=m.CandleType||(m.CandleType={})).CandleSolid="candle_solid",Ft.CandleStroke="candle_stroke",Ft.CandleUpStroke="candle_up_stroke",Ft.CandleDownStroke="candle_down_stroke",Ft.Ohlc="ohlc",Ft.Area="area",function(o){o.CurrentOpen="current_open",o.PreviousClose="previous_close"}(wt||(wt={}));var W={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function Oe(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:W.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function Zi(){function o(){return{show:!0,line:{show:!0,style:m.LineType.Dashed,dashedValue:[4,2],size:1,color:W.GREY},text:{show:!0,style:m.PolygonType.Fill,color:W.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:m.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:W.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:W.GREY}}}return{show:!0,horizontal:o(),vertical:o()}}var ji=/\\(\\)?/g,qi=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function G(o,e,t){if(S(o)){var i=[];e.replace(qi,function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=s;return S(l[1])?c=l[2].replace(ji,"$1"):S(l[0])&&(c=l[0].trim()),i.push(c),""});for(var n=o,r=0,a=i.length;S(n)&&r<a;)n=n?.[i[r++]];return S(n)?n:t??"--"}return t??"--"}function We(o,e){var t={};return o.formatToParts(new Date(e)).forEach(function(i){var n=i.type,r=i.value;switch(n){case"year":t.YYYY=r;break;case"month":t.MM=r;break;case"day":t.DD=r;break;case"hour":t.HH=r==="24"?"00":r;break;case"minute":t.mm=r;break;case"second":t.ss=r}}),t}function Ne(o,e,t){var i=We(o,e);return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return i[n]})}function q(o,e){var t=+o;return L(t)?t.toFixed(e??2):"".concat(o)}function Ve(o){var e=+o;if(L(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(o)}function ze(o,e){var t="".concat(o);if(e.length===0)return t;if(t.includes(".")){var i=t.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)}),".").concat(i[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)})}function Ye(o,e){var t="".concat(o);if(new RegExp("\\.0{"+e+",}[1-9][0-9]*$").test(t)){var i=t.split("."),n=i.length-1,r=i[n],a=/0*/.exec(r);if(S(a)){var s=a[0].length;return i[n]=r.replace(/0*/,"0{".concat(s,"}")),i.join(".")}}return t}var kt,Qt=null;function Et(o){var e,t;return(t=(e=o.ownerDocument.defaultView)===null||e===void 0?void 0:e.devicePixelRatio)!==null&&t!==void 0?t:1}function At(o,e,t){return"".concat(e??"normal"," ").concat(o??12,"px ").concat(t??"Helvetica Neue")}function Xt(o,e,t,i){if(!S(Qt)){var n=document.createElement("canvas"),r=Et(n);(Qt=n.getContext("2d")).scale(r,r)}return Qt.font=At(e,t,i),Math.round(Qt.measureText(o).width)}m.ActionType=void 0,(kt=m.ActionType||(m.ActionType={})).OnZoom="onZoom",kt.OnScroll="onScroll",kt.OnVisibleRangeChange="onVisibleRangeChange",kt.OnTooltipIconClick="onTooltipIconClick",kt.OnCrosshairChange="onCrosshairChange",kt.OnCandleBarClick="onCandleBarClick",kt.OnPaneDrag="onPaneDrag";var ge,Gt,Ki=function(){function o(){this._callbacks=[]}return o.prototype.subscribe=function(e){this._callbacks.indexOf(e)<0&&this._callbacks.push(e)},o.prototype.unsubscribe=function(e){if(j(e)){var t=this._callbacks.indexOf(e);t>-1&&this._callbacks.splice(t,1)}else this._callbacks=[]},o.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},o.prototype.isEmpty=function(){return this._callbacks.length===0},o}();function ve(o,e,t,i){var n,r=o.result,a=o.figures,s=o.styles,l=G(s,"circles",t.circles),u=l.length,c=G(s,"bars",t.bars),h=c.length,p=G(s,"lines",t.lines),d=p.length,v=0,g=0,f=0,y=0;a.forEach(function(x){var _;switch(x.type){case"circle":y=v;var b=l[v%u];n=A(A({},b),{color:b.noChangeColor}),v++;break;case"bar":y=g;var C=c[g%h];n=A(A({},C),{color:C.noChangeColor}),g++;break;case"line":y=f,n=p[f%d],f++}if(S(x.type)){var T=(_=x.styles)===null||_===void 0?void 0:_.call(x,{data:{prev:r[e-1],current:r[e],next:r[e+1]},indicator:o,defaultStyles:t});i(x,A(A({},n),T),y)}})}m.IndicatorSeries=void 0,(ge=m.IndicatorSeries||(m.IndicatorSeries={})).Normal="normal",ge.Price="price",ge.Volume="volume",function(o){o.Loading="loading",o.Error="error",o.Ready="ready"}(Gt||(Gt={}));var fe,He=function(){function o(e){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series=m.IndicatorSeries.Normal,this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(t,i){var n=JSON.stringify(t.calcParams)!==JSON.stringify(i.calcParams)||t.figures!==i.figures||t.calc!==i.calc;return{calc:n,draw:n||t.shortName!==i.shortName||t.series!==i.series||t.minValue!==i.minValue||t.maxValue!==i.maxValue||t.precision!==i.precision||t.shouldOhlc!==i.shouldOhlc||t.shouldFormatBigNumber!==i.shouldFormatBigNumber||t.visible!==i.visible||t.zLevel!==i.zLevel||t.extendData!==i.extendData||t.regenerateFigures!==i.regenerateFigures||t.createTooltipDataSource!==i.createTooltipDataSource||t.draw!==i.draw}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result=[],this._lockSeriesPrecision=!1,this.override(e),this._lockSeriesPrecision=!1}return o.prototype.override=function(e){var t,i,n=this.result,r=$t(this,["result"]);this._prevIndicator=A(A({},Bt(r)),{result:n});var a=e.id,s=e.name,l=e.shortName,u=e.precision,c=e.styles,h=e.figures,p=e.calcParams,d=$t(e,["id","name","shortName","precision","styles","figures","calcParams"]);!z(this.id)&&z(a)&&(this.id=a),z(this.name)||(this.name=s??""),this.shortName=(t=l??this.shortName)!==null&&t!==void 0?t:this.name,L(u)&&(this.precision=u,this._lockSeriesPrecision=!0),S(c)&&((i=this.styles)!==null&&i!==void 0||(this.styles={}),Y(this.styles,c)),Y(this,d),S(p)&&(this.calcParams=p,j(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=h??this.figures},o.prototype.setSeriesPrecision=function(e){this._lockSeriesPrecision||(this.precision=e)},o.prototype.shouldUpdateImp=function(){var e=this._prevIndicator.zLevel!==this.zLevel,t=this.shouldUpdate(this._prevIndicator,this);return Ht(t)?{calc:t,draw:t,sort:e}:A(A({},t),{sort:e})},o.prototype.calcImp=function(e){return Be(this,void 0,void 0,function(){var t;return Le(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=i.sent(),this.result=t,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},o.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return N(i,t),i}(o)},o}();function lt(o,e){var t,i=(t=e?.ignoreEvent)!==null&&t!==void 0&&t;return Ht(i)?!i:!i.includes(o)}m.OverlayMode=void 0,(fe=m.OverlayMode||(m.OverlayMode={})).Normal="normal",fe.WeakMagnet="weak_magnet",fe.StrongMagnet="strong_magnet";var Ot,Wt="overlay_figure_",Xe=function(){function o(e){this.groupId="",this.totalStep=1,this.currentStep=1,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode=m.OverlayMode.Normal,this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(e)}return o.prototype.override=function(e){var t,i;this._prevOverlay=Bt(this);var n=e.id,r=e.name;e.currentStep;var a=e.points,s=e.styles;if(Y(this,$t(e,["id","name","currentStep","points","styles"])),z(this.name)||(this.name=r??""),!z(this.id)&&z(n)&&(this.id=n),S(s)&&((t=this.styles)!==null&&t!==void 0||(this.styles={}),Y(this.styles,s)),st(a)&&a.length>0){var l=0;if(this.points=Yt([],pt(a),!1),a.length>=this.totalStep-1?(this.currentStep=-1,l=this.totalStep-1):(this.currentStep=a.length+1,l=a.length),j(this.performEventMoveForDrawing))for(var u=0;u<l;u++)this.performEventMoveForDrawing({currentStep:u+2,mode:this.mode,points:this.points,performPointIndex:u,performPoint:this.points[u]});this.currentStep===-1&&((i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},o.prototype.getPrevZLevel=function(){return this._prevZLevel},o.prototype.setPrevZLevel=function(e){this._prevZLevel=e},o.prototype.shouldUpdate=function(){var e=this._prevOverlay.zLevel!==this.zLevel;return{sort:e,draw:e||JSON.stringify(this._prevOverlay)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles}},o.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},o.prototype.forceComplete=function(){this.currentStep=-1},o.prototype.isDrawing=function(){return this.currentStep!==-1},o.prototype.isStart=function(){return this.currentStep===1},o.prototype.eventMoveForDrawing=function(e){var t,i=this.currentStep-1,n={};L(e.timestamp)&&(n.timestamp=e.timestamp),L(e.dataIndex)&&(n.dataIndex=e.dataIndex),L(e.value)&&(n.value=e.value),this.points[i]=n,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},o.prototype.eventPressedPointMove=function(e,t){var i;this.points[t].timestamp=e.timestamp,L(e.value)&&(this.points[t].value=e.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},o.prototype.startPressedMove=function(e){this._prevPressedPoint=A({},e),this._prevPressedPoints=Bt(this.points)},o.prototype.eventPressedOtherMove=function(e,t){if(this._prevPressedPoint!==null){var i=null;L(e.dataIndex)&&L(this._prevPressedPoint.dataIndex)&&(i=e.dataIndex-this._prevPressedPoint.dataIndex);var n=null;L(e.value)&&L(this._prevPressedPoint.value)&&(n=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(r){var a;L(r.timestamp)&&(r.dataIndex=t.timestampToDataIndex(r.timestamp));var s=A({},r);return L(i)&&L(r.dataIndex)&&(s.dataIndex=r.dataIndex+i,s.timestamp=(a=t.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),L(n)&&L(r.value)&&(s.value=r.value+n),s})}},o.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return N(i,t),i}(o)},o}();function te(o){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return S(o)&&Y(e,o),e}m.FormatDateType=void 0,(Ot=m.FormatDateType||(m.FormatDateType={}))[Ot.Tooltip=0]="Tooltip",Ot[Ot.Crosshair=1]="Crosshair",Ot[Ot.XAxis=2]="XAxis";var Nt=-1;function ee(o){return j(window.requestAnimationFrame)?window.requestAnimationFrame(o):window.setTimeout(o,20)}function Ge(o){j(window.cancelAnimationFrame)?window.cancelAnimationFrame(o):window.clearTimeout(o)}function Ue(o){if(j(window.requestIdleCallback))return window.requestIdleCallback(o);var e=performance.now();return window.setTimeout(function(){o({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-e))}})},1)}var et,ye=function(){function o(e){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Y(this._options,e)}return o.prototype._loop=function(){var e=this;this._running=!0;var t=function(){var i;if(e._running){var n=new Date().getTime()-e._time;n<e._options.duration?((i=e._doFrameCallback)===null||i===void 0||i.call(e,n),ee(t)):(e.stop(),e._currentIterationCount++,e._currentIterationCount<e._options.iterationCount&&e.start())}};ee(t)},o.prototype.doFrame=function(e){return this._doFrameCallback=e,this},o.prototype.setDuration=function(e){return this._options.duration=e,this},o.prototype.setIterationCount=function(e){return this._options.iterationCount=e,this},o.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},o.prototype.stop=function(){var e;this._running&&((e=this._doFrameCallback)===null||e===void 0||e.call(this,this._options.duration)),this._running=!1},o}(),me=1,Ze=new Date().getTime();function ie(o){var e=new Date().getTime();return e===Ze?++me:me=1,Ze=e,"".concat(o??"").concat(e,"_").concat(me)}function gt(o,e){var t,i=document.createElement(o),n=e??{};for(var r in n)i.style[r]=(t=n[r])!==null&&t!==void 0?t:"";return i}function _e(o,e,t){var i=0,n=0;for(n=o.length-1;i!==n;){var r=Math.floor((n+i)/2),a=n-i,s=o[r][e];if(t===o[i][e])return i;if(t===o[n][e])return n;if(t===s)return r;if(t>s?i=r:n=r,a<=2)break}return i}function je(o,e){e=Math.max(0,e??0);var t=Math.pow(10,e);return Math.round(o*t)/t}function qe(o,e,t){for(var i,n,r=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],a=o.length,s=0;s<a;){var l=o[s];r[0]=Math.max((i=l[e])!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,r[0]),r[1]=Math.min((n=l[t])!==null&&n!==void 0?n:Number.MAX_SAFE_INTEGER,r[1]),++s}return r}function vt(o){return o===0?0:Math.log10(o)}function Rt(o){return Math.pow(10,o)}function Ke(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return o.join("_")}(function(o){o.Init="init",o.Forward="forward",o.Backward="backward",o.Update="update"})(et||(et={}));var Ji=function(){function o(e){this._requestIdleCallbackId=Nt,this._tasks=e??[],this._operateTasks()}return o.prototype._operateTasks=function(e){var t,i=this;this._requestIdleCallbackId!==Nt&&(t=this._requestIdleCallbackId,j(window.cancelIdleCallback)?window.cancelIdleCallback(t):window.clearTimeout(t),this._requestIdleCallbackId=Nt),e?.(),this._requestIdleCallbackId=Ue(function(n){i._runTasks(n)})},o.prototype._runTasks=function(e){for(var t=this;e.timeRemaining()>0&&this._tasks.length>0;){var i=this._tasks.shift();i?.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=Ue(function(n){t._runTasks(n)}))},o.prototype.addTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e.id});i>-1?t._tasks[i]=e:t._tasks.push(e)}),this},o.prototype.removeTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e});i>-1&&t._tasks.splice(i,1)}),this},o}(),Je=31536e3,$e=2592e3,Qe=86400,ti=3600,xe=60,ei=1;function ii(o,e,t,i,n,r){var a;i===void 0&&(i=0);for(var s=null,l=r??null,u=0;u<e.length;u++){var c=e[u].timestamp,h=xe,p=We(t,c);S(s)&&(h=p.YYYY!==s.YYYY?Je:p.MM!==s.MM?$e:p.DD!==s.DD?Qe:p.HH!==s.HH?ti:p.mm!==s.mm?xe:ei),L(l)&&L(n?.compare)&&(n.compare=Math.min(n.compare,c-l));var d=(a=o.get(h))!==null&&a!==void 0?a:[];d.push({dataIndex:u+i,weight:h,timestamp:c}),o.set(h,d),s=p,l=c}}function ni(o,e){var t=Math.max(Xt("0000-00-00 00:00:00",e.size,e.weight,e.family),146);return Math.ceil(t/o)}function be(o,e,t){var i=ni(e,t),n=[];return Array.from(o.keys()).sort(function(r,a){return a-r}).forEach(function(r){var a=o.get(r),s=n;n=[];for(var l=s.length,u=0,c=a.length,h=1/0,p=-1/0,d=0;d<c;d++){for(var v=a[d],g=v.dataIndex;u<l;){var f=s[u],y=f.dataIndex;if(!(y<g)){h=y;break}u++,n.push(f),p=y,h=1/0}h-g>=i&&g-p>=i&&(n.push(v),p=g)}for(;u<l;u++)n.push(s[u])}),n}var $i={name:"AVP",shortName:"AVP",series:m.IndicatorSeries.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(o){var e=0,t=0;return o.map(function(i){var n,r,a={},s=(n=i.turnover)!==null&&n!==void 0?n:0,l=(r=i.volume)!==null&&r!==void 0?r:0;return e+=s,(t+=l)!==0&&(a.avp=e/t),a})}},Qi={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(o){var e,t,i=o.data,n=o.indicator,r=o.defaultStyles,a=i.prev,s=i.current,l=(e=a?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return{color:c=u>l?G(n.styles,"bars[0].upColor",r.bars[0].upColor):G(n.styles,"bars[0].downColor",r.bars[0].downColor),style:u>l?m.PolygonType.Stroke:m.PolygonType.Fill,borderColor:c}}}],calc:function(o,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,r=0,a=0,s=0;return o.map(function(l,u){var c={},h=(l.low+l.high)/2;if(n+=h,r+=h,u>=t[0]-1){a=n/t[0];var p=o[u-(t[0]-1)];n-=(p.low+p.high)/2}return u>=t[1]-1&&(s=r/t[1],p=o[u-(t[1]-1)],r-=(p.low+p.high)/2),u>=i-1&&(c.ao=a-s),c})}},tn={name:"BOLL",shortName:"BOLL",series:m.IndicatorSeries.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=t[0]-1,n=0;return o.map(function(r,a){var s=r.close,l={};if(n+=s,a>=i){l.mid=n/t[0];var u=function(c,h){var p=c.length,d=0;return c.forEach(function(v){var g=v.close-h;d+=g*g}),d=Math.abs(d),Math.sqrt(d/p)}(o.slice(a-i,a+1),l.mid);l.up=l.mid+t[1]*u,l.dn=l.mid-t[1]*u,n-=o[a-i].close}return l})}},en={name:"BBI",shortName:"BBI",series:m.IndicatorSeries.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=Math.max.apply(Math,Yt([],pt(t),!1)),n=[],r=[];return o.map(function(a,s){var l={},u=a.close;if(t.forEach(function(h,p){var d;n[p]=((d=n[p])!==null&&d!==void 0?d:0)+u,s>=h-1&&(r[p]=n[p]/h,n[p]-=o[s-(h-1)].close)}),s>=i-1){var c=0;r.forEach(function(h){c+=h}),l.bbi=c/4}return l})}},nn={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=t[0]-1,n=0,r=[];return o.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(n+=u,r.push(u),s>=i){var c=n/t[0],h=r.slice(s-i,s+1),p=0;h.forEach(function(g){p+=Math.abs(g-c)});var d=p/t[0];l.cci=d!==0?(u-c)/d/.015:0;var v=(o[s-i].high+o[s-i].low+o[s-i].close)/3;n-=v}return l})}},on={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=Math.ceil(t[1]/2.5+1),n=Math.ceil(t[2]/2.5+1),r=Math.ceil(t[3]/2.5+1),a=Math.ceil(t[4]/2.5+1),s=0,l=[],u=0,c=[],h=0,p=[],d=0,v=[],g=[];return o.forEach(function(f,y){var x,_,b,C,T,w={},E=(x=o[y-1])!==null&&x!==void 0?x:f,P=(E.high+E.close+E.low+E.open)/4,D=Math.max(0,f.high-P),F=Math.max(0,P-f.low);y>=t[0]-1&&(w.cr=F!==0?D/F*100:0,s+=w.cr,u+=w.cr,h+=w.cr,d+=w.cr,y>=t[0]+t[1]-2&&(l.push(s/t[1]),y>=t[0]+t[1]+i-3&&(w.ma1=l[l.length-1-i]),s-=(_=g[y-(t[1]-1)].cr)!==null&&_!==void 0?_:0),y>=t[0]+t[2]-2&&(c.push(u/t[2]),y>=t[0]+t[2]+n-3&&(w.ma2=c[c.length-1-n]),u-=(b=g[y-(t[2]-1)].cr)!==null&&b!==void 0?b:0),y>=t[0]+t[3]-2&&(p.push(h/t[3]),y>=t[0]+t[3]+r-3&&(w.ma3=p[p.length-1-r]),h-=(C=g[y-(t[3]-1)].cr)!==null&&C!==void 0?C:0),y>=t[0]+t[4]-2&&(v.push(d/t[4]),y>=t[0]+t[4]+a-3&&(w.ma4=v[v.length-1-a]),d-=(T=g[y-(t[4]-1)].cr)!==null&&T!==void 0?T:0)),g.push(w)}),g}},rn={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,r=0,a=0,s=[];return o.forEach(function(l,u){var c,h={},p=l.close;n+=p,r+=p;var d=0,v=0;if(u>=t[0]-1&&(d=n/t[0],n-=o[u-(t[0]-1)].close),u>=t[1]-1&&(v=r/t[1],r-=o[u-(t[1]-1)].close),u>=i-1){var g=d-v;h.dma=g,a+=g,u>=i+t[2]-2&&(h.ama=a/t[2],a-=(c=s[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(h)}),s}},an={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=0,a=0,s=0,l=0,u=0,c=0,h=[];return o.forEach(function(p,d){var v,g,f={},y=(v=o[d-1])!==null&&v!==void 0?v:p,x=y.close,_=p.high,b=p.low,C=_-b,T=Math.abs(_-x),w=Math.abs(x-b),E=_-y.high,P=y.low-b,D=Math.max(Math.max(C,T),w),F=E>0&&E>P?E:0,O=P>0&&P>E?P:0;if(i+=D,n+=F,r+=O,d>=t[0]-1){d>t[0]-1?(a=a-a/t[0]+D,s=s-s/t[0]+F,l=l-l/t[0]+O):(a=i,s=n,l=r);var M=0,k=0;a!==0&&(M=100*s/a,k=100*l/a),f.pdi=M,f.mdi=k;var I=0;k+M!==0&&(I=Math.abs(k-M)/(k+M)*100),u+=I,d>=2*t[0]-2&&(c=d>2*t[0]-2?(c*(t[0]-1)+I)/t[0]:u/t[0],f.adx=c,d>=2*t[0]+t[1]-3&&(f.adxr=(((g=h[d-(t[1]-1)].adx)!==null&&g!==void 0?g:0)+c)/2))}h.push(f)}),h}},sn={name:"EMA",shortName:"EMA",series:m.IndicatorSeries.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(o){return o.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(o,e){var t=e.calcParams,i=e.figures,n=0,r=[];return o.map(function(a,s){var l={},u=a.close;return n+=u,t.forEach(function(c,h){s>=c-1&&(r[h]=s>c-1?(2*u+(c-1)*r[h])/(c+1):n/c,l[i[h].key]=r[h])}),l})}},ln={name:"MA",shortName:"MA",series:m.IndicatorSeries.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(o){return o.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(o,e){var t=e.calcParams,i=e.figures,n=[];return o.map(function(r,a){var s={},l=r.close;return t.forEach(function(u,c){var h;n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1&&(s[i[c].key]=n[c]/u,n[c]-=o[a-(u-1)].close)}),s})}},un={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(o){var e,t,i=o.data,n=o.indicator,r=o.defaultStyles,a=i.prev,s=i.current,l=(e=a?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return c=u>0?G(n.styles,"bars[0].upColor",r.bars[0].upColor):u<0?G(n.styles,"bars[0].downColor",r.bars[0].downColor):G(n.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor),{style:l<u?m.PolygonType.Stroke:m.PolygonType.Fill,color:c,borderColor:c}}}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=0,a=0,s=0,l=0,u=Math.max(t[0],t[1]);return o.map(function(c,h){var p={},d=c.close;return i+=d,h>=t[0]-1&&(n=h>t[0]-1?(2*d+(t[0]-1)*n)/(t[0]+1):i/t[0]),h>=t[1]-1&&(r=h>t[1]-1?(2*d+(t[1]-1)*r)/(t[1]+1):i/t[1]),h>=u-1&&(a=n-r,p.dif=a,s+=a,h>=u+t[2]-2&&(l=h>u+t[2]-2?(2*a+l*(t[2]-1))/(t[2]+1):s/t[2],p.macd=2*(a-l),p.dea=l)),p})}},cn={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(o){return o.map(function(e,t){var i=t+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(o,e){var t=e.calcParams,i=e.figures,n=[],r=[];return o.map(function(a,s){var l,u={},c=((l=o[s-1])!==null&&l!==void 0?l:a).close,h=a.close-c;return t.forEach(function(p,d){var v,g,f;if(h>0?n[d]=((v=n[d])!==null&&v!==void 0?v:0)+h:r[d]=((g=r[d])!==null&&g!==void 0?g:0)+Math.abs(h),s>=p-1){r[d]!==0?u[i[d].key]=100-100/(1+n[d]/r[d]):u[i[d].key]=0;var y=o[s-(p-1)],x=(f=o[s-p])!==null&&f!==void 0?f:y,_=y.close-x.close;_>0?n[d]-=_:r[d]-=Math.abs(_)}}),u})}},hn={name:"SMA",shortName:"SMA",series:m.IndicatorSeries.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(o,e){var t=e.calcParams,i=0,n=0;return o.map(function(r,a){var s={},l=r.close;return i+=l,a>=t[0]-1&&(n=a>t[0]-1?(l*t[1]+n*(t[0]-t[1]+1))/(t[0]+1):i/t[0],s.sma=n),s})}},dn={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=[];return o.forEach(function(n,r){var a,s,l,u,c={},h=n.close;if(r>=t[0]-1){var p=qe(o.slice(r-(t[0]-1),r+1),"high","low"),d=p[0],v=p[1],g=d-v,f=(h-v)/(g===0?1:g)*100;c.k=((t[1]-1)*((s=(a=i[r-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+f)/t[1],c.d=((t[2]-1)*((u=(l=i[r-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},pn={name:"SAR",shortName:"SAR",series:m.IndicatorSeries.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(o){var e,t,i,n=o.data,r=o.indicator,a=o.defaultStyles,s=n.current;return{color:((e=s?.sar)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER)<(((t=s?.high)!==null&&t!==void 0?t:0)+((i=s?.low)!==null&&i!==void 0?i:0))/2?G(r.styles,"circles[0].upColor",a.circles[0].upColor):G(r.styles,"circles[0].downColor",a.circles[0].downColor)}}}],calc:function(o,e){var t=e.calcParams,i=t[0]/100,n=t[1]/100,r=t[2]/100,a=i,s=-100,l=!1,u=0;return o.map(function(c,h){var p=u,d=c.high,v=c.low;if(l){(s===-100||s<d)&&(s=d,a=Math.min(a+n,r)),u=p+a*(s-p);var g=Math.min(o[Math.max(1,h)-1].low,v);u>c.low?(u=s,a=i,s=-100,l=!l):u>g&&(u=g)}else{(s===-100||s>v)&&(s=v,a=Math.min(a+n,r)),u=p+a*(s-p);var f=Math.max(o[Math.max(1,h)-1].high,d);u<c.high?(u=s,a=0,s=-100,l=!l):u<f&&(u=f)}return{high:d,low:v,sar:u}})}};function oi(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(o){var e=o.data,t=o.indicator,i=o.defaultStyles,n=e.current,r=G(t.styles,"bars[0].noChangeColor",i.bars[0].noChangeColor);return S(n)&&(n.close>n.open?r=G(t.styles,"bars[0].upColor",i.bars[0].upColor):n.close<n.open&&(r=G(t.styles,"bars[0].downColor",i.bars[0].downColor))),{color:r}}}}var gn={name:"VOL",shortName:"VOL",series:m.IndicatorSeries.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},oi()],regenerateFigures:function(o){var e=o.map(function(t,i){return{key:"ma".concat(i+1),title:"MA".concat(t,": "),type:"line"}});return e.push(oi()),e},calc:function(o,e){var t=e.calcParams,i=e.figures,n=[];return o.map(function(r,a){var s,l=(s=r.volume)!==null&&s!==void 0?s:0,u={volume:l,open:r.open,close:r.close};return t.forEach(function(c,h){var p,d;n[h]=((p=n[h])!==null&&p!==void 0?p:0)+l,a>=c-1&&(u[i[h].key]=n[h]/c,n[h]-=(d=o[a-(c-1)].volume)!==null&&d!==void 0?d:0)}),u})}},vn={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(o){return o.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(o,e){var t=e.calcParams,i=e.figures;return o.map(function(n,r){var a={},s=n.close;return t.forEach(function(l,u){var c=l-1;if(r>=c){var h=qe(o.slice(r-c,r+1),"high","low"),p=h[0],d=p-h[1];a[i[u].key]=d===0?0:(s-p)/d*100}}),a})}},ne={},fn=[$i,Qi,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(o){return o.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(o,e){var t=e.calcParams,i=e.figures,n=[];return o.map(function(r,a){var s={},l=r.close;return t.forEach(function(u,c){var h;if(n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1){var p=n[c]/t[c];s[i[c].key]=(l-p)/p*100,n[c]-=o[a-(u-1)].close}}),s})}},tn,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=0,a=0;return o.map(function(s,l){var u,c,h={},p=s.high,d=s.low,v=s.open,g=((u=o[l-1])!==null&&u!==void 0?u:s).close;if(r+=p-v,a+=v-d,i+=p-g,n+=g-d,l>=t[0]-1){h.ar=a!==0?r/a*100:0,h.br=n!==0?i/n*100:0;var f=o[l-(t[0]-1)],y=f.high,x=f.low,_=f.open,b=((c=o[l-t[0]])!==null&&c!==void 0?c:o[l-(t[0]-1)]).close;i-=y-b,n-=b-x,r-=y-_,a-=_-x}return h})}},en,nn,on,rn,an,{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=[];return o.map(function(r,a){var s,l={};if(a>0){var u=o[a-1],c=r.high,h=r.low,p=(s=r.volume)!==null&&s!==void 0?s:0,d=(c+h)/2-(u.high+u.low)/2;if(p===0||c-h==0)l.emv=0;else{var v=p/1e8/(c-h);l.emv=d/v}i+=l.emv,n.push(l.emv),a>=t[0]&&(l.maEmv=i/t[0],i-=n[a-t[0]])}return l})}},sn,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=[];return o.forEach(function(r,a){var s,l={};if(a>=t[0]){var u=r.close,c=o[a-t[0]].close;l.mtm=u-c,i+=l.mtm,a>=t[0]+t[1]-1&&(l.maMtm=i/t[1],i-=(s=n[a-(t[1]-1)].mtm)!==null&&s!==void 0?s:0)}n.push(l)}),n}},ln,un,{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=[];return o.forEach(function(a,s){var l,u,c,h,p=(l=o[s-1])!==null&&l!==void 0?l:a;a.close<p.close?n-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>p.close&&(n+=(c=a.volume)!==null&&c!==void 0?c:0);var d={obv:n};i+=n,s>=t[0]-1&&(d.maObv=i/t[0],i-=(h=r[s-(t[0]-1)].obv)!==null&&h!==void 0?h:0),r.push(d)}),r}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(o){var e=0;return o.map(function(t,i){var n,r,a={},s=t.close,l=(n=t.volume)!==null&&n!==void 0?n:1,u=((r=o[i-1])!==null&&r!==void 0?r:t).close,c=0,h=u*l;return h!==0&&(c=(s-u)/h),e+=c,a.pvt=e,a})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=[],a=[];return o.forEach(function(s,l){var u,c,h={},p=((u=o[l-1])!==null&&u!==void 0?u:s).close,d=s.close-p>0?1:0;r.push(d),i+=d,l>=t[0]-1&&(h.psy=i/t[0]*100,n+=h.psy,l>=t[0]+t[1]-2&&(h.maPsy=n/t[1],n-=(c=a[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),i-=r[l-(t[0]-1)]),a.push(h)}),a}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=[],n=0;return o.forEach(function(r,a){var s,l,u={};if(a>=t[0]-1){var c=r.close,h=((s=o[a-t[0]])!==null&&s!==void 0?s:o[a-(t[0]-1)]).close;u.roc=h!==0?(c-h)/h*100:0,n+=u.roc,a>=t[0]-1+t[1]-1&&(u.maRoc=n/t[1],n-=(l=i[a-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},cn,hn,dn,pn,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=0,a=0,s=0,l=0,u=0,c=[];return o.forEach(function(h,p){var d,v={},g=h.close;if(i+=g,p>=t[0]-1&&(n=p>t[0]-1?(2*g+(t[0]-1)*n)/(t[0]+1):i/t[0],s+=n,p>=2*t[0]-2&&(r=p>2*t[0]-2?(2*n+(t[0]-1)*r)/(t[0]+1):s/t[0],l+=r,p>=3*t[0]-3))){var f=0,y=0;p>3*t[0]-3?y=((f=(2*r+(t[0]-1)*a)/(t[0]+1))-a)/a*100:f=l/t[0],a=f,v.trix=y,u+=y,p>=3*t[0]+t[1]-4&&(v.maTrix=u/t[1],u-=(d=c[p-(t[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(v)}),c}},gn,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(o,e){var t=e.calcParams,i=0,n=0,r=0,a=0,s=[];return o.forEach(function(l,u){var c,h,p,d,v,g={},f=l.close,y=((c=o[u-1])!==null&&c!==void 0?c:l).close,x=(h=l.volume)!==null&&h!==void 0?h:0;if(f>y?i+=x:f<y?n+=x:r+=x,u>=t[0]-1){var _=r/2;g.vr=n+_===0?0:(i+_)/(n+_)*100,a+=g.vr,u>=t[0]+t[1]-2&&(g.maVr=a/t[1],a-=(p=s[u-(t[1]-1)].vr)!==null&&p!==void 0?p:0);var b=o[u-(t[0]-1)],C=(d=o[u-t[0]])!==null&&d!==void 0?d:b,T=b.close,w=(v=b.volume)!==null&&v!==void 0?v:0;T>C.close?i-=w:T<C.close?n-=w:r-=w}s.push(g)}),s}},vn];function ri(o){var e;return(e=ne[o])!==null&&e!==void 0?e:null}fn.forEach(function(o){ne[o.name]=He.extend(o)});var yn={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e,t=o.chart,i=o.coordinates,n=o.bounding,r=o.overlay,a=o.yAxis,s=r.points;if(i.length>0){var l=0;(e=a?.isInCandle())===null||e===void 0||e?l=t.getPrecision().price:t.getIndicators({paneId:r.paneId}).forEach(function(v){l=Math.max(l,v.precision)});var u=[],c=[],h=n.width;if(i.length>1&&L(s[0].value)&&L(s[1].value)){var p=i[0].y-i[1].y,d=s[0].value-s[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(v){var g,f=i[1].y+p*v,y=t.getDecimalFold().format(t.getThousandsSeparator().format((((g=s[1].value)!==null&&g!==void 0?g:0)+d*v).toFixed(l)));u.push({coordinates:[{x:0,y:f},{x:h,y:f}]}),c.push({x:0,y:f,text:"".concat(y," (").concat((100*v).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:u},{type:"text",isCheckEvent:!1,attrs:c}]}return[]}},mn={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates,t=o.bounding,i={x:0,y:e[0].y};return S(e[1])&&e[0].x<e[1].x&&(i.x=t.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(o){var e=o.points,t=o.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(o){var e=o.currentStep,t=o.points,i=o.performPoint;e===2&&(t[0].value=i.value)}},Te=function(){function o(){this._children=[],this._callbacks=new Map}return o.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},o.prototype.onEvent=function(e,t,i){var n=this._callbacks.get(e);return!(!S(n)||!this.checkEventOn(t))&&n(t,i)},o.prototype.checkEventOn=function(e){var t,i;try{for(var n=tt(this._children),r=n.next();!r.done;r=n.next())if(r.value.checkEventOn(e))return!0}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!1},o.prototype.dispatchEvent=function(e,t,i){var n=this._children.length-1;if(n>-1){for(var r=n;r>-1;r--)if(this._children[r].dispatchEvent(e,t,i))return!0}return this.onEvent(e,t,i)},o.prototype.addChild=function(e){return this._children.push(e),this},o.prototype.clear=function(){this._children=[]},o}(),ai=function(o){function e(t){var i=o.call(this)||this;return i.attrs=t.attrs,i.styles=t.styles,i}return N(e,o),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var i=function(n){function r(){return n!==null&&n.apply(this,arguments)||this}return N(r,n),r.prototype.checkEventOnImp=function(a,s,l){return t.checkEventOn(a,s,l)},r.prototype.drawImp=function(a,s,l){t.draw(a,s,l)},r}(e);return i},e}(Te);function si(o,e){var t,i,n=[];n=n.concat(e);try{for(var r=tt(n),a=r.next();!a.done;a=r.next()){var s=a.value.coordinates;if(s.length>1)for(var l=1;l<s.length;l++){var u=s[l-1],c=s[l];if(u.x===c.x){if(Math.abs(u.y-o.y)+Math.abs(c.y-o.y)-Math.abs(u.y-c.y)<4&&Math.abs(o.x-u.x)<2)return!0}else{var h=oe(u,c),p=Ce(h,o),d=Math.abs(p-o.y);if(Math.abs(u.x-o.x)+Math.abs(c.x-o.x)-Math.abs(u.x-c.x)<4&&d*d/(h[0]*h[0]+1)<4)return!0}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return!1}function Ce(o,e){return o!==null?e.x*o[0]+o[1]:e.y}function Ut(o,e,t){return Ce(oe(o,e),t)}function oe(o,e){var t=o.x-e.x;if(t!==0){var i=(o.y-e.y)/t;return[i,o.y-i*o.x]}return null}function li(o,e,t){var i=e.length,n=L(t)?t>0&&t<1?t:0:t?.5:0;if(n>0&&i>2){for(var r=e[0].x,a=e[0].y,s=1;s<i-1;s++){var l=e[s-1],u=e[s],c=e[s+1],h=u.x-l.x,p=u.y-l.y,d=c.x-u.x,v=c.y-u.y,g=c.x-l.x,f=c.y-l.y,y=Math.sqrt(h*h+p*p),x=Math.sqrt(d*d+v*v),_=x/(x+y),b=u.x+g*n*_,C=u.y+f*n*_;b=Math.min(b,Math.max(c.x,u.x)),C=Math.min(C,Math.max(c.y,u.y)),b=Math.max(b,Math.min(c.x,u.x)),C=Math.max(C,Math.min(c.y,u.y)),g=b-u.x,f=C-u.y;var T=u.x-g*y/x,w=u.y-f*y/x;T=Math.min(T,Math.max(l.x,u.x)),w=Math.min(w,Math.max(l.y,u.y)),T=Math.max(T,Math.min(l.x,u.x)),w=Math.max(w,Math.min(l.y,u.y)),g=u.x-T,f=u.y-w,b=u.x+g*x/y,C=u.y+f*x/y,o.bezierCurveTo(r,a,T,w,u.x,u.y),r=b,a=C}var E=e[i-1];o.bezierCurveTo(r,a,E.x,E.y,E.x,E.y)}else for(s=1;s<i;s++)o.lineTo(e[s].x,e[s].y)}var _n={name:"line",checkEventOn:si,draw:function(o,e,t){(function(i,n,r){var a=[];a=a.concat(n);var s=r.style,l=s===void 0?m.LineType.Solid:s,u=r.smooth,c=u!==void 0&&u,h=r.size,p=h===void 0?1:h,d=r.color,v=d===void 0?"currentColor":d,g=r.dashedValue,f=g===void 0?[2,2]:g;i.lineWidth=p,i.strokeStyle=v,l===m.LineType.Dashed?i.setLineDash(f):i.setLineDash([]);var y=p%2==1?.5:0;a.forEach(function(x){var _=x.coordinates;_.length>1&&(_.length!==2||_[0].x!==_[1].x&&_[0].y!==_[1].y?(i.save(),p%2==1&&i.translate(.5,.5),i.beginPath(),i.moveTo(_[0].x,_[0].y),li(i,_,c),i.stroke(),i.closePath(),i.restore()):(i.beginPath(),_[0].x===_[1].x?(i.moveTo(_[0].x+y,_[0].y),i.lineTo(_[1].x+y,_[1].y)):(i.moveTo(_[0].x,_[0].y+y),i.lineTo(_[1].x,_[1].y+y)),i.stroke(),i.closePath()))})})(o,e,t)}};function ui(o,e,t){var i=t??0,n=[];if(o.length>1)if(o[0].x===o[1].x){var r=e.height;if(n.push({coordinates:[{x:o[0].x,y:0},{x:o[0].x,y:r}]}),o.length>2){n.push({coordinates:[{x:o[2].x,y:0},{x:o[2].x,y:r}]});for(var a=o[0].x-o[2].x,s=0;s<i;s++){var l=a*(s+1);n.push({coordinates:[{x:o[0].x+l,y:0},{x:o[0].x+l,y:r}]})}}}else{var u=e.width,c=oe(o[0],o[1]),h=c[0],p=c[1];if(n.push({coordinates:[{x:0,y:0*h+p},{x:u,y:u*h+p}]}),o.length>2){var d=o[2].y-h*o[2].x;for(n.push({coordinates:[{x:0,y:0*h+d},{x:u,y:u*h+d}]}),a=p-d,s=0;s<i;s++){var v=p+a*(s+1);n.push({coordinates:[{x:0,y:0*h+v},{x:u,y:u*h+v}]})}}}return n}var xn={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){return[{type:"line",attrs:ui(o.coordinates,o.bounding)}]}},bn={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){return[{type:"line",attrs:ui(o.coordinates,o.bounding,1)}]}},Tn={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e,t=o.chart,i=o.coordinates,n=o.bounding,r=o.overlay,a=o.yAxis,s=0;(e=a?.isInCandle())===null||e===void 0||e?s=t.getPrecision().price:t.getIndicators({paneId:r.paneId}).forEach(function(c){s=Math.max(s,c.precision)});var l=r.points[0].value,u=l===void 0?0:l;return[{type:"line",attrs:{coordinates:[i[0],{x:n.width,y:i[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:i[0].x,y:i[0].y,text:t.getDecimalFold().format(t.getThousandsSeparator().format(u.toFixed(s))),baseline:"bottom"}}]}};function Cn(o,e){if(o.length>1){var t={x:0,y:0};return t=o[0].x===o[1].x&&o[0].y!==o[1].y?o[0].y<o[1].y?{x:o[0].x,y:e.height}:{x:o[0].x,y:0}:o[0].x>o[1].x?{x:0,y:Ut(o[0],o[1],{x:0,y:o[0].y})}:{x:e.width,y:Ut(o[0],o[1],{x:e.width,y:o[0].y})},{coordinates:[o[0],t]}}return[]}var wn={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){return[{type:"line",attrs:Cn(o.coordinates,o.bounding)}]}},Sn={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates,t=o.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Ut(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:Ut(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},En={name:"simpleAnnotation",totalStep:2,styles:{line:{style:m.LineType.Dashed}},createPointFigures:function(o){var e,t=o.overlay,i=o.coordinates,n="";S(t.extendData)&&(n=j(t.extendData)?t.extendData(t):(e=t.extendData)!==null&&e!==void 0?e:"");var r=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:r,y:a},{x:r,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:r,y:s},{x:r-4,y:l},{x:r+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:r,y:l,text:n,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},Pn={name:"simpleTag",totalStep:2,styles:{line:{style:m.LineType.Dashed}},createPointFigures:function(o){var e=o.bounding,t=o.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(o){var e,t,i=o.chart,n=o.overlay,r=o.coordinates,a=o.bounding,s=o.yAxis,l="left",u=0;(e=s?.isFromZero())!==null&&e!==void 0&&e?(l="left",u=0):(l="right",u=a.width);var c="";return S(n.extendData)&&(c=j(n.extendData)?n.extendData(n):(t=n.extendData)!==null&&t!==void 0?t:""),!S(c)&&L(n.points[0].value)&&(c=q(n.points[0].value,i.getPrecision().price)),{type:"text",attrs:{x:u,y:r[0].y,text:c,align:l,baseline:"middle"}}}},Zt={};function In(o){var e;return(e=Zt[o])!==null&&e!==void 0?e:null}[yn,mn,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(o){var e=o.points,t=o.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(o){var e=o.currentStep,t=o.points,i=o.performPoint;e===2&&(t[0].value=i.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates,t=o.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]}}]}},xn,bn,Tn,wn,{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},Sn,{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates,t=o.bounding;if(e.length===2){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=t.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(o){var e=o.points,t=o.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(o){var e=o.currentStep,t=o.points,i=o.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(o){var e=o.points,t=o.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(o){var e=o.currentStep,t=o.points,i=o.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(o){var e=o.coordinates,t=o.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]}},En,Pn].forEach(function(o){Zt[o.name]=Xe.extend(o)});var ci={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function Dn(o){var e;return(e=ci[o])!==null&&e!==void 0?e:null}var K="candle_pane",hi="indicator_pane_",H="x_axis_pane",Mn=1,kn=50,di=9e5,An=function(){function o(e,t){var i,n,r,a,s,l=this;this._styles={grid:{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:m.LineType.Dashed,dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:m.LineType.Dashed,dashedValue:[2,2]}},candle:(s={show:!0,color:W.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},{type:m.CandleType.CandleSolid,bar:{compareRule:wt.CurrentOpen,upColor:W.GREEN,downColor:W.RED,noChangeColor:W.GREY,upBorderColor:W.GREEN,downBorderColor:W.RED,noChangeBorderColor:W.GREY,upWickColor:W.GREEN,downWickColor:W.RED,noChangeWickColor:W.GREY},area:{lineSize:2,lineColor:W.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:St(W.BLUE,.01)},{offset:1,color:St(W.BLUE,.2)}],point:{show:!0,color:W.BLUE,radius:4,rippleColor:St(W.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:A({},s),low:A({},s),last:{show:!0,compareRule:wt.CurrentOpen,upColor:W.GREEN,downColor:W.RED,noChangeColor:W.GREY,line:{show:!0,style:m.LineType.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:m.PolygonType.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:m.LineType.Solid,borderSize:0,borderDashedValue:[2,2],color:W.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:m.TooltipShowRule.Always,showType:m.TooltipShowType.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:m.CandleTooltipRectPosition.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:W.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),indicator:(r=St(W.GREEN,.7),a=St(W.RED,.7),{ohlc:{compareRule:wt.CurrentOpen,upColor:r,downColor:a,noChangeColor:W.GREY},bars:[{style:m.PolygonType.Fill,borderStyle:m.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:r,downColor:a,noChangeColor:W.GREY}],lines:["#FF9600","#935EBD",W.BLUE,"#E11D74","#01C5C4"].map(function(f){return{style:m.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:f}}),circles:[{style:m.PolygonType.Fill,borderStyle:m.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:r,downColor:a,noChangeColor:W.GREY}],lastValueMark:{show:!1,text:{show:!1,style:m.PolygonType.Fill,color:W.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:m.LineType.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:m.TooltipShowRule.Always,showType:m.TooltipShowType.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:W.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),xAxis:Oe(),yAxis:Oe(),separator:{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:St(W.BLUE,.08)},crosshair:Zi(),overlay:(i=St(W.BLUE,.35),n=St(W.BLUE,.25),{point:{color:W.BLUE,borderColor:i,borderSize:1,radius:5,activeColor:W.BLUE,activeBorderColor:i,activeBorderSize:3,activeRadius:5},line:{style:m.LineType.Solid,smooth:!1,color:W.BLUE,size:1,dashedValue:[2,2]},rect:{style:m.PolygonType.Fill,color:n,borderColor:W.BLUE,borderSize:1,borderRadius:0,borderStyle:m.LineType.Solid,borderDashedValue:[2,2]},polygon:{style:m.PolygonType.Fill,color:W.BLUE,borderColor:W.BLUE,borderSize:1,borderStyle:m.LineType.Solid,borderDashedValue:[2,2]},circle:{style:m.PolygonType.Fill,color:n,borderColor:W.BLUE,borderSize:1,borderStyle:m.LineType.Solid,borderDashedValue:[2,2]},arc:{style:m.LineType.Solid,color:W.BLUE,size:1,dashedValue:[2,2]},text:{style:m.PolygonType.Fill,color:W.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:m.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:W.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:W.BLUE}})},this._customApi={formatDate:function(f,y){return Ne(l._dateTimeFormat,f,y)},formatBigNumber:Ve},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(f){return ze(f,l._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(f){return Ye(f,l._decimalFold.threshold)}},this._precision={price:2,volume:0},this._dataList=[],this._loadMoreDataCallback=null,this._loading=!0,this._loadDataMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=10,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeWeightTickMap=new Map,this._timeWeightTickList=[],this._minTimeSpan={compare:Number.MAX_SAFE_INTEGER,calc:di},this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._activeTooltipIcon=null,this._actions=new Map,this._indicators=new Map,this._taskScheduler=new Ji,this._overlays=new Map,this._progressOverlayInfo=null,this._pressedOverlayInfo={paneId:"",overlay:null,figureType:0,figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:0,figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:0,figureIndex:-1,figure:null},this._chart=e,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var u=t??{},c=u.styles,h=u.locale,p=u.timezone,d=u.customApi,v=u.thousandsSeparator,g=u.decimalFold;S(c)&&this.setStyles(c),z(h)&&this.setLocale(h),this.setTimezone(p??""),S(d)&&this.setCustomApi(d),S(v)&&this.setThousandsSeparator(v),S(g)&&this.setDecimalFold(g)}return o.prototype.setStyles=function(e){var t,i,n=null;n=z(e)?Dn(e):e,Y(this._styles,n),st((i=(t=n?.candle)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.custom)&&(this._styles.candle.tooltip.custom=n.candle.tooltip.custom)},o.prototype.getStyles=function(){return this._styles},o.prototype.setCustomApi=function(e){Y(this._customApi,e)},o.prototype.getCustomApi=function(){return this._customApi},o.prototype.setLocale=function(e){this._locale=e},o.prototype.getLocale=function(){return this._locale},o.prototype.setTimezone=function(e){if(!S(this._dateTimeFormat)||this.getTimezone()!==e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};e.length>0&&(t.timeZone=e);var i=null;try{i=new Intl.DateTimeFormat("en",t)}catch{}i!==null&&(this._classifyTimeWeightTicks(this._dataList),this._dateTimeFormat=i)}},o.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},o.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},o.prototype.setThousandsSeparator=function(e){Y(this._thousandsSeparator,e)},o.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},o.prototype.setDecimalFold=function(e){Y(this._decimalFold,e)},o.prototype.getDecimalFold=function(){return this._decimalFold},o.prototype.getPrecision=function(){return this._precision},o.prototype.setPrecision=function(e){Y(this._precision,e),this._synchronizeIndicatorSeriesPrecision()},o.prototype.getDataList=function(){return this._dataList},o.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},o.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},o.prototype.addData=function(e,t,i){var n,r,a,s,l=this,u=!1,c=!1,h=0;if(st(e)){switch(h=e.length,t){case et.Init:this.clearData(),this._dataList=e,this._loadDataMore.backward=(n=i?.backward)!==null&&n!==void 0&&n,this._loadDataMore.forward=(r=i?.forward)!==null&&r!==void 0&&r,this._classifyTimeWeightTicks(this._dataList),this.setOffsetRightDistance(this._offsetRightDistance),c=!0;break;case et.Backward:this._classifyTimeWeightTicks(e,!0),this._dataList=this._dataList.concat(e),this._loadDataMore.backward=(a=i?.backward)!==null&&a!==void 0&&a,c=h>0;break;case et.Forward:this._dataList=e.concat(this._dataList),this._classifyTimeWeightTicks(this._dataList),this._loadDataMore.forward=(s=i?.forward)!==null&&s!==void 0&&s,c=h>0}this._loading=!1,u=!0}else{var p=this._dataList.length,d=e.timestamp,v=G(this._dataList[p-1],"timestamp",0);if(d>v){this._classifyTimeWeightTicks([e],!0),this._dataList.push(e);var g=this.getLastBarRightSideDiffBarCount();g<0&&this.setLastBarRightSideDiffBarCount(--g),h=1,u=!0,c=!0}else d===v&&(this._dataList[p-1]=e,u=!0,c=!0)}u&&c&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this.getIndicatorsByFilter({}).forEach(function(f){l._addIndicatorCalcTask(f,t)}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},o.prototype.setLoadMoreDataCallback=function(e){this._loadMoreDataCallback=e},o.prototype._calcOptimalBarSpace=function(){var e=1-.2*Math.atan(Math.max(4,this._barSpace)-4)/(.5*Math.PI),t=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));t%2==0&&t+2>=this._barSpace&&--t,this._gapBarSpace=Math.max(1,t)},o.prototype._classifyTimeWeightTicks=function(e,t){var i=0,n=null;t!=null&&t?(i=this._dataList.length,n=this._dataList[i-1].timestamp):(this._timeWeightTickMap.clear(),this._minTimeSpan={compare:Number.MAX_SAFE_INTEGER,calc:di}),ii(this._timeWeightTickMap,e,this._dateTimeFormat,i,this._minTimeSpan,n),this._minTimeSpan.compare!==Number.MAX_SAFE_INTEGER&&(this._minTimeSpan.calc=this._minTimeSpan.compare),this._timeWeightTickList=be(this._timeWeightTickMap,this._barSpace,this._styles.xAxis.tickText)},o.prototype.getTimeWeightTickList=function(){return this._timeWeightTickList},o.prototype._adjustVisibleRange=function(){var e,t,i,n,r=this,a=this._dataList.length,s=this._totalBarSpace/this._barSpace,l=0,u=0;this._scrollLimitRole===1?(l=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,u=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(l=this._minVisibleBarCount.left,u=this._minVisibleBarCount.right),l=Math.max(0,l),u=Math.max(0,u);var c=s-Math.min(l,a);this._lastBarRightSideDiffBarCount>c&&(this._lastBarRightSideDiffBarCount=c);var h=-a+Math.min(u,a);this._lastBarRightSideDiffBarCount<h&&(this._lastBarRightSideDiffBarCount=h);var p=Math.round(this._lastBarRightSideDiffBarCount+a+.5),d=p;p>a&&(p=a);var v=Math.round(p-s)-1;v<0&&(v=0);var g=this._lastBarRightSideDiffBarCount>0?Math.round(a+this._lastBarRightSideDiffBarCount-s)-1:v;this._visibleRange={from:v,to:p,realFrom:g,realTo:d},this.executeAction(m.ActionType.OnVisibleRangeChange,this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var f=g;f<d;f++){var y=this._dataList[f],x=this.dataIndexToCoordinate(f);this._visibleRangeDataList.push({dataIndex:f,x,data:{prev:(e=this._dataList[f-1])!==null&&e!==void 0?e:y,current:y,next:(t=this._dataList[f-1])!==null&&t!==void 0?t:y}}),S(y)&&(this._visibleRangeHighLowPrice[0].price<y.high&&(this._visibleRangeHighLowPrice[0].price=y.high,this._visibleRangeHighLowPrice[0].x=x),this._visibleRangeHighLowPrice[1].price>y.low&&(this._visibleRangeHighLowPrice[1].price=y.low,this._visibleRangeHighLowPrice[1].x=x))}if(!this._loading&&S(this._loadMoreDataCallback)){var _=null;v===0?this._loadDataMore.forward&&(this._loading=!0,_={type:et.Forward,data:(i=this._dataList[0])!==null&&i!==void 0?i:null,callback:function(b,C){r.addData(b,et.Forward,{forward:C!=null&&C,backward:C!=null&&C})}}):p===a&&this._loadDataMore.backward&&(this._loading=!0,_={type:et.Backward,data:(n=this._dataList[a-1])!==null&&n!==void 0?n:null,callback:function(b,C){r.addData(b,et.Backward,{forward:C!=null&&C,backward:C!=null&&C})}}),S(_)&&this._loadMoreDataCallback(_)}},o.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},o.prototype.setBarSpace=function(e,t){e<Mn||e>kn||this._barSpace===e||(this._barSpace=e,this._timeWeightTickList=be(this._timeWeightTickMap,this._barSpace,this._styles.xAxis.tickText),this._calcOptimalBarSpace(),t?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},o.prototype.setTotalBarSpace=function(e){this._totalBarSpace!==e&&(this._totalBarSpace=e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},o.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,e):e,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,t!=null&&t&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})),this},o.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},o.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},o.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},o.prototype.setLastBarRightSideDiffBarCount=function(e){this._lastBarRightSideDiffBarCount=e},o.prototype.setMaxOffsetLeftDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.left=e},o.prototype.setMaxOffsetRightDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.right=e},o.prototype.setLeftMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.left=e},o.prototype.setRightMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.right=e},o.prototype.getVisibleRange=function(){return this._visibleRange},o.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},o.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0});var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this.executeAction(m.ActionType.OnScroll,{distance:n})}},o.prototype.getDataByDataIndex=function(e){var t;return(t=this._dataList[e])!==null&&t!==void 0?t:null},o.prototype.coordinateToFloatIndex=function(e){var t=this._dataList.length,i=(this._totalBarSpace-e)/this._barSpace,n=t+this._lastBarRightSideDiffBarCount-i;return Math.round(1e6*n)/1e6},o.prototype.dataIndexToTimestamp=function(e){var t=this._dataList.length;if(t===0)return null;var i=this.getDataByDataIndex(e);if(S(i))return i.timestamp;var n=t-1;return e>n?this._dataList[n].timestamp+this._minTimeSpan.calc*(e-n):e<0?this._dataList[0].timestamp-this._minTimeSpan.calc*Math.abs(e):null},o.prototype.timestampToDataIndex=function(e){var t=this._dataList.length;if(t===0)return 0;var i=t-1,n=this._dataList[i].timestamp;if(e>n)return i+Math.floor((e-n)/this._minTimeSpan.calc);var r=this._dataList[0].timestamp;return e<r?Math.floor((e-r)/this._minTimeSpan.calc):_e(this._dataList,"timestamp",e)},o.prototype.dataIndexToCoordinate=function(e){var t=this._dataList.length+this._lastBarRightSideDiffBarCount-e;return Math.floor(this._totalBarSpace-(t-.5)*this._barSpace+.5)},o.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},o.prototype.zoom=function(e,t){var i,n=this;if(this._zoomEnabled){var r=t??null;L(r?.x)||(r={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var a=r.x,s=this.coordinateToFloatIndex(a),l=this._barSpace,u=this._barSpace+e*(this._barSpace/10);this.setBarSpace(u,function(){n._lastBarRightSideDiffBarCount+=s-n.coordinateToFloatIndex(a)});var c=this._barSpace/l;c!==1&&this.executeAction(m.ActionType.OnZoom,{scale:c})}},o.prototype.setZoomEnabled=function(e){this._zoomEnabled=e},o.prototype.isZoomEnabled=function(){return this._zoomEnabled},o.prototype.setScrollEnabled=function(e){this._scrollEnabled=e},o.prototype.isScrollEnabled=function(){return this._scrollEnabled},o.prototype.setCrosshair=function(e,t){var i,n=t??{},r=n.notInvalidate,a=n.notExecuteAction,s=e??{},l=0,u=0;u=L(s.x)?(l=this.coordinateToDataIndex(s.x))<0?0:l>this._dataList.length-1?this._dataList.length-1:l:l=this._dataList.length-1;var c=this._dataList[u],h=this.dataIndexToCoordinate(l),p=this._crosshair.x,d=this._crosshair.y,v=this._crosshair.paneId;this._crosshair=A(A({},s),{realX:h,kLineData:c,realDataIndex:l,dataIndex:u,timestamp:(i=this.dataIndexToTimestamp(l))!==null&&i!==void 0?i:void 0}),p===s.x&&d===s.y&&v===s.paneId||(!S(c)||a!=null&&a||this._chart.crosshairChange(this._crosshair),r!=null&&r||this._chart.updatePane(1))},o.prototype.getCrosshair=function(){return this._crosshair},o.prototype.setActiveTooltipIcon=function(e){this._activeTooltipIcon=e??null},o.prototype.getActiveTooltipIcon=function(){return this._activeTooltipIcon},o.prototype.executeAction=function(e,t){var i;(i=this._actions.get(e))===null||i===void 0||i.execute(t)},o.prototype.subscribeAction=function(e,t){var i;this._actions.has(e)||this._actions.set(e,new Ki),(i=this._actions.get(e))===null||i===void 0||i.subscribe(t)},o.prototype.unsubscribeAction=function(e,t){var i=this._actions.get(e);S(i)&&(i.unsubscribe(t),i.isEmpty()&&this._actions.delete(e))},o.prototype.hasAction=function(e){var t=this._actions.get(e);return S(t)&&!t.isEmpty()},o.prototype._sortIndicators=function(e){var t;z(e)?(t=this._indicators.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._indicators.forEach(function(i){i.sort(function(n,r){return n.zLevel-r.zLevel})})},o.prototype._addIndicatorCalcTask=function(e,t){var i=this;this._taskScheduler.addTask({id:Ke(e.id),handler:function(){var n;(n=e.onDataStateChange)===null||n===void 0||n.call(e,{state:Gt.Loading,type:t,indicator:e}),e.calcImp(i._dataList).then(function(r){var a;r&&(i._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),(a=e.onDataStateChange)===null||a===void 0||a.call(e,{state:Gt.Ready,type:t,indicator:e}))}).catch(function(){var r;(r=e.onDataStateChange)===null||r===void 0||r.call(e,{state:Gt.Error,type:t,indicator:e})})}})},o.prototype.addIndicator=function(e,t,i){var n=e.name;if(this.getIndicatorsByFilter(e).length>0)return!1;var r=this.getIndicatorsByPaneId(t),a=new(ri(n));return this._synchronizeIndicatorSeriesPrecision(a),a.paneId=t,a.override(e),i||(this.removeIndicator({paneId:t}),r=[]),r.push(a),this._indicators.set(t,r),this._sortIndicators(t),this._addIndicatorCalcTask(a,et.Init),!0},o.prototype.getIndicatorsByPaneId=function(e){var t;return(t=this._indicators.get(e))!==null&&t!==void 0?t:[]},o.prototype.getIndicatorsByFilter=function(e){var t=e.paneId,i=e.name,n=e.id,r=function(s){return S(n)?s.id===n:!S(i)||s.name===i},a=[];return S(t)?a=a.concat(this.getIndicatorsByPaneId(t).filter(r)):this._indicators.forEach(function(s){a=a.concat(s.filter(r))}),a},o.prototype.removeIndicator=function(e){var t=this,i=!1;return this.getIndicatorsByFilter(e).forEach(function(n){var r=t.getIndicatorsByPaneId(n.paneId),a=r.findIndex(function(s){return s.id===n.id});a>-1&&(t._taskScheduler.removeTask(Ke(n.id)),r.splice(a,1),i=!0),r.length===0&&t._indicators.delete(n.paneId)}),i},o.prototype.hasIndicators=function(e){return this._indicators.has(e)},o.prototype._synchronizeIndicatorSeriesPrecision=function(e){var t=this._precision,i=t.price,n=t.volume,r=function(a){switch(a.series){case m.IndicatorSeries.Price:a.setSeriesPrecision(i);break;case m.IndicatorSeries.Volume:a.setSeriesPrecision(n)}};S(e)?r(e):this._indicators.forEach(function(a){a.forEach(function(s){r(s)})})},o.prototype.overrideIndicator=function(e){var t=this,i=!1,n=!1;return this.getIndicatorsByFilter(e).forEach(function(r){r.override(e);var a=r.shouldUpdateImp(),s=a.calc,l=a.draw;a.sort&&(n=!0),s?t._addIndicatorCalcTask(r,et.Update):l&&(i=!0)}),n&&this._sortIndicators(),!!i&&(this._chart.layout({update:!0}),!0)},o.prototype.getOverlaysByFilter=function(e){var t,i=e.id,n=e.groupId,r=e.paneId,a=e.name,s=function(c){return S(i)?c.id===i:S(n)?c.groupId===n&&(!S(a)||c.name===a):!S(a)||c.name===a},l=[];S(r)?l=l.concat(this.getOverlaysByPaneId(r).filter(s)):this._overlays.forEach(function(c){l=l.concat(c.filter(s))});var u=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay;return S(u)&&s(u)&&l.push(u),l},o.prototype.getOverlaysByPaneId=function(e){var t;if(!z(e)){var i=[];return this._overlays.forEach(function(n){i=i.concat(n)}),i}return(t=this._overlays.get(e))!==null&&t!==void 0?t:[]},o.prototype._sortOverlays=function(e){var t;z(e)?(t=this._overlays.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._overlays.forEach(function(i){i.sort(function(n,r){return n.zLevel-r.zLevel})})},o.prototype.addOverlays=function(e,t){var i=this,n=[],r=e.map(function(a,s){var l,u,c,h,p,d,v,g;if(S(a.id)){var f=null;try{for(var y=tt(i._overlays),x=y.next();!x.done;x=y.next())if(S(C=pt(x.value,2)[1].find(function(E){return E.id===a.id}))){f=C;break}}catch(E){l={error:E}}finally{try{x&&!x.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}if(S(f))return a.id}var _=In(a.name);if(S(_)){var b=(c=a.id)!==null&&c!==void 0?c:ie("overlay_"),C=new _,T=(h=a.paneId)!==null&&h!==void 0?h:K;a.id=b,(p=a.groupId)!==null&&p!==void 0||(a.groupId=b);var w=i.getOverlaysByPaneId(T).length;return(d=a.zLevel)!==null&&d!==void 0||(a.zLevel=w),C.override(a),n.includes(T)||n.push(T),C.isDrawing()?i._progressOverlayInfo={paneId:T,overlay:C,appointPaneFlag:t[s]}:(i._overlays.has(T)||i._overlays.set(T,[]),(v=i._overlays.get(T))===null||v===void 0||v.push(C)),C.isStart()&&((g=C.onDrawStart)===null||g===void 0||g.call(C,{overlay:C,chart:i._chart})),b}return null});return n.length>0&&(this._sortOverlays(),n.forEach(function(a){i._chart.updatePane(1,a)}),this._chart.updatePane(1,H)),r},o.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},o.prototype.progressOverlayComplete=function(){var e;if(this._progressOverlayInfo!==null){var t=this._progressOverlayInfo,i=t.overlay,n=t.paneId;i.isDrawing()||(this._overlays.has(n)||this._overlays.set(n,[]),(e=this._overlays.get(n))===null||e===void 0||e.push(i),this._sortOverlays(n),this._progressOverlayInfo=null)}},o.prototype.updateProgressOverlayInfo=function(e,t){this._progressOverlayInfo!==null&&(Ht(t)&&t&&(this._progressOverlayInfo.appointPaneFlag=t),this._progressOverlayInfo.paneId=e,this._progressOverlayInfo.overlay.override({paneId:e}))},o.prototype.overrideOverlay=function(e){var t=this,i=!1,n=[];return this.getOverlaysByFilter(e).forEach(function(r){r.override(e);var a=r.shouldUpdate(),s=a.sort,l=a.draw;s&&(i=!0),(s||l)&&(n.includes(r.paneId)||n.push(r.paneId))}),i&&this._sortOverlays(),n.length>0&&(n.forEach(function(r){t._chart.updatePane(1,r)}),this._chart.updatePane(1,H),!0)},o.prototype.removeOverlay=function(e){var t=this,i=[];return this.getOverlaysByFilter(e).forEach(function(n){var r,a=n.paneId,s=t.getOverlaysByPaneId(n.paneId);if((r=n.onRemoved)===null||r===void 0||r.call(n,{overlay:n,chart:t._chart}),i.includes(a)||i.push(a),n.isDrawing())t._progressOverlayInfo=null;else{var l=s.findIndex(function(u){return u.id===n.id});l>-1&&s.splice(l,1)}s.length===0&&t._overlays.delete(a)}),i.length>0&&(i.forEach(function(n){t._chart.updatePane(1,n)}),this._chart.updatePane(1,H),!0)},o.prototype.setPressedOverlayInfo=function(e){this._pressedOverlayInfo=e},o.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},o.prototype.setHoverOverlayInfo=function(e,t){var i,n=this._hoverOverlayInfo,r=n.overlay,a=n.figureType,s=n.figureIndex,l=n.figure,u=e.overlay;if((r?.id!==u?.id||a!==e.figureType||s!==e.figureIndex)&&(this._hoverOverlayInfo=e,r?.id!==u?.id)){var c=!1,h=!1;r!==null&&(r.override({zLevel:r.getPrevZLevel()}),h=!0,j(r.onMouseLeave)&&lt("onMouseLeave",l)&&(r.onMouseLeave(A({chart:this._chart,overlay:r,figure:l??void 0},t)),c=!0)),u!==null&&(u.setPrevZLevel(u.zLevel),u.override({zLevel:Number.MAX_SAFE_INTEGER}),h=!0,j(u.onMouseEnter)&&lt("onMouseEnter",e.figure)&&(u.onMouseEnter(A({chart:this._chart,overlay:u,figure:(i=e.figure)!==null&&i!==void 0?i:void 0},t)),c=!0)),h&&this._sortOverlays(),c||this._chart.updatePane(1)}},o.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},o.prototype.setClickOverlayInfo=function(e,t){var i,n,r,a,s,l,u=this._clickOverlayInfo,c=u.paneId,h=u.overlay,p=u.figureType,d=u.figure,v=u.figureIndex,g=e.overlay;(i=g?.isDrawing())!==null&&i!==void 0&&i||!lt("onClick",e.figure)||(n=g?.onClick)===null||n===void 0||n.call(g,A({chart:this._chart,overlay:g,figure:(r=e.figure)!==null&&r!==void 0?r:void 0},t)),h?.id===g?.id&&p===e.figureType&&v===e.figureIndex||(this._clickOverlayInfo=e,h?.id!==g?.id&&(lt("onDeselected",d)&&((a=h?.onDeselected)===null||a===void 0||a.call(h,A({chart:this._chart,overlay:h,figure:d??void 0},t))),lt("onSelected",e.figure)&&((s=g?.onSelected)===null||s===void 0||s.call(g,A({chart:this._chart,overlay:g,figure:(l=e.figure)!==null&&l!==void 0?l:void 0},t))),this._chart.updatePane(1,e.paneId),c!==e.paneId&&this._chart.updatePane(1,c),this._chart.updatePane(1,H)))},o.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},o.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},o.prototype.isOverlayDrawing=function(){var e,t;return(t=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay.isDrawing())!==null&&t!==void 0&&t},o.prototype.clearData=function(){this._loadDataMore.backward=!1,this._loadDataMore.forward=!1,this._loading=!0,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeWeightTickMap.clear(),this._timeWeightTickList=[],this._crosshair={},this._activeTooltipIcon=null},o.prototype.getChart=function(){return this._chart},o}(),$="main",ft="xAxis",ut="yAxis",jt="separator",pi=function(){function o(e,t){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Nt,this._mediaQueryListener=function(){var n=Et(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*n),i._nextPixelHeight=Math.round(i._element.clientHeight*n),i._resetPixelRatio()},this._listener=t,this._element=gt("canvas",e),this._ctx=this._element.getContext("2d"),function(){return Be(this,void 0,void 0,function(){return Le(this,function(n){switch(n.label){case 0:return[4,new Promise(function(r){var a=new ResizeObserver(function(s){r(s.every(function(l){return"devicePixelContentBoxSize"in l})),a.disconnect()});a.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,n.sent()]}})})}().then(function(n){i._supportedDevicePixelContentBox=n,n?(i._resizeObserver=new ResizeObserver(function(r){var a=r.find(function(l){return l.target===i._element}),s=a?.devicePixelContentBoxSize[0];S(s)&&(i._nextPixelWidth=s.inlineSize,i._nextPixelHeight=s.blockSize,i._pixelWidth===i._nextPixelWidth&&i._pixelHeight===i._nextPixelHeight||i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(Et(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(n){return!1})}return o.prototype._resetPixelRatio=function(){var e=this;this._executeListener(function(){var t=e._element.clientWidth,i=e._element.clientHeight;e._width=t,e._height=i,e._pixelWidth=e._nextPixelWidth,e._pixelHeight=e._nextPixelHeight,e._element.width=e._nextPixelWidth,e._element.height=e._nextPixelHeight;var n=e._nextPixelWidth/t,r=e._nextPixelHeight/i;e._ctx.scale(n,r)})},o.prototype._executeListener=function(e){var t=this;this._requestAnimationId===Nt&&(this._requestAnimationId=ee(function(){t._ctx.clearRect(0,0,t._width,t._height),e?.(),t._listener(),t._requestAnimationId=Nt}))},o.prototype.update=function(e,t){if(this._width!==e||this._height!==t){if(this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px"),!this._supportedDevicePixelContentBox){var i=Et(this._element);this._nextPixelWidth=Math.round(e*i),this._nextPixelHeight=Math.round(t*i),this._resetPixelRatio()}}else this._executeListener()},o.prototype.getElement=function(){return this._element},o.prototype.getContext=function(){return this._ctx},o.prototype.destroy=function(){S(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),S(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},o}(),gi=function(o){function e(t,i){var n=o.call(this)||this;return n._bounding=te(),n._pane=i,n._rootContainer=t,n._container=n.createContainer(),t.appendChild(n._container),n}return N(e,o),e.prototype.setBounding=function(t){return Y(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(Te),we=function(o){function e(t,i){var n=o.call(this,t,i)||this;n._mainCanvas=new pi({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateMain(n._mainCanvas.getContext())}),n._overlayCanvas=new pi({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateOverlay(n._overlayCanvas.getContext())});var r=n.getContainer();return r.appendChild(n._mainCanvas.getElement()),r.appendChild(n._overlayCanvas.getElement()),n}return N(e,o),e.prototype.createContainer=function(){return gt("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,i,n){var r=i.width,a=i.height,s=i.left;t.style.left="".concat(s,"px");var l=n,u=t.clientWidth,c=t.clientHeight;switch(r===u&&a===c||(t.style.width="".concat(r,"px"),t.style.height="".concat(a,"px"),l=3),l){case 0:this._mainCanvas.update(r,a);break;case 1:this._overlayCanvas.update(r,a);break;case 3:case 4:this._mainCanvas.update(r,a),this._overlayCanvas.update(r,a)}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,r=i.height,a=gt("canvas",{width:"".concat(n,"px"),height:"".concat(r,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Et(a);return a.width=n*l,a.height=r*l,s.scale(l,l),s.drawImage(this._mainCanvas.getElement(),0,0,n,r),t&&s.drawImage(this._overlayCanvas.getElement(),0,0,n,r),a},e}(gi);function vi(o,e){var t,i,n=[];n=n.concat(e);try{for(var r=tt(n),a=r.next();!a.done;a=r.next()){var s=a.value,l=s.x,u=s.y,c=s.r,h=o.x-l,p=o.y-u;if(!(h*h+p*p>c*c))return!0}}catch(d){t={error:d}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return!1}var Rn={name:"circle",checkEventOn:vi,draw:function(o,e,t){(function(i,n,r){var a=[];a=a.concat(n);var s=r.style,l=s===void 0?m.PolygonType.Fill:s,u=r.color,c=u===void 0?"currentColor":u,h=r.borderSize,p=h===void 0?1:h,d=r.borderColor,v=d===void 0?"currentColor":d,g=r.borderStyle,f=g===void 0?m.LineType.Solid:g,y=r.borderDashedValue,x=y===void 0?[2,2]:y,_=!(l!==m.PolygonType.Fill&&r.style!==m.PolygonType.StrokeFill||z(c)&&Lt(c));_&&(i.fillStyle=c,a.forEach(function(b){var C=b.x,T=b.y,w=b.r;i.beginPath(),i.arc(C,T,w,0,2*Math.PI),i.closePath(),i.fill()})),(l===m.PolygonType.Stroke||r.style===m.PolygonType.StrokeFill)&&p>0&&!Lt(v)&&(i.strokeStyle=v,i.lineWidth=p,f===m.LineType.Dashed?i.setLineDash(x):i.setLineDash([]),a.forEach(function(b){var C=b.x,T=b.y,w=b.r;(!_||w>p)&&(i.beginPath(),i.arc(C,T,w,0,2*Math.PI),i.closePath(),i.stroke())}))})(o,e,t)}};function fi(o,e){var t,i,n=[];n=n.concat(e);try{for(var r=tt(n),a=r.next();!a.done;a=r.next()){for(var s=a.value,l=!1,u=s.coordinates,c=0,h=u.length-1;c<u.length;h=c++)u[c].y>o.y!=u[h].y>o.y&&o.x<(u[h].x-u[c].x)*(o.y-u[c].y)/(u[h].y-u[c].y)+u[c].x&&(l=!l);if(l)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return!1}var Fn={name:"polygon",checkEventOn:fi,draw:function(o,e,t){(function(i,n,r){var a=[];a=a.concat(n);var s=r.style,l=s===void 0?m.PolygonType.Fill:s,u=r.color,c=u===void 0?"currentColor":u,h=r.borderSize,p=h===void 0?1:h,d=r.borderColor,v=d===void 0?"currentColor":d,g=r.borderStyle,f=g===void 0?m.LineType.Solid:g,y=r.borderDashedValue,x=y===void 0?[2,2]:y;l!==m.PolygonType.Fill&&r.style!==m.PolygonType.StrokeFill||z(c)&&Lt(c)||(i.fillStyle=c,a.forEach(function(_){var b=_.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var C=1;C<b.length;C++)i.lineTo(b[C].x,b[C].y);i.closePath(),i.fill()})),(l===m.PolygonType.Stroke||r.style===m.PolygonType.StrokeFill)&&p>0&&!Lt(v)&&(i.strokeStyle=v,i.lineWidth=p,f===m.LineType.Dashed?i.setLineDash(x):i.setLineDash([]),a.forEach(function(_){var b=_.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var C=1;C<b.length;C++)i.lineTo(b[C].x,b[C].y);i.closePath(),i.stroke()}))})(o,e,t)}};function yi(o,e){var t,i,n=[];n=n.concat(e);try{for(var r=tt(n),a=r.next();!a.done;a=r.next()){var s=a.value,l=s.x,u=s.width;u<4&&(l-=2,u=4);var c=s.y,h=s.height;if(h<4&&(c-=2,h=4),o.x>=l&&o.x<=l+u&&o.y>=c&&o.y<=c+h)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return!1}function mi(o,e,t){var i,n=[];n=n.concat(e);var r=t.style,a=r===void 0?m.PolygonType.Fill:r,s=t.color,l=s===void 0?"transparent":s,u=t.borderSize,c=u===void 0?1:u,h=t.borderColor,p=h===void 0?"transparent":h,d=t.borderStyle,v=d===void 0?m.LineType.Solid:d,g=t.borderRadius,f=g===void 0?0:g,y=t.borderDashedValue,x=y===void 0?[2,2]:y,_=(i=o.roundRect)!==null&&i!==void 0?i:o.rect,b=!(a!==m.PolygonType.Fill&&t.style!==m.PolygonType.StrokeFill||z(l)&&Lt(l));if(b&&(o.fillStyle=l,n.forEach(function(w){var E=w.x,P=w.y,D=w.width,F=w.height;o.beginPath(),_.call(o,E,P,D,F,f),o.closePath(),o.fill()})),(a===m.PolygonType.Stroke||t.style===m.PolygonType.StrokeFill)&&c>0&&!Lt(p)){o.strokeStyle=p,o.fillStyle=p,o.lineWidth=c,v===m.LineType.Dashed?o.setLineDash(x):o.setLineDash([]);var C=c%2==1?.5:0,T=Math.round(2*C);n.forEach(function(w){var E=w.x,P=w.y,D=w.width,F=w.height;D>2*c&&F>2*c?(o.beginPath(),_.call(o,E+C,P+C,D-T,F-T,f),o.closePath(),o.stroke()):b||o.fillRect(E,P,D,F)})}}var Bn={name:"rect",checkEventOn:yi,draw:function(o,e,t){mi(o,e,t)}};function _i(o,e){var t=e.size,i=t===void 0?12:t,n=e.paddingLeft,r=n===void 0?0:n,a=e.paddingTop,s=a===void 0?0:a,l=e.paddingRight,u=l===void 0?0:l,c=e.paddingBottom,h=c===void 0?0:c,p=e.weight,d=p===void 0?"normal":p,v=e.family,g=o.x,f=o.y,y=o.text,x=o.align,_=x===void 0?"left":x,b=o.baseline,C=b===void 0?"top":b,T=o.width,w=o.height,E=T??r+Xt(y,i,d,v)+u,P=w??s+i+h,D=0;switch(_){case"left":case"start":D=g;break;case"right":case"end":D=g-E;break;default:D=g-E/2}var F=0;switch(C){case"top":case"hanging":F=f;break;case"bottom":case"ideographic":case"alphabetic":F=f-P;break;default:F=f-P/2}return{x:D,y:F,width:E,height:P}}function xi(o,e,t){var i,n,r=[];r=r.concat(e);try{for(var a=tt(r),s=a.next();!s.done;s=a.next()){var l=_i(s.value,t),u=l.x,c=l.y,h=l.width,p=l.height;if(o.x>=u&&o.x<=u+h&&o.y>=c&&o.y<=c+p)return!0}}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return!1}var Ln={name:"text",checkEventOn:xi,draw:function(o,e,t){(function(i,n,r){var a=[];a=a.concat(n);var s=r.color,l=s===void 0?"currentColor":s,u=r.size,c=u===void 0?12:u,h=r.family,p=r.weight,d=r.paddingLeft,v=d===void 0?0:d,g=r.paddingTop,f=g===void 0?0:g,y=r.paddingRight,x=y===void 0?0:y,_=a.map(function(b){return _i(b,r)});mi(i,_,A(A({},r),{color:r.backgroundColor})),i.textAlign="left",i.textBaseline="top",i.font=At(c,p,h),i.fillStyle=l,a.forEach(function(b,C){var T=_[C];i.fillText(b.text,T.x+v,T.y+f,T.width-v-x)})})(o,e,t)}};function bi(o,e){var t,i,n,r,a,s,l=[];l=l.concat(e);try{for(var u=tt(l),c=u.next();!c.done;c=u.next()){var h=c.value;if(Math.abs((r=h,a=void 0,s=void 0,a=(n=o).x-r.x,s=n.y-r.y,Math.sqrt(a*a+s*s)-h.r))<2){var p=h.r,d=h.startAngle,v=h.endAngle,g=p*Math.cos(d)+h.x,f=p*Math.sin(d)+h.y,y=p*Math.cos(v)+h.x,x=p*Math.sin(v)+h.y;if(o.x<=Math.max(g,y)+2&&o.x>=Math.min(g,y)-2&&o.y<=Math.max(f,x)+2&&o.y>=Math.min(f,x)-2)return!0}}}catch(_){t={error:_}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return!1}var On={name:"arc",checkEventOn:bi,draw:function(o,e,t){(function(i,n,r){var a=[];a=a.concat(n);var s=r.style,l=s===void 0?m.LineType.Solid:s,u=r.size,c=u===void 0?1:u,h=r.color,p=h===void 0?"currentColor":h,d=r.dashedValue,v=d===void 0?[2,2]:d;i.lineWidth=c,i.strokeStyle=p,l===m.LineType.Dashed?i.setLineDash(v):i.setLineDash([]),a.forEach(function(g){var f=g.x,y=g.y,x=g.r,_=g.startAngle,b=g.endAngle;i.beginPath(),i.arc(f,y,x,_,b),i.stroke(),i.closePath()})})(o,e,t)}},qt={};[Rn,_n,Fn,Bn,Ln,On].forEach(function(o){qt[o.name]=ai.extend(o)});var yt,ot=function(o){function e(t){var i=o.call(this)||this;return i._widget=t,i}return N(e,o),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,i){var n,r,a=(n=t.name,(r=qt[n])!==null&&r!==void 0?r:null);if(a!==null){var s=new a(t);if(S(i)){for(var l in i)i.hasOwnProperty(l)&&s.registerEvent(l,i[l]);this.addChild(s)}return s}return null},e.prototype.draw=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.clear(),this.drawImp(t,i)},e}(Te),Wn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i,n,r=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=r.getBounding(),u=s.getStyles().grid;if(u.show){t.save(),t.globalCompositeOperation="destination-over";var c=u.horizontal;if(c.show){var h=a.getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:0,y:d.coord},{x:l.width,y:d.coord}]}});(i=this.createFigure({name:"line",attrs:h,styles:c}))===null||i===void 0||i.draw(t)}var p=u.vertical;p.show&&(h=s.getXAxisPane().getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:d.coord,y:0},{x:d.coord,y:l.height}]}}),(n=this.createFigure({name:"line",attrs:h,styles:p}))===null||n===void 0||n.draw(t)),t.restore()}},e}(ot),Ti=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.eachChildren=function(t){for(var i=this.getWidget().getPane().getChart().getChartStore(),n=i.getVisibleRangeDataList(),r=i.getBarSpace(),a=n.length,s=0;s<a;)t(n[s],r,s),++s},e}(ot),Ci=function(o){function e(){var t=o.apply(this,Yt([],pt(arguments),!1))||this;return t._boundCandleBarClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction(m.ActionType.OnCandleBarClick,i),!1}},t}return N(e,o),e.prototype.drawImp=function(t){var i=this,n=this.getWidget().getPane(),r=n.getId()===K,a=n.getChart().getChartStore(),s=this.getCandleBarOptions();if(s!==null){var l=s.type,u=s.styles,c=0,h=0;if(s.type===m.CandleType.Ohlc){var p=a.getBarSpace().gapBar;(c=Math.min(Math.max(Math.round(.2*p),1),8))>2&&c%2==1&&c--,h=Math.floor(h/2)}var d=n.getAxisComponent();this.eachChildren(function(v,g){var f,y=v.x,x=v.data,_=x.current,b=x.prev;if(S(_)){var C=_.open,T=_.high,w=_.low,E=_.close,P=u.compareRule===wt.CurrentOpen?C:(f=b?.close)!==null&&f!==void 0?f:E,D=[];E>P?(D[0]=u.upColor,D[1]=u.upBorderColor,D[2]=u.upWickColor):E<P?(D[0]=u.downColor,D[1]=u.downBorderColor,D[2]=u.downWickColor):(D[0]=u.noChangeColor,D[1]=u.noChangeBorderColor,D[2]=u.noChangeWickColor);var F=d.convertToPixel(C),O=d.convertToPixel(E),M=[F,O,d.convertToPixel(T),d.convertToPixel(w)];M.sort(function(R,B){return R-B});var k=g.gapBar%2==0?1:0,I=[];switch(l){case m.CandleType.CandleSolid:I=i._createSolidBar(y,M,g,D,k);break;case m.CandleType.CandleStroke:I=i._createStrokeBar(y,M,g,D,k);break;case m.CandleType.CandleUpStroke:I=E>C?i._createStrokeBar(y,M,g,D,k):i._createSolidBar(y,M,g,D,k);break;case m.CandleType.CandleDownStroke:I=C>E?i._createStrokeBar(y,M,g,D,k):i._createSolidBar(y,M,g,D,k);break;case m.CandleType.Ohlc:I=[{name:"rect",attrs:[{x:y-h,y:M[0],width:c,height:M[3]-M[0]},{x:y-g.halfGapBar,y:F+c>M[3]?M[3]-c:F,width:g.halfGapBar,height:c},{x:y+h,y:O+c>M[3]?M[3]-c:O,width:g.halfGapBar-h,height:c}],styles:{color:D[0]}}]}I.forEach(function(R){var B,V=null;r&&(V={mouseClickEvent:i._boundCandleBarClickEvent(v)}),(B=i.createFigure(R,V??void 0))===null||B===void 0||B.draw(t)})}})}},e.prototype.getCandleBarOptions=function(){var t=this.getWidget().getPane().getChart().getStyles().candle;return{type:t.type,styles:t.bar}},e.prototype._createSolidBar=function(t,i,n,r,a){return[{name:"rect",attrs:{x:t,y:i[0],width:1,height:i[3]-i[0]},styles:{color:r[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:m.PolygonType.StrokeFill,color:r[0],borderColor:r[1]}}]},e.prototype._createStrokeBar=function(t,i,n,r,a){return[{name:"rect",attrs:[{x:t,y:i[0],width:1,height:i[1]-i[0]},{x:t,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:r[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:m.PolygonType.Stroke,borderColor:r[1]}}]},e}(Ti),Nn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.getCandleBarOptions=function(){var t,i,n=this.getWidget().getPane();if(!n.getAxisComponent().isInCandle()){var r=n.getChart().getChartStore(),a=r.getIndicatorsByPaneId(n.getId());try{for(var s=tt(a),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.shouldOhlc&&u.visible){var c=u.styles,h=r.getStyles().indicator,p=G(c,"ohlc.compareRule",h.ohlc.compareRule),d=G(c,"ohlc.upColor",h.ohlc.upColor),v=G(c,"ohlc.downColor",h.ohlc.downColor),g=G(c,"ohlc.noChangeColor",h.ohlc.noChangeColor);return{type:m.CandleType.Ohlc,styles:{compareRule:p,upColor:d,downColor:v,noChangeColor:g,upBorderColor:d,downBorderColor:v,noChangeBorderColor:g,upWickColor:d,downWickColor:v,noChangeWickColor:g}}}}}catch(f){t={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}}return null},e.prototype.drawImp=function(t){var i=this;o.prototype.drawImp.call(this,t);var n=this.getWidget(),r=n.getPane(),a=r.getChart(),s=n.getBounding(),l=a.getXAxisPane().getAxisComponent(),u=r.getAxisComponent(),c=a.getChartStore(),h=c.getIndicatorsByPaneId(r.getId()),p=c.getStyles().indicator;t.save(),h.forEach(function(d){if(d.visible){d.zLevel<0?t.globalCompositeOperation="destination-over":t.globalCompositeOperation="source-over";var v=!1;if(d.draw!==null&&(t.save(),v=d.draw({ctx:t,chart:a,indicator:d,bounding:s,xAxis:l,yAxis:u}),t.restore()),!v){var g=d.result,f=[];i.eachChildren(function(y,x){var _,b,C,T=x.halfGapBar,w=y.dataIndex,E=y.x,P=l.convertToPixel(w-1),D=l.convertToPixel(w+1),F=(_=g[w-1])!==null&&_!==void 0?_:null,O=(b=g[w])!==null&&b!==void 0?b:null,M=(C=g[w+1])!==null&&C!==void 0?C:null,k={x:P},I={x:E},R={x:D};d.figures.forEach(function(B){var V=B.key,J=F?.[V];L(J)&&(k[V]=u.convertToPixel(J));var Z=O?.[V];L(Z)&&(I[V]=u.convertToPixel(Z));var Q=M?.[V];L(Q)&&(R[V]=u.convertToPixel(Q))}),ve(d,w,p,function(B,V,J){var Z,Q,X;if(S(O?.[B.key])){var mt=I[B.key],U=(Z=B.attrs)===null||Z===void 0?void 0:Z.call(B,{data:{prev:F,current:O,next:M},coordinate:{prev:k,current:I,next:R},bounding:s,barSpace:x,xAxis:l,yAxis:u});if(!S(U))switch(B.type){case"circle":U={x:E,y:mt,r:Math.max(1,T)};break;case"rect":case"bar":var Pt=(Q=B.baseValue)!==null&&Q!==void 0?Q:u.getRange().from,It=u.convertToPixel(Pt),_t=Math.abs(It-mt);Pt!==O?.[B.key]&&(_t=Math.max(1,_t)),U={x:E-T,y:mt>It?It:mt,width:Math.max(1,2*T),height:_t};break;case"line":S(f[J])||(f[J]=[]),L(I[B.key])&&L(R[B.key])&&f[J].push({coordinates:[{x:I.x,y:I[B.key]},{x:R.x,y:R[B.key]}],styles:V})}var rt=B.type;S(U)&&rt!=="line"&&((X=i.createFigure({name:rt==="bar"?"rect":rt,attrs:U,styles:V}))===null||X===void 0||X.draw(t))}})}),f.forEach(function(y){var x,_,b,C;if(y.length>1){for(var T=[{coordinates:[y[0].coordinates[0],y[0].coordinates[1]],styles:y[0].styles}],w=1;w<y.length;w++){var E=T[T.length-1],P=y[w],D=E.coordinates[E.coordinates.length-1];D.x===P.coordinates[0].x&&D.y===P.coordinates[0].y&&E.styles.style===P.styles.style&&E.styles.color===P.styles.color&&E.styles.size===P.styles.size&&E.styles.smooth===P.styles.smooth&&((x=E.styles.dashedValue)===null||x===void 0?void 0:x[0])===((_=P.styles.dashedValue)===null||_===void 0?void 0:_[0])&&((b=E.styles.dashedValue)===null||b===void 0?void 0:b[1])===((C=P.styles.dashedValue)===null||C===void 0?void 0:C[1])?E.coordinates.push(P.coordinates[1]):T.push({coordinates:[P.coordinates[0],P.coordinates[1]],styles:P.styles})}T.forEach(function(F){var O,M=F.coordinates,k=F.styles;(O=i.createFigure({name:"line",attrs:{coordinates:M},styles:k}))===null||O===void 0||O.draw(t)})}})}}}),t.restore()},e}(Ci),Vn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),r=i.getBounding(),a=i.getPane().getChart().getChartStore(),s=a.getCrosshair(),l=a.getStyles().crosshair;if(z(s.paneId)&&l.show){if(s.paneId===n.getId()){var u=s.y;this._drawLine(t,[{x:0,y:u},{x:r.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:r.height}],l.vertical)}},e.prototype._drawLine=function(t,i,n){var r;if(n.show){var a=n.line;a.show&&((r=this.createFigure({name:"line",attrs:{coordinates:i},styles:a}))===null||r===void 0||r.draw(t))}},e}(ot),wi=function(o){function e(){var t=o.apply(this,Yt([],pt(arguments),!1))||this;return t._boundIconClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction(m.ActionType.OnTooltipIconClick,A({},i)),!0}},t._boundIconMouseMoveEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().setActiveTooltipIcon(A({},i)),!0}},t}return N(e,o),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore();if(S(n.getCrosshair().kLineData)){var r=i.getBounding(),a=n.getStyles().indicator.tooltip,s=a.offsetLeft,l=a.offsetTop,u=a.offsetRight;this.drawIndicatorTooltip(t,s,l,r.width-u)}},e.prototype.drawIndicatorTooltip=function(t,i,n,r){var a=this,s=this.getWidget().getPane(),l=s.getChart().getChartStore(),u=l.getStyles().indicator.tooltip;if(this.isDrawTooltip(l.getCrosshair(),u)){var c=l.getIndicatorsByPaneId(s.getId()),h=u.text;c.forEach(function(p){var d=0,v={x:i,y:n},g=a.getIndicatorTooltipData(p),f=g.name,y=g.calcParamsText,x=g.legends,_=g.icons,b=f.length>0,C=x.length>0;if(b||C){var T=pt(a.classifyTooltipIcons(_),3),w=T[0],E=T[1],P=T[2];if(d=a.drawStandardTooltipIcons(t,w,v,p.name,i,d,r),b){var D=f;y.length>0&&(D="".concat(D).concat(y)),d=a.drawStandardTooltipLegends(t,[{title:{text:"",color:h.color},value:{text:D,color:h.color}}],v,i,d,r,h)}d=a.drawStandardTooltipIcons(t,E,v,p.name,i,d,r),C&&(d=a.drawStandardTooltipLegends(t,x,v,i,d,r,u.text)),d=a.drawStandardTooltipIcons(t,P,v,p.name,i,d,r),n=v.y+d}})}return n},e.prototype.drawStandardTooltipIcons=function(t,i,n,r,a,s,l){var u=this;if(i.length>0){var c=0,h=0;i.forEach(function(g){var f=g.marginLeft,y=f===void 0?0:f,x=g.marginTop,_=x===void 0?0:x,b=g.marginRight,C=b===void 0?0:b,T=g.marginBottom,w=T===void 0?0:T,E=g.paddingLeft,P=E===void 0?0:E,D=g.paddingTop,F=D===void 0?0:D,O=g.paddingRight,M=O===void 0?0:O,k=g.paddingBottom,I=k===void 0?0:k,R=g.size,B=g.fontFamily,V=g.icon;t.font=At(R,"normal",B),c+=y+P+t.measureText(V).width+M+C,h=Math.max(h,_+F+R+I+w)}),n.x+c>l?(n.x=a,n.y+=s,s=h):s=Math.max(s,h);var p=this.getWidget().getPane(),d=p.getId(),v=p.getChart().getChartStore().getActiveTooltipIcon();i.forEach(function(g){var f,y=g.marginLeft,x=y===void 0?0:y,_=g.marginTop,b=_===void 0?0:_,C=g.marginRight,T=C===void 0?0:C,w=g.paddingLeft,E=w===void 0?0:w,P=g.paddingTop,D=P===void 0?0:P,F=g.paddingRight,O=F===void 0?0:F,M=g.paddingBottom,k=M===void 0?0:M,I=g.color,R=g.activeColor,B=g.size,V=g.fontFamily,J=g.icon,Z=g.backgroundColor,Q=g.activeBackgroundColor,X=v?.paneId===d&&v.indicatorName===r&&v.iconId===g.id;(f=u.createFigure({name:"text",attrs:{text:J,x:n.x+x,y:n.y+b},styles:{paddingLeft:E,paddingTop:D,paddingRight:O,paddingBottom:k,color:X?R:I,size:B,family:V,backgroundColor:X?Q:Z}},{mouseClickEvent:u._boundIconClickEvent({paneId:d,indicatorName:r,iconId:g.id}),mouseMoveEvent:u._boundIconMouseMoveEvent({paneId:d,indicatorName:r,iconId:g.id})}))===null||f===void 0||f.draw(t),n.x+=x+E+t.measureText(J).width+O+T})}return s},e.prototype.drawStandardTooltipLegends=function(t,i,n,r,a,s,l){var u=this;if(i.length>0){var c=l.marginLeft,h=l.marginTop,p=l.marginRight,d=l.marginBottom,v=l.size,g=l.family,f=l.weight;t.font=At(v,f,g),i.forEach(function(y){var x,_,b=y.title,C=y.value,T=t.measureText(b.text).width,w=T+t.measureText(C.text).width,E=h+v+d;n.x+c+w+p>s?(n.x=r,n.y+=a,a=E):a=Math.max(a,E),b.text.length>0&&((x=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+h,text:b.text},styles:{color:b.color,size:v,family:g,weight:f}}))===null||x===void 0||x.draw(t)),(_=u.createFigure({name:"text",attrs:{x:n.x+c+T,y:n.y+h,text:C.text},styles:{color:C.color,size:v,family:g,weight:f}}))===null||_===void 0||_.draw(t),n.x+=c+w+p})}return a},e.prototype.isDrawTooltip=function(t,i){var n=i.showRule;return n===m.TooltipShowRule.Always||n===m.TooltipShowRule.FollowCross&&z(t.paneId)},e.prototype.getIndicatorTooltipData=function(t){var i,n,r=this.getWidget().getPane().getChart().getChartStore(),a=r.getStyles().indicator,s=a.tooltip,l=s.showName?t.shortName:"",u="";if(s.showParams){var c=t.calcParams;c.length>0&&(u="(".concat(c.join(","),")"))}var h={name:l,calcParamsText:u,legends:[],icons:s.icons},p=r.getCrosshair().dataIndex,d=t.result,v=r.getCustomApi(),g=r.getDecimalFold(),f=r.getThousandsSeparator(),y=[];if(t.visible){var x=(n=(i=d[p])!==null&&i!==void 0?i:d[p-1])!==null&&n!==void 0?n:{};ve(t,p,a,function(M,k){if(z(M.title)){var I=k.color,R=x[M.key];L(R)&&(R=q(R,t.precision),t.shouldFormatBigNumber&&(R=v.formatBigNumber(R)),R=g.format(f.format(R))),y.push({title:{text:M.title,color:I},value:{text:R??s.defaultValue,color:I}})}}),h.legends=y}if(j(t.createTooltipDataSource)){var _=this.getWidget(),b=_.getPane(),C=b.getChart(),T=t.createTooltipDataSource({chart:C,indicator:t,crosshair:r.getCrosshair(),bounding:_.getBounding(),xAxis:b.getChart().getXAxisPane().getAxisComponent(),yAxis:b.getAxisComponent()}),w=T.name,E=T.calcParamsText,P=T.legends,D=T.icons;if(z(w)&&s.showName&&(h.name=w),z(E)&&s.showParams&&(h.calcParamsText=E),S(D)&&(h.icons=D),S(P)&&t.visible){var F=[],O=a.tooltip.text.color;P.forEach(function(M){var k={text:"",color:O};nt(M.title)?k=M.title:k.text=M.title;var I={text:"",color:O};nt(M.value)?I=M.value:I.text=M.value,L(Number(I.text))&&(I.text=g.format(f.format(I.text))),F.push({title:k,value:I})}),h.legends=F}}return h},e.prototype.classifyTooltipIcons=function(t){var i=[],n=[],r=[];return t.forEach(function(a){switch(a.position){case m.TooltipIconPosition.Left:i.push(a);break;case m.TooltipIconPosition.Middle:n.push(a);break;case m.TooltipIconPosition.Right:r.push(a)}}),[i,n,r]},e}(ot),Si=function(o){function e(t){var i=o.call(this,t)||this;return i._initEvent(),i}return N(e,o),e.prototype._initEvent=function(){var t=this,i=this.getWidget().getPane(),n=i.getId(),r=i.getChart(),a=r.getChartStore();this.registerEvent("mouseMoveEvent",function(s){var l,u=a.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;c.isStart()&&(a.updateProgressOverlayInfo(n),h=n);var p=c.points.length-1;return c.isDrawing()&&h===n&&(c.eventMoveForDrawing(t._coordinateToPoint(c,s)),(l=c.onDrawing)===null||l===void 0||l.call(c,A({chart:r,overlay:c},s))),t._figureMouseMoveEvent(c,1,p,{key:"".concat(Wt,"point_").concat(p),type:"circle",attrs:{}})(s)}return a.setHoverOverlayInfo({paneId:n,overlay:null,figureType:0,figureIndex:-1,figure:null},s),!1}).registerEvent("mouseClickEvent",function(s){var l,u,c=a.getProgressOverlayInfo();if(c!==null){var h=c.overlay,p=c.paneId;h.isStart()&&(a.updateProgressOverlayInfo(n,!0),p=n);var d=h.points.length-1;return h.isDrawing()&&p===n&&(h.eventMoveForDrawing(t._coordinateToPoint(h,s)),(l=h.onDrawing)===null||l===void 0||l.call(h,A({chart:r,overlay:h},s)),h.nextStep(),h.isDrawing()||(a.progressOverlayComplete(),(u=h.onDrawEnd)===null||u===void 0||u.call(h,A({chart:r,overlay:h},s)))),t._figureMouseClickEvent(h,1,d,{key:"".concat(Wt,"point_").concat(d),type:"circle",attrs:{}})(s)}return a.setClickOverlayInfo({paneId:n,overlay:null,figureType:0,figureIndex:-1,figure:null},s),!1}).registerEvent("mouseDoubleClickEvent",function(s){var l,u=a.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;c.isDrawing()&&h===n&&(c.forceComplete(),c.isDrawing()||(a.progressOverlayComplete(),(l=c.onDrawEnd)===null||l===void 0||l.call(c,A({chart:r,overlay:c},s))));var p=c.points.length-1;return t._figureMouseClickEvent(c,1,p,{key:"".concat(Wt,"point_").concat(p),type:"circle",attrs:{}})(s)}return!1}).registerEvent("mouseRightClickEvent",function(s){var l=a.getProgressOverlayInfo();if(l!==null){var u=l.overlay;if(u.isDrawing()){var c=u.points.length-1;return t._figureMouseRightClickEvent(u,1,c,{key:"".concat(Wt,"point_").concat(c),type:"circle",attrs:{}})(s)}}return!1}).registerEvent("mouseUpEvent",function(s){var l,u=a.getPressedOverlayInfo(),c=u.overlay,h=u.figure;return c!==null&&lt("onPressedMoveEnd",h)&&((l=c.onPressedMoveEnd)===null||l===void 0||l.call(c,A({chart:r,overlay:c,figure:h??void 0},s))),a.setPressedOverlayInfo({paneId:n,overlay:null,figureType:0,figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(s){var l,u,c=a.getPressedOverlayInfo(),h=c.overlay,p=c.figureType,d=c.figureIndex,v=c.figure;if(h!==null&&lt("onPressedMoving",v)){if(!(h.lock||(u=(l=h.onPressedMoving)===null||l===void 0?void 0:l.call(h,A({chart:r,overlay:h,figure:v??void 0},s)))!==null&&u!==void 0&&u)){var g=t._coordinateToPoint(h,s);p===1?h.eventPressedPointMove(g,d):h.eventPressedOtherMove(g,t.getWidget().getPane().getChart().getChartStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,i,n,r){return t.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(t,i,n,r),mouseDownEvent:this._figureMouseDownEvent(t,i,n,r),mouseClickEvent:this._figureMouseClickEvent(t,i,n,r),mouseRightClickEvent:this._figureMouseRightClickEvent(t,i,n,r),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,i,n,r)}},e.prototype._figureMouseMoveEvent=function(t,i,n,r){var a=this;return function(s){var l=a.getWidget().getPane();return l.getChart().getChartStore().setHoverOverlayInfo({paneId:l.getId(),overlay:t,figureType:i,figure:r,figureIndex:n},s),!0}},e.prototype._figureMouseDownEvent=function(t,i,n,r){var a=this;return function(s){var l,u=a.getWidget().getPane(),c=u.getId();return t.startPressedMove(a._coordinateToPoint(t,s)),!!lt("onPressedMoveStart",r)&&((l=t.onPressedMoveStart)===null||l===void 0||l.call(t,A({chart:u.getChart(),overlay:t,figure:r},s)),u.getChart().getChartStore().setPressedOverlayInfo({paneId:c,overlay:t,figureType:i,figureIndex:n,figure:r}),!0)}},e.prototype._figureMouseClickEvent=function(t,i,n,r){var a=this;return function(s){var l=a.getWidget().getPane(),u=l.getId();return l.getChart().getChartStore().setClickOverlayInfo({paneId:u,overlay:t,figureType:i,figureIndex:n,figure:r},s),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,i,n,r){var a=this;return function(s){var l;return!!lt("onDoubleClick",r)&&((l=t.onDoubleClick)===null||l===void 0||l.call(t,A(A({},s),{chart:a.getWidget().getPane().getChart(),figure:r,overlay:t})),!0)}},e.prototype._figureMouseRightClickEvent=function(t,i,n,r){var a=this;return function(s){var l,u;return!!lt("onRightClick",r)&&((u=(l=t.onRightClick)===null||l===void 0?void 0:l.call(t,A({chart:a.getWidget().getPane().getChart(),overlay:t,figure:r},s)))!==null&&u!==void 0&&u||a.getWidget().getPane().getChart().getChartStore().removeOverlay(t),!0)}},e.prototype._coordinateToPoint=function(t,i){var n,r={},a=this.getWidget().getPane(),s=a.getChart(),l=a.getId(),u=s.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=s.getXAxisPane().getAxisComponent().convertFromPixel(i.x),h=(n=u.dataIndexToTimestamp(c))!==null&&n!==void 0?n:void 0;r.timestamp=h,r.dataIndex=c}if(this.coordinateToPointValueFlag()){var p=a.getAxisComponent(),d=p.convertFromPixel(i.y);if(t.mode!==m.OverlayMode.Normal&&l===K&&L(r.dataIndex)){var v=u.getDataByDataIndex(r.dataIndex);if(v!==null){var g=t.modeSensitivity;if(d>v.high)if(t.mode===m.OverlayMode.WeakMagnet){var f=p.convertToPixel(v.high);d<p.convertFromPixel(f-g)&&(d=v.high)}else d=v.high;else if(d<v.low)if(t.mode===m.OverlayMode.WeakMagnet){var y=p.convertToPixel(v.low);d>p.convertFromPixel(y-g)&&(d=v.low)}else d=v.low;else{var x=Math.max(v.open,v.close),_=Math.min(v.open,v.close);d=d>x?d-x<v.high-d?x:v.high:d<_?d-v.low<_-d?v.low:_:x-d<d-_?x:_}}}r.value=d}return r},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,i,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(t,i,n):o.prototype.dispatchEvent.call(this,t,i,n)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var i=this;this.getCompleteOverlays().forEach(function(r){r.visible&&i._drawOverlay(t,r)});var n=this.getProgressOverlay();S(n)&&n.visible&&this._drawOverlay(t,n)},e.prototype._drawOverlay=function(t,i){var n=i.points,r=this.getWidget().getPane(),a=r.getChart(),s=a.getChartStore(),l=r.getAxisComponent(),u=a.getXAxisPane().getAxisComponent(),c=n.map(function(p){var d,v=null;L(p.timestamp)&&(v=s.timestampToDataIndex(p.timestamp));var g={x:0,y:0};return L(v)&&(g.x=u.convertToPixel(v)),L(p.value)&&(g.y=(d=l?.convertToPixel(p.value))!==null&&d!==void 0?d:0),g});if(c.length>0){var h=[].concat(this.getFigures(i,c));this.drawFigures(t,i,h)}this.drawDefaultFigures(t,i,c)},e.prototype.drawFigures=function(t,i,n){var r=this,a=this.getWidget().getPane().getChart().getStyles().overlay;n.forEach(function(s,l){var u=s.type,c=s.styles,h=s.attrs;[].concat(h).forEach(function(p){var d,v,g=r._createFigureEvents(i,2,l,s),f=A(A(A({},a[u]),(d=i.styles)===null||d===void 0?void 0:d[u]),c);(v=r.createFigure({name:u,attrs:p,styles:f},g??void 0))===null||v===void 0||v.draw(t)})})},e.prototype.getCompleteOverlays=function(){var t=this.getWidget().getPane();return t.getChart().getChartStore().getOverlaysByPaneId(t.getId())},e.prototype.getProgressOverlay=function(){var t=this.getWidget().getPane(),i=t.getChart().getChartStore().getProgressOverlayInfo();return S(i)&&i.paneId===t.getId()?i.overlay:null},e.prototype.getFigures=function(t,i){var n,r,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(r=(n=t.createPointFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&r!==void 0?r:[]},e.prototype.drawDefaultFigures=function(t,i,n){var r,a,s=this;if(i.needDefaultPointFigure){var l=this.getWidget().getPane().getChart().getChartStore(),u=l.getHoverOverlayInfo(),c=l.getClickOverlayInfo();if(((r=u.overlay)===null||r===void 0?void 0:r.id)===i.id&&u.figureType!==0||((a=c.overlay)===null||a===void 0?void 0:a.id)===i.id&&c.figureType!==0){var h=l.getStyles().overlay,p=i.styles,d=A(A({},h.point),p?.point);n.forEach(function(v,g){var f,y,x,_,b,C=v.x,T=v.y,w=d.radius,E=d.color,P=d.borderColor,D=d.borderSize;((f=u.overlay)===null||f===void 0?void 0:f.id)===i.id&&u.figureType===1&&((y=u.figure)===null||y===void 0?void 0:y.key)==="".concat(Wt,"point_").concat(g)&&(w=d.activeRadius,E=d.activeColor,P=d.activeBorderColor,D=d.activeBorderSize),(_=s.createFigure({name:"circle",attrs:{x:C,y:T,r:w+D},styles:{color:P}},(x=s._createFigureEvents(i,1,g,{key:"".concat(Wt,"point_").concat(g),type:"circle",attrs:{x:C,y:T,r:w+D},styles:{color:P}}))!==null&&x!==void 0?x:void 0))===null||_===void 0||_.draw(t),(b=s.createFigure({name:"circle",attrs:{x:C,y:T,r:w},styles:{color:E}}))===null||b===void 0||b.draw(t)})}}},e}(ot),Ei=function(o){function e(t,i){var n=o.call(this,t,i)||this;return n._gridView=new Wn(n),n._indicatorView=new Nn(n),n._crosshairLineView=new Vn(n),n._tooltipView=n.createTooltipView(),n._overlayView=new Si(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return i.getChart().getChartStore().setActiveTooltipIcon(),!1}),n}return N(e,o),e.prototype.getName=function(){return $},e.prototype.updateMain=function(t){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t))},e.prototype.createTooltipView=function(){return new wi(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(t),this._crosshairLineView.draw(t)),this._tooltipView.draw(t)},e}(we),zn=function(o){function e(){var t=o.apply(this,Yt([],pt(arguments),!1))||this;return t._ripplePoint=t.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),t._animationFrameTime=0,t._animation=new ye({iterationCount:1/0}).doFrame(function(i){t._animationFrameTime=i;var n=t.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),t}return N(e,o),e.prototype.drawImp=function(t){var i,n,r,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=l.getDataList().length-1,c=a.getBounding(),h=s.getAxisComponent(),p=l.getStyles().candle.area,d=[],v=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER,f=null;if(this.eachChildren(function(T){var w=T.x,E=T.data.current,P=E?.[p.value];if(L(P)){var D=h.convertToPixel(P);g===Number.MIN_SAFE_INTEGER&&(g=w),d.push({x:w,y:D}),v=Math.min(v,D),T.dataIndex===u&&(f={x:w,y:D})}}),d.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:p.lineColor,size:p.lineSize,smooth:p.smooth}}))===null||i===void 0||i.draw(t);var y=p.backgroundColor,x="";if(st(y)){var _=t.createLinearGradient(0,c.height,0,v);try{y.forEach(function(T){var w=T.offset,E=T.color;_.addColorStop(w,E)})}catch{}x=_}else x=y;t.fillStyle=x,t.beginPath(),t.moveTo(g,c.height),t.lineTo(d[0].x,d[0].y),li(t,d,p.smooth),t.lineTo(d[d.length-1].x,c.height),t.closePath(),t.fill()}var b=p.point;if(b.show&&S(f)){(n=this.createFigure({name:"circle",attrs:{x:f.x,y:f.y,r:b.radius},styles:{style:"fill",color:b.color}}))===null||n===void 0||n.draw(t);var C=b.rippleRadius;b.animation&&(C=b.radius+this._animationFrameTime/b.animationDuration*(b.rippleRadius-b.radius),this._animation.setDuration(b.animationDuration).start()),(r=this._ripplePoint)===null||r===void 0||r.setAttrs({x:f.x,y:f.y,r:C}).setStyles({style:"fill",color:b.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(Ti),Yn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i=this.getWidget().getPane(),n=i.getChart().getChartStore(),r=n.getStyles().candle.priceMark,a=r.high,s=r.low;if(r.show&&(a.show||s.show)){var l=n.getVisibleRangeHighLowPrice(),u=n.getPrecision(),c=i.getAxisComponent(),h=l[0],p=h.price,d=h.x,v=l[1],g=v.price,f=v.x,y=c.convertToPixel(p),x=c.convertToPixel(g),_=n.getDecimalFold(),b=n.getThousandsSeparator();a.show&&p!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,_.format(b.format(q(p,u.price))),{x:d,y},y<x?[-2,-5]:[2,5],a),s.show&&g!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,_.format(b.format(q(g,u.price))),{x:f,y:x},y<x?[2,5]:[-2,-5],s)}},e.prototype._drawMark=function(t,i,n,r,a){var s,l,u,c=n.x,h=n.y+r[0];(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+r[0]},{x:c,y:h},{x:c+2,y:h+r[0]}]},styles:{color:a.color}}))===null||s===void 0||s.draw(t);var p=0,d=0,v="left";c>this.getWidget().getBounding().width/2?(d=(p=c-5)-a.textOffset,v="right"):(v="left",d=(p=c+5)+a.textOffset);var g=h+r[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:g},{x:p,y:g}]},styles:{color:a.color}}))===null||l===void 0||l.draw(t),(u=this.createFigure({name:"text",attrs:{x:d,y:g,text:i,align:v,baseline:"middle"},styles:{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}}))===null||u===void 0||u.draw(t)},e}(ot),Hn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i,n,r,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getChart().getChartStore(),c=u.getStyles().candle.priceMark,h=c.last,p=h.line;if(c.show&&h.show&&p.show){var d=s.getAxisComponent(),v=u.getDataList(),g=v[v.length-1];if(S(g)){var f=g.close,y=g.open,x=h.compareRule===wt.CurrentOpen?y:(n=(i=v[v.length-2])===null||i===void 0?void 0:i.close)!==null&&n!==void 0?n:f,_=d.convertToNicePixel(f),b="";b=f>x?h.upColor:f<x?h.downColor:h.noChangeColor,(r=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:_},{x:l.width,y:_}]},styles:{style:p.style,color:b,size:p.size,dashedValue:p.dashedValue}}))===null||r===void 0||r.draw(t)}}},e}(ot);(function(o){o.Left="left",o.Right="right"})(yt||(yt={}));var Pi=function(){function o(e){this.scrollZoomEnabled=!0,this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return o.prototype.getParent=function(){return this._parent},o.prototype.buildTicks=function(e){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),!(this._prevRange.from===this._range.from&&this._prevRange.to===this._range.to&&!e)&&(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0)},o.prototype.getTicks=function(){return this._ticks},o.prototype.setRange=function(e){this._autoCalcTickFlag=!1,this._range=e},o.prototype.getRange=function(){return this._range},o.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},o.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},o}(),re={"zh-CN":{time:"\u65F6\u95F4\uFF1A",open:"\u5F00\uFF1A",high:"\u9AD8\uFF1A",low:"\u4F4E\uFF1A",close:"\u6536\uFF1A",volume:"\u6210\u4EA4\u91CF\uFF1A",turnover:"\u6210\u4EA4\u989D\uFF1A",change:"\u6DA8\u5E45\uFF1A"},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "}},Xn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore(),r=n.getCrosshair();if(S(r.kLineData)){var a=i.getBounding(),s=n.getStyles(),l=s.candle,u=s.indicator;if(l.tooltip.showType===m.TooltipShowType.Rect&&u.tooltip.showType===m.TooltipShowType.Rect){var c=this.isDrawTooltip(r,l.tooltip),h=this.isDrawTooltip(r,u.tooltip);this._drawRectTooltip(t,c,h,l.tooltip.offsetTop)}else if(l.tooltip.showType===m.TooltipShowType.Standard&&u.tooltip.showType===m.TooltipShowType.Standard){var p=l.tooltip,d=p.offsetLeft,v=p.offsetTop,g=p.offsetRight,f=a.width-g,y=this._drawCandleStandardTooltip(t,d,v,f);this.drawIndicatorTooltip(t,d,y,f)}else if(l.tooltip.showType===m.TooltipShowType.Rect&&u.tooltip.showType===m.TooltipShowType.Standard){var x=l.tooltip,_=(d=x.offsetLeft,v=x.offsetTop,g=x.offsetRight,f=a.width-g,this.drawIndicatorTooltip(t,d,v,f));c=this.isDrawTooltip(r,l.tooltip),this._drawRectTooltip(t,c,!1,_)}else{var b=l.tooltip,C=(d=b.offsetLeft,v=b.offsetTop,g=b.offsetRight,f=a.width-g,this._drawCandleStandardTooltip(t,d,v,f));h=this.isDrawTooltip(r,u.tooltip),this._drawRectTooltip(t,!1,h,C)}}},e.prototype._drawCandleStandardTooltip=function(t,i,n,r){var a=this.getWidget().getPane().getChart().getChartStore(),s=a.getStyles().candle.tooltip,l=s.text,u=0,c={x:i,y:n},h=a.getCrosshair();if(this.isDrawTooltip(h,s)){var p=this._getCandleTooltipLegends(),d=pt(this.classifyTooltipIcons(s.icons),3),v=d[0],g=d[1],f=d[2];u=this.drawStandardTooltipIcons(t,v,c,"",i,u,r),u=this.drawStandardTooltipIcons(t,g,c,"",i,u,r),p.length>0&&(u=this.drawStandardTooltipLegends(t,p,c,i,u,r,l)),u=this.drawStandardTooltipIcons(t,f,c,"",i,u,r)}return c.y+u},e.prototype._drawRectTooltip=function(t,i,n,r){var a,s,l=this,u=this.getWidget(),c=u.getPane(),h=c.getChart().getChartStore(),p=h.getStyles(),d=p.candle,v=p.indicator,g=d.tooltip,f=v.tooltip;if(i||n){var y=this._getCandleTooltipLegends(),x=g.offsetLeft,_=g.offsetTop,b=g.offsetRight,C=g.offsetBottom,T=g.text,w=T.marginLeft,E=T.marginRight,P=T.marginTop,D=T.marginBottom,F=T.size,O=T.weight,M=T.family,k=g.rect,I=k.position,R=k.paddingLeft,B=k.paddingRight,V=k.paddingTop,J=k.paddingBottom,Z=k.offsetLeft,Q=k.offsetRight,X=k.offsetTop,mt=k.offsetBottom,U=k.borderSize,Pt=k.borderRadius,It=k.borderColor,_t=k.color,rt=0,xt=0,ct=0;i&&(t.font=At(F,O,M),y.forEach(function(Tt){var at=Tt.title,it=Tt.value,dt="".concat(at.text).concat(it.text),Ct=t.measureText(dt).width+w+E;rt=Math.max(rt,Ct)}),ct+=(D+P+F)*y.length);var bt=f.text,Vt=bt.marginLeft,Ni=bt.marginRight,Vi=bt.marginTop,zi=bt.marginBottom,Jt=bt.size,Me=bt.weight,ke=bt.family,Yi=[];if(n){var vo=h.getIndicatorsByPaneId(c.getId());t.font=At(Jt,Me,ke),vo.forEach(function(Tt){var at=l.getIndicatorTooltipData(Tt).legends;Yi.push(at),at.forEach(function(it){var dt=it.title,Ct=it.value,ce="".concat(dt.text).concat(Ct.text),_o=t.measureText(ce).width+Vt+Ni;rt=Math.max(rt,_o),ct+=Vi+zi+Jt})})}if((xt+=rt)!==0&&ct!==0){var se=h.getCrosshair(),le=u.getBounding(),Hi=c.getYAxisWidget().getBounding();xt+=2*U+R+B,ct+=2*U+V+J;var fo=le.width/2,Xi=I===m.CandleTooltipRectPosition.Pointer&&se.paneId===K,Gi=((a=se.realX)!==null&&a!==void 0?a:0)>fo,ht=0;if(Xi){var Ui=se.realX;ht=Gi?Ui-Q-xt:Ui+Z}else{var ue=this.getWidget().getPane().getAxisComponent();Gi?(ht=Z+x,ue.inside&&ue.position===yt.Left&&(ht+=Hi.width)):(ht=le.width-Q-xt-b,ue.inside&&ue.position===yt.Right&&(ht-=Hi.width))}var zt=r+X;Xi&&((zt=se.y-ct/2)+ct>le.height-mt-C&&(zt=le.height-mt-ct-C),zt<r+X&&(zt=r+X+_)),(s=this.createFigure({name:"rect",attrs:{x:ht,y:zt,width:xt,height:ct},styles:{style:m.PolygonType.StrokeFill,color:_t,borderColor:It,borderSize:U,borderRadius:Pt}}))===null||s===void 0||s.draw(t);var yo=ht+U+R+w,Dt=zt+U+V;if(i&&y.forEach(function(Tt){var at,it;Dt+=P;var dt=Tt.title;(at=l.createFigure({name:"text",attrs:{x:yo,y:Dt,text:dt.text},styles:{color:dt.color,size:F,family:M,weight:O}}))===null||at===void 0||at.draw(t);var Ct=Tt.value;(it=l.createFigure({name:"text",attrs:{x:ht+xt-U-E-B,y:Dt,text:Ct.text,align:"right"},styles:{color:Ct.color,size:F,family:M,weight:O}}))===null||it===void 0||it.draw(t),Dt+=F+D}),n){var mo=ht+U+R+Vt;Yi.forEach(function(Tt){Tt.forEach(function(at){var it,dt;Dt+=Vi;var Ct=at.title,ce=at.value;(it=l.createFigure({name:"text",attrs:{x:mo,y:Dt,text:Ct.text},styles:{color:Ct.color,size:Jt,family:ke,weight:Me}}))===null||it===void 0||it.draw(t),(dt=l.createFigure({name:"text",attrs:{x:ht+xt-U-Ni-B,y:Dt,text:ce.text,align:"right"},styles:{color:ce.color,size:Jt,family:ke,weight:Me}}))===null||dt===void 0||dt.draw(t),Dt+=Jt+zi})})}}}},e.prototype._getCandleTooltipLegends=function(){var t,i,n,r,a,s,l=this.getWidget().getPane().getChart().getChartStore(),u=l.getStyles().candle,c=l.getDataList(),h=l.getCustomApi(),p=l.getDecimalFold(),d=l.getThousandsSeparator(),v=l.getLocale(),g=l.getPrecision(),f=g.price,y=g.volume,x=(t=l.getCrosshair().dataIndex)!==null&&t!==void 0?t:0,_=u.tooltip,b=_.text.color,C=(i=c[x-1])!==null&&i!==void 0?i:null,T=c[x],w=(n=C?.close)!==null&&n!==void 0?n:T.close,E=T.close-w,P={"{time}":h.formatDate(T.timestamp,"YYYY-MM-DD HH:mm",m.FormatDateType.Tooltip),"{open}":p.format(d.format(q(T.open,f))),"{high}":p.format(d.format(q(T.high,f))),"{low}":p.format(d.format(q(T.low,f))),"{close}":p.format(d.format(q(T.close,f))),"{volume}":p.format(d.format(h.formatBigNumber(q((r=T.volume)!==null&&r!==void 0?r:_.defaultValue,y)))),"{turnover}":p.format(d.format(q((a=T.turnover)!==null&&a!==void 0?a:_.defaultValue,f))),"{change}":w===0?_.defaultValue:"".concat(d.format(q(E/w*100)),"%")};return(j(_.custom)?_.custom({prev:C,current:T,next:(s=c[x+1])!==null&&s!==void 0?s:null},u):_.custom).map(function(D){var F,O=D.title,M=D.value,k={text:"",color:b};nt(O)?k=A({},O):k.text=O,k.text=function(V,J){var Z;return(Z=re[J][V])!==null&&Z!==void 0?Z:V}(k.text,v);var I={text:_.defaultValue,color:b};nt(M)?I=A({},M):I.text=M;var R=/{(\S*)}/.exec(I.text);if(R!==null&&R.length>1){var B="{".concat(R[1],"}");I.text=I.text.replace(B,(F=P[B])!==null&&F!==void 0?F:_.defaultValue),B==="{change}"&&(I.color=E===0?u.priceMark.last.noChangeColor:E>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:k,value:I}})},e}(wi),Gn=function(o){function e(t,i){var n=o.call(this,t,i)||this;return n._candleBarView=new Ci(n),n._candleAreaView=new zn(n),n._candleHighLowPriceView=new Yn(n),n._candleLastPriceLineView=new Hn(n),n.addChild(n._candleBarView),n}return N(e,o),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!==m.CandleType.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Xn(this)},e}(Ei),Ii=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t,i){var n,r,a=this,s=this.getWidget(),l=s.getPane(),u=s.getBounding(),c=l.getAxisComponent(),h=this.getAxisStyles(l.getChart().getStyles());if(h.show&&(h.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(u,h),styles:h.axisLine}))===null||n===void 0||n.draw(t)),!i[0])){var p=c.getTicks();if(h.tickLine.show&&this.createTickLines(p,u,h).forEach(function(v){var g;(g=a.createFigure({name:"line",attrs:v,styles:h.tickLine}))===null||g===void 0||g.draw(t)}),h.tickText.show){var d=this.createTickTexts(p,u,h);(r=this.createFigure({name:"text",attrs:d,styles:h.tickText}))===null||r===void 0||r.draw(t)}}},e}(ot),Un=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,i){var n=this.getWidget().getPane().getAxisComponent(),r=i.axisLine.size,a=0;return{coordinates:[{x:a=n.isFromZero()?0:t.width-r,y:0},{x:a,y:t.height}]}},e.prototype.createTickLines=function(t,i,n){var r=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=0,u=0;return r.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=i.width,a.show&&(l-=a.size),u=l-s.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,i,n){var r=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=n.tickText,u=0;r.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=i.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},e}(Ii),Zn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i,n,r,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getChart().getChartStore(),c=u.getStyles().candle.priceMark,h=c.last,p=h.text;if(c.show&&h.show&&p.show){var d=u.getPrecision(),v=s.getAxisComponent(),g=u.getDataList(),f=g[g.length-1];if(S(f)){var y=f.close,x=f.open,_=h.compareRule===wt.CurrentOpen?x:(n=(i=g[g.length-2])===null||i===void 0?void 0:i.close)!==null&&n!==void 0?n:y,b=v.convertToNicePixel(y),C="";C=y>_?h.upColor:y<_?h.downColor:h.noChangeColor;var T=v.getRange(),w=v.displayValueToText(v.realValueToDisplayValue(v.valueToRealValue(y,{range:T}),{range:T}),d.price);w=u.getDecimalFold().format(u.getThousandsSeparator().format(w));var E=0,P="left";v.isFromZero()?(E=0,P="left"):(E=l.width,P="right"),(r=this.createFigure({name:"text",attrs:{x:E,y:b,text:w,align:P,baseline:"middle"},styles:A(A({},p),{backgroundColor:C})}))===null||r===void 0||r.draw(t)}}},e}(ot),jn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i=this,n=this.getWidget(),r=n.getPane(),a=n.getBounding(),s=r.getChart().getChartStore(),l=s.getStyles().indicator,u=l.lastValueMark,c=u.text;if(u.show){var h=r.getAxisComponent(),p=h.getRange(),d=s.getDataList().length-1,v=s.getIndicatorsByPaneId(r.getId()),g=s.getCustomApi(),f=s.getDecimalFold(),y=s.getThousandsSeparator();v.forEach(function(x){var _,b,C=x.result,T=(b=(_=C[d])!==null&&_!==void 0?_:C[d-1])!==null&&b!==void 0?b:{};if(S(T)&&x.visible){var w=x.precision;ve(x,d,l,function(E,P){var D,F=T[E.key];if(L(F)){var O=h.convertToNicePixel(F),M=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(F,{range:p}),{range:p}),w);x.shouldFormatBigNumber&&(M=g.formatBigNumber(M)),M=f.format(y.format(M));var k=0,I="left";h.isFromZero()?(k=0,I="left"):(k=a.width,I="right"),(D=i.createFigure({name:"text",attrs:{x:k,y:O,text:M,align:I,baseline:"middle"},styles:A(A({},c),{backgroundColor:P.color})}))===null||D===void 0||D.draw(t)}})}})}},e}(ot),Di=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,i,n){this.drawFigures(t,i,this.getDefaultFigures(i,n))},e.prototype.getDefaultFigures=function(t,i){var n,r=this.getWidget(),a=r.getPane(),s=a.getChart().getChartStore(),l=s.getClickOverlayInfo(),u=[];if(t.needDefaultYAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)&&l.paneId===a.getId()){var c=a.getAxisComponent(),h=r.getBounding(),p=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,v=c.isFromZero(),g="left",f=0;v?(g="left",f=0):(g="right",f=h.width);var y=s.getDecimalFold(),x=s.getThousandsSeparator();i.forEach(function(_,b){var C=t.points[b];if(L(C.value)){p=Math.min(p,_.y),d=Math.max(d,_.y);var T=y.format(x.format(q(C.value,s.getPrecision().price)));u.push({type:"text",attrs:{x:f,y:_.y,text:T,align:g,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&u.unshift({type:"rect",attrs:{x:0,y:p,width:h.width,height:d-p},ignoreEvent:!0})}return u},e.prototype.getFigures=function(t,i){var n,r,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(r=(n=t.createYAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&r!==void 0?r:[]},e}(Si),Mi=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.drawImp=function(t){var i,n=this.getWidget(),r=n.getPane(),a=n.getBounding(),s=n.getPane().getChart().getChartStore(),l=s.getCrosshair(),u=s.getStyles().crosshair;if(z(l.paneId)&&this.compare(l,r.getId())&&u.show){var c=this.getDirectionStyles(u),h=c.text;if(c.show&&h.show){var p=r.getAxisComponent(),d=this.getText(l,s,p);t.font=At(h.size,h.weight,h.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(d,t.measureText(d).width,l,a,p,h),styles:h}))===null||i===void 0||i.draw(t)}}},e.prototype.compare=function(t,i){return t.paneId===i},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,i,n){var r=n,a=n.convertFromPixel(t.y),s=0,l=!1;r.isInCandle()?s=i.getPrecision().price:i.getIndicatorsByPaneId(t.paneId).forEach(function(h){s=Math.max(h.precision,s),l||(l=h.shouldFormatBigNumber)});var u=r.getRange(),c=r.displayValueToText(r.realValueToDisplayValue(r.valueToRealValue(a,{range:u}),{range:u}),s);return l&&(c=i.getCustomApi().formatBigNumber(c)),i.getDecimalFold().format(i.getThousandsSeparator().format(c))},e.prototype.getTextAttrs=function(t,i,n,r,a,s){var l=0,u="left";return a.isFromZero()?(l=0,u="left"):(l=r.width,u="right"),{x:l,y:n.y,text:t,align:u,baseline:"middle"}},e}(ot),qn=function(o){function e(t,i){var n=o.call(this,t,i)||this;return n._yAxisView=new Un(n),n._candleLastPriceLabelView=new Zn(n),n._indicatorLastValueView=new jn(n),n._overlayYAxisView=new Di(n),n._crosshairHorizontalLabelView=new Mi(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return N(e,o),e.prototype.getName=function(){return ut},e.prototype.updateMain=function(t){var i=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(t,i),i||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t))},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t))},e}(we),Kt=function(o){function e(t,i){var n=o.call(this,t)||this;return n.reverse=!1,n.inside=!1,n.position=yt.Right,n.gap={top:.2,bottom:.1},n.createRange=function(r){return r.defaultRange},n.minSpan=function(r){return Rt(-r)},n.valueToRealValue=function(r){return r},n.realValueToDisplayValue=function(r){return r},n.displayValueToRealValue=function(r){return r},n.realValueToValue=function(r){return r},n.displayValueToText=function(r,a){return q(r,a)},n.override(i),n}return N(e,o),e.prototype.override=function(t){var i=t.name,n=t.gap,r=$t(t,["name","gap"]);z(this.name)||(this.name=i),Y(this.gap,n),Y(this,r)},e.prototype.createRangeImp=function(){var t=this.getParent(),i=t.getChart(),n=i.getChartStore(),r=t.getId(),a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=!1,u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,p=n.getIndicatorsByPaneId(r);p.forEach(function(X){l||(l=X.shouldOhlc),h=Math.min(h,X.precision),L(X.minValue)&&(u=Math.min(u,X.minValue)),L(X.maxValue)&&(c=Math.max(c,X.maxValue))});var d=4,v=this.isInCandle();if(v){var g=n.getPrecision().price;d=h!==Number.MAX_SAFE_INTEGER?Math.min(h,g):g}else h!==Number.MAX_SAFE_INTEGER&&(d=h);var f=n.getVisibleRangeDataList(),y=i.getStyles().candle,x=y.type===m.CandleType.Area,_=y.area.value,b=v&&!x||!v&&l;f.forEach(function(X){var mt=X.dataIndex,U=X.data.current;if(S(U)&&(b&&(a=Math.min(a,U.low),s=Math.max(s,U.high)),v&&x)){var Pt=U[_];L(Pt)&&(a=Math.min(a,Pt),s=Math.max(s,Pt))}p.forEach(function(It){var _t,rt=It.result,xt=It.figures,ct=(_t=rt[mt])!==null&&_t!==void 0?_t:{};xt.forEach(function(bt){var Vt=ct[bt.key];L(Vt)&&(a=Math.min(a,Vt),s=Math.max(s,Vt))})})}),a!==Number.MAX_SAFE_INTEGER&&s!==Number.MIN_SAFE_INTEGER?(a=Math.min(u,a),s=Math.max(c,s)):(a=0,s=10);var C=s-a,T={from:a,to:s,range:C,realFrom:a,realTo:s,realRange:C,displayFrom:a,displayTo:s,displayRange:C},w=this.createRange({chart:i,paneId:r,defaultRange:T}),E=w.realFrom,P=w.realTo,D=w.realRange,F=this.minSpan(d);if(E===P||D<F){var O=u===E,M=c===P;E=O?E:M?E-8*F:E-4*F,P=M?P:O?P+8*F:P+4*F}var k=this.getBounding().height,I=this.gap,R=I.top;R>=1&&(R/=k);var B=I.bottom;B>=1&&(B/=k),E-=(D=P-E)*B,P+=D*R;var V=this.realValueToValue(E,{range:w}),J=this.realValueToValue(P,{range:w}),Z=this.realValueToDisplayValue(E,{range:w}),Q=this.realValueToDisplayValue(P,{range:w});return{from:V,to:J,range:J-V,realFrom:E,realTo:P,realRange:P-E,displayFrom:Z,displayTo:Q,displayRange:Q-Z}},e.prototype.isInCandle=function(){return this.getParent().getId()===K},e.prototype.isFromZero=function(){return this.position===yt.Left&&this.inside||this.position===yt.Right&&!this.inside},e.prototype.createTicksImp=function(){var t,i,n=this,r=this.getRange(),a=r.displayFrom,s=r.displayTo,l=r.displayRange,u=[];if(l>=0){var c=function(k){var I=Math.floor(vt(k)),R=Rt(I),B=k/R;return+(k=(B<1.5?1:B<2.5?2:B<3.5?3:B<4.5?4:B<5.5?5:B<6.5?6:8)*R).toFixed(Math.abs(I))}(l/8),h=function(k){var I=k.toString(),R=I.indexOf("e");if(R>0){var B=+I.slice(R+1);return B<0?-B:0}var V=I.indexOf(".");return V<0?0:I.length-1-V}(c),p=je(Math.ceil(a/c)*c,h),d=je(Math.floor(s/c)*c,h),v=0,g=p;if(c!==0)for(;g<=d;){var f=g.toFixed(h);u[v]={text:f,coord:0,value:f},++v,g+=c}}var y=this.getParent(),x=(i=(t=y.getYAxisWidget())===null||t===void 0?void 0:t.getBounding().height)!==null&&i!==void 0?i:0,_=y.getChart().getChartStore(),b=[],C=_.getIndicatorsByPaneId(y.getId()),T=_.getStyles(),w=0,E=!1;this.isInCandle()?w=_.getPrecision().price:C.forEach(function(k){w=Math.max(w,k.precision),E||(E=k.shouldFormatBigNumber)});var P=_.getCustomApi(),D=_.getThousandsSeparator(),F=_.getDecimalFold(),O=T.xAxis.tickText.size,M=NaN;return u.forEach(function(k){var I=k.value,R=n.displayValueToText(+I,w),B=n.convertToPixel(n.realValueToValue(n.displayValueToRealValue(+I,{range:r}),{range:r}));E&&(R=P.formatBigNumber(I)),R=F.format(D.format(R));var V=L(M);B>O&&B<x-O&&(V&&Math.abs(M-B)>2*O||!V)&&(b.push({text:R,coord:B,value:I}),M=B)}),j(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:b}):b},e.prototype.getAutoSize=function(){var t=this.getParent(),i=t.getChart().getChartStore(),n=i.getStyles(),r=n.yAxis,a=r.size;if(a!=="auto")return a;var s=0;if(r.show&&(r.axisLine.show&&(s+=r.axisLine.size),r.tickLine.show&&(s+=r.tickLine.length),r.tickText.show)){var l=0;this.getTicks().forEach(function(x){l=Math.max(l,Xt(x.text,r.tickText.size,r.tickText.weight,r.tickText.family))}),s+=r.tickText.marginStart+r.tickText.marginEnd+l}var u=n.crosshair,c=0;if(u.show&&u.horizontal.show&&u.horizontal.text.show){var h=i.getIndicatorsByPaneId(t.getId()),p=0,d=!1;h.forEach(function(x){p=Math.max(x.precision,p),d||(d=x.shouldFormatBigNumber)});var v=2;if(this.isInCandle()){var g=i.getPrecision().price,f=n.indicator.lastValueMark;v=f.show&&f.text.show?Math.max(p,g):g}else v=p;var y=q(this.getRange().displayTo,v);d&&(y=i.getCustomApi().formatBigNumber(y)),y=i.getDecimalFold().format(y),c+=u.horizontal.text.paddingLeft+u.horizontal.text.paddingRight+2*u.horizontal.text.borderSize+Xt(y,u.horizontal.text.size,u.horizontal.text.weight,u.horizontal.text.family)}return Math.max(s,c)},e.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var i=this.getBounding().height,n=this.getRange(),r=n.realFrom,a=n.realRange,s=(this.reverse?t/i:1-t/i)*a+r;return this.realValueToValue(s,{range:n})},e.prototype.convertToPixel=function(t){var i,n,r=this.getRange(),a=this.valueToRealValue(t,{range:r}),s=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,l=(a-r.realFrom)/r.realRange;return this.reverse?Math.round(l*s):Math.round((1-l)*s)},e.prototype.convertToNicePixel=function(t){var i,n,r=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.convertToPixel(t);return Math.round(Math.max(.05*r,Math.min(a,.98*r)))},e.extend=function(t){var i=function(n){function r(a){return n.call(this,a,t)||this}return N(r,n),r}(e);return i},e}(Pi),Kn={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(o){return"".concat(q(o,2),"%")},valueToRealValue:function(o,e){var t=e.range;return(o-t.from)/t.range*t.realRange+t.realFrom},realValueToValue:function(o,e){var t=e.range;return(o-t.realFrom)/t.realRange*t.range+t.from},createRange:function(o){var e=o.chart,t=o.defaultRange,i=e.getDataList()[e.getVisibleRange().from];if(S(i)){var n=t.from,r=t.to,a=t.range,s=(t.from-i.close)/i.close*100,l=(t.to-i.close)/i.close*100,u=l-s;return{from:n,to:r,range:a,realFrom:s,realTo:l,realRange:u,displayFrom:s,displayTo:l,displayRange:u}}return t}},Jn={name:"logarithm",minSpan:function(o){return .05*Rt(-o)},valueToRealValue:function(o){return o<0?-vt(Math.abs(o)):vt(o)},realValueToDisplayValue:function(o){return o<0?-Rt(Math.abs(o)):Rt(o)},displayValueToRealValue:function(o){return o<0?-vt(Math.abs(o)):vt(o)},realValueToValue:function(o){return o<0?-Rt(Math.abs(o)):Rt(o)},createRange:function(o){var e=o.defaultRange,t=e.from,i=e.to,n=e.range,r=t<0?-vt(Math.abs(t)):vt(t),a=i<0?-vt(Math.abs(i)):vt(i);return{from:t,to:i,range:n,realFrom:r,realTo:a,realRange:a-r,displayFrom:t,displayTo:i,displayRange:n}}},Se={normal:Kt.extend({name:"normal"}),percentage:Kt.extend(Kn),logarithm:Kt.extend(Jn)},ki=function(){function o(e,t){this._bounding=te(),this._originalBounding=te(),this._visible=!0,this._chart=e,this._id=t,this._container=gt("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return o.prototype.getContainer=function(){return this._container},o.prototype.setVisible=function(e){this._visible!==e&&(this._container.style.display=e?"block":"none",this._visible=e)},o.prototype.getVisible=function(){return this._visible},o.prototype.getId=function(){return this._id},o.prototype.getChart=function(){return this._chart},o.prototype.getBounding=function(){return this._bounding},o.prototype.setOriginalBounding=function(e){Y(this._originalBounding,e)},o.prototype.getOriginalBounding=function(){return this._originalBounding},o.prototype.update=function(e){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(e??3,this._container,this._bounding)},o}(),Ai=function(o){function e(t,i,n){var r=o.call(this,t,i)||this;r._yAxisWidget=null,r._options={id:"",minHeight:30,dragEnabled:!0,order:0,height:100,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var a=r.getContainer();return r._mainWidget=r.createMainWidget(a),r._yAxisWidget=r.createYAxisWidget(a),r.setOptions(n),r}return N(e,o),e.prototype.setOptions=function(t){var i,n,r,a,s,l=this.getId();if(l===K||l===H){var u=(i=t.axis)===null||i===void 0?void 0:i.name;(!S(this._axis)||S(u)&&this._options.axis.name!==u)&&(this._axis=this.createAxisComponent(u??"normal"))}else S(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof Kt&&this._axis.setAutoCalcTickFlag(!0),Y(this._options,t),this._axis.override(A(A({},this._options.axis),{name:(r=(n=t.axis)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"normal"}));var c=null,h="default";return this.getId()===H?(c=this.getMainWidget().getContainer(),h="ew-resize"):(c=this.getYAxisWidget().getContainer(),h="ns-resize"),(s=(a=t.axis)===null||a===void 0?void 0:a.scrollZoomEnabled)===null||s===void 0||s?c.style.cursor=h:c.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,i,n,r){var a,s,l,u;Y(this.getBounding(),t);var c={};S(t.height)&&(c.height=t.height),S(t.top)&&(c.top=t.top),this._mainWidget.setBounding(c);var h=S(i);return h&&this._mainWidget.setBounding(i),S(this._yAxisWidget)&&(this._yAxisWidget.setBounding(c),this._axis.position===yt.Left?S(n)&&this._yAxisWidget.setBounding(A(A({},n),{left:0})):S(r)&&(this._yAxisWidget.setBounding(r),h&&this._yAxisWidget.setBounding({left:((a=i.left)!==null&&a!==void 0?a:0)+((s=i.width)!==null&&s!==void 0?s:0)+((l=i.right)!==null&&l!==void 0?l:0)-((u=r.width)!==null&&u!==void 0?u:0)}))),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var i;this._mainWidget.update(t),(i=this._yAxisWidget)===null||i===void 0||i.update(t)},e.prototype.destroy=function(){var t;this._mainWidget.destroy(),(t=this._yAxisWidget)===null||t===void 0||t.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,r=i.height,a=gt("canvas",{width:"".concat(n,"px"),height:"".concat(r,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Et(a);a.width=n*l,a.height=r*l,s.scale(l,l);var u=this._mainWidget.getBounding();if(s.drawImage(this._mainWidget.getImage(t),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();s.drawImage(this._yAxisWidget.getImage(t),c.left,0,c.width,c.height)}return a},e.prototype.createYAxisWidget=function(t){return null},e}(ki),Ri=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.createAxisComponent=function(t){var i=function(n){var r;return(r=Se[n])!==null&&r!==void 0?r:Se.normal}(t??"default");return new i(this)},e.prototype.createMainWidget=function(t){return new Ei(t,this)},e.prototype.createYAxisWidget=function(t){return new qn(t,this)},e}(Ai),$n=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.createMainWidget=function(t){return new Gn(t,this)},e}(Ri),Qn=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,i,n){var r=n.tickLine,a=n.axisLine.size;return t.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+r.length}]}})},e.prototype.createTickTexts=function(t,i,n){var r=n.tickText,a=n.axisLine.size,s=n.tickLine.length;return t.map(function(l){return{x:l.coord,y:a+s+r.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(Ii),to=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},e.prototype.getProgressOverlay=function(){var t,i;return(i=(t=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||t===void 0?void 0:t.overlay)!==null&&i!==void 0?i:null},e.prototype.getDefaultFigures=function(t,i){var n,r=[],a=this.getWidget(),s=a.getPane().getChart().getChartStore(),l=s.getClickOverlayInfo();if(t.needDefaultXAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;i.forEach(function(h,p){u=Math.min(u,h.x),c=Math.max(c,h.x);var d=t.points[p];if(L(d.timestamp)){var v=s.getCustomApi().formatDate(d.timestamp,"YYYY-MM-DD HH:mm",m.FormatDateType.Crosshair);r.push({type:"text",attrs:{x:h.x,y:0,text:v,align:"center"},ignoreEvent:!0})}}),i.length>1&&r.unshift({type:"rect",attrs:{x:u,y:0,width:c-u,height:a.getBounding().height},ignoreEvent:!0})}return r},e.prototype.getFigures=function(t,i){var n,r,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(r=(n=t.createXAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&r!==void 0?r:[]},e}(Di),eo=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.compare=function(t){return S(t.timestamp)},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,i){var n=t.timestamp;return i.getCustomApi().formatDate(n,"YYYY-MM-DD HH:mm",m.FormatDateType.Crosshair)},e.prototype.getTextAttrs=function(t,i,n,r,a,s){var l=n.realX,u=0,c="center";return l-i/2-s.paddingLeft<0?(u=0,c="left"):l+i/2+s.paddingRight>r.width?(u=r.width,c="right"):u=l,{x:u,y:0,text:t,align:c,baseline:"top"}},e}(Mi),io=function(o){function e(t,i){var n=o.call(this,t,i)||this;return n._xAxisView=new Qn(n),n._overlayXAxisView=new to(n),n._crosshairVerticalLabelView=new eo(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return N(e,o),e.prototype.getName=function(){return ft},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(we),Fi=function(o){function e(t,i){var n=o.call(this,t)||this;return n.override(i),n}return N(e,o),e.prototype.override=function(t){var i=t.name,n=t.scrollZoomEnabled,r=t.createTicks;z(this.name)||(this.name=i),this.scrollZoomEnabled=n??this.scrollZoomEnabled,this.createTicks=r??this.createTicks},e.prototype.createRangeImp=function(){var t=this.getParent().getChart().getChartStore().getVisibleRange(),i=t.realFrom,n=t.realTo,r=n-i+1;return{from:i,to:n,range:r,realFrom:i,realTo:n,realRange:r,displayFrom:i,displayTo:n,displayRange:r}},e.prototype.createTicksImp=function(){var t=this,i=this.getRange(),n=i.realFrom,r=i.realTo,a=this.getParent().getChart().getChartStore(),s=a.getCustomApi().formatDate,l=a.getTimeWeightTickList(),u=[],c=function(_,b){var C,T;try{for(var w=tt(_),E=w.next();!E.done;E=w.next()){var P=E.value;if(P.dataIndex>=b&&P.dataIndex<r){var D=P.timestamp,F=P.weight,O=P.dataIndex,M="";switch(F){case Je:M=s(D,"YYYY",m.FormatDateType.XAxis);break;case $e:M=s(D,"YYYY-MM",m.FormatDateType.XAxis);break;case Qe:M=s(D,"MM-DD",m.FormatDateType.XAxis);break;case ti:case xe:M=s(D,"HH:mm",m.FormatDateType.XAxis);break;case ei:M=s(D,"HH:mm:ss",m.FormatDateType.XAxis);break;default:M=s(D,"YYYY-MM-DD HH:mm",m.FormatDateType.XAxis)}u.push({coord:t.convertToPixel(O),value:D,text:M})}}}catch(k){C={error:k}}finally{try{E&&!E.done&&(T=w.return)&&T.call(w)}finally{if(C)throw C.error}}};if(c(l,n),l.length>0){for(var h=a.getBarSpace().bar,p=a.getStyles().xAxis.tickText,d=ni(h,p),v=l[l.length-1].dataIndex+d-1,g=[],f=v;f<r;f++){var y=a.dataIndexToTimestamp(f);L(y)&&g.push({timestamp:y})}if(g.length>0){var x=new Map;ii(x,g,a.getDateTimeFormat(),v),c(be(x,h,p),v)}}return j(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:u}):u},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),i=t.xAxis,n=i.size;if(n!=="auto")return n;var r=t.crosshair,a=0;i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show&&(a+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var s=0;return r.show&&r.vertical.show&&r.vertical.text.show&&(s+=r.vertical.text.paddingTop+r.vertical.text.paddingBottom+2*r.vertical.text.borderSize+r.vertical.text.size),Math.max(a,s)},e.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.coordinateToDataIndex(t);return i.dataIndexToTimestamp(n)},e.prototype.convertTimestampToPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.timestampToDataIndex(t);return i.dataIndexToCoordinate(n)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(t)},e.extend=function(t){var i=function(n){function r(a){return n.call(this,a,t)||this}return N(r,n),r}(e);return i},e}(Pi),Ee={normal:Fi.extend({name:"normal"})},no=function(o){function e(){return o!==null&&o.apply(this,arguments)||this}return N(e,o),e.prototype.createAxisComponent=function(t){var i=function(n){var r;return(r=Ee[n])!==null&&r!==void 0?r:Ee.normal}(t);return new i(this)},e.prototype.createMainWidget=function(t){return new io(t,this)},e}(Ai),oo=function(o){function e(t,i){var n,r,a,s=o.call(this,t,i)||this;return s._dragFlag=!1,s._dragStartY=0,s._topPaneHeight=0,s._bottomPaneHeight=0,s._topPane=null,s._bottomPane=null,s._pressedMouseMoveEvent=(n=s._pressedTouchMouseMoveEvent,r=20,a=0,function(){var l=Date.now();l-a>r&&(n.apply(this,arguments),a=l)}),s.registerEvent("touchStartEvent",s._mouseDownEvent.bind(s)).registerEvent("touchMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("touchEndEvent",s._mouseUpEvent.bind(s)).registerEvent("mouseDownEvent",s._mouseDownEvent.bind(s)).registerEvent("mouseUpEvent",s._mouseUpEvent.bind(s)).registerEvent("pressedMouseMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("mouseEnterEvent",s._mouseEnterEvent.bind(s)).registerEvent("mouseLeaveEvent",s._mouseLeaveEvent.bind(s)),s}return N(e,o),e.prototype.getName=function(){return jt},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){var i=this;this._dragFlag=!0,this._dragStartY=t.pageY;var n=this.getPane(),r=n.getChart();this._topPane=n.getTopPane(),this._bottomPane=n.getBottomPane();var a=r.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var s=a.findIndex(function(h){var p;return h.getId()===((p=i._topPane)===null||p===void 0?void 0:p.getId())}),l=s-1;l>-1;l--){var u=a[l];if(u.getOptions().state!=="minimize"){this._topPane=u;break}}if(this._bottomPane.getOptions().state==="minimize")for(s=a.findIndex(function(h){var p;return h.getId()===((p=i._bottomPane)===null||p===void 0?void 0:p.getId())}),l=s+1;l<a.length;l++){var c=a[l];if(c.getOptions().state!=="minimize"){this._bottomPane=c;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var i=t.pageY-this._dragStartY,n=i<0;if(S(this._topPane)&&S(this._bottomPane)){var r=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&r.state!=="minimize"&&r.dragEnabled){var a=null,s=null,l=0,u=0;n?(a=this._topPane,s=this._bottomPane,l=this._topPaneHeight,u=this._bottomPaneHeight):(a=this._bottomPane,s=this._topPane,l=this._bottomPaneHeight,u=this._topPaneHeight);var c=a.getOptions().minHeight;if(l>c){var h=Math.max(l-Math.abs(i),c),p=l-h;a.setBounding({height:h}),s.setBounding({height:u+p});var d=this.getPane(),v=d.getChart();v.getChartStore().executeAction(m.ActionType.OnPaneDrag,{paneId:d.getId()}),v.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getBottomPane().getOptions().dragEnabled){var i=t.getChart().getStyles().separator;return this.getContainer().style.background=i.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="transparent",!0)},e.prototype.createContainer=function(){return gt("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,i,n){if(n===4||n===2){var r=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-r.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(gi),ro=function(o){function e(t,i,n,r){var a=o.call(this,t,i)||this;return a.getContainer().style.overflow="",a._topPane=n,a._bottomPane=r,a._separatorWidget=new oo(a.getContainer(),a),a}return N(e,o),e.prototype.setBounding=function(t){return Y(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,r=i.height,a=this.getChart().getStyles().separator,s=gt("canvas",{width:"".concat(n,"px"),height:"".concat(r,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=Et(s);return s.width=n*u,s.height=r*u,l.scale(u,u),l.fillStyle=a.color,l.fillRect(0,0,n,r),s},e.prototype.updateImp=function(t,i,n){if(t===4||t===2){var r=this.getChart().getStyles().separator;i.style.backgroundColor=r.color,i.style.height="".concat(n.height,"px"),i.style.marginLeft="".concat(n.left,"px"),i.style.width="".concat(n.width,"px"),this._separatorWidget.update(t)}},e}(ki);function Bi(){return typeof window<"u"&&window.navigator.userAgent.toLowerCase().includes("firefox")}function Pe(){return typeof window<"u"&&/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var Ie,ao=5,so=5,Li=5,Oi=30,De=0,lo=1,uo=2,co=function(){function o(e,t,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Pe(),this._onFirefoxOutsideMouseUp=function(r){n._mouseUpHandler(r)},this._onMobileSafariDoubleClick=function(r){n._firesTouchEvents(r)?(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(r),n._tapCoordinate).manhattanDistance<Oi&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(r),n._handler.doubleTapEvent),n._resetTapTimeout())):(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(r),n._clickCoordinate).manhattanDistance<Li&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(r),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()))},this._target=e,this._handler=t,this._options=i,this._init()}return o.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},o.prototype._mouseEnterHandler=function(e){var t,i,n,r=this;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},o.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},o.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},o.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},o.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(!S(this._handler.mouseWheelHortEvent)||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(!S(this._handler.mouseWheelVertEvent))return;var t=-e.deltaY/100;if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(t!==0){var i=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),i)}}},o.prototype._contextMenuHandler=function(e){this._preventDefault(e)},o.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),n=i.xOffset,r=i.yOffset,a=i.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(a<so)){if(!this._touchMoveExceededManhattanDistance){var s=.5*n,l=r>=s&&!this._options.treatVertDragAsPageScroll(),u=s>r&&!this._options.treatHorzDragAsPageScroll();l||u||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},o.prototype._mouseMoveWithDownHandler=function(e){e.button===De&&(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate).manhattanDistance>=ao&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent))},o.prototype._mouseTouchMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return{xOffset:i,yOffset:n,manhattanDistance:i+n}},o.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(e,t);this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance<Oi&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||(this._processEvent(i,this._handler.tapEvent),S(this._handler.tapEvent)&&this._preventDefault(e)),this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},o.prototype._mouseUpHandler=function(e){if(e.button===De){var t=this._makeCompatEvent(e);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Bi()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._firesTouchEvents(e)||(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance<Li&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent))}},o.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},o.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._touchMoveHandler.bind(this),r=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",r)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",r,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),500),this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(t))}},o.prototype._mouseDownHandler=function(e){if(e.button===uo)return this._preventDefault(e),void this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);if(e.button===De){var t=this._target.ownerDocument.documentElement;Bi()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",n),this._mousePressed=!0,this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(e)))}},o.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,i=function(n){e._handler.mouseDownOutsideEvent!=null&&(n.composed&&e._target.contains(n.composedPath()[0])||n.target!==null&&e._target.contains(n.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0}),Pe()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===lo)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},o.prototype._initPinch=function(){var e=this;(S(this._handler.pinchStartEvent)||S(this._handler.pinchEvent)||S(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",function(t){e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(t.touches.length===2&&e._startPinchMiddleCoordinate!==null&&S(e._handler.pinchEvent)){var i=e._getTouchDistance(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(A(A({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},o.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},o.prototype._startPinch=function(e){var t=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),S(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},o.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,S(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},o.prototype._mouseLeaveHandler=function(e){var t,i,n;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),this._firesTouchEvents(e)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Pe())},o.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},o.prototype._firesTouchEvents=function(e){var t;return S((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+500},o.prototype._processEvent=function(e,t){t?.call(this._handler,e)},o.prototype._makeCompatEvent=function(e,t){var i=this,n=t??e,r=this._target.getBoundingClientRect();return{x:n.clientX-r.left,y:n.clientY-r.top,pageX:n.pageX,pageY:n.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click"&&e.type!=="wheel",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},o.prototype._getTouchDistance=function(e,t){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},o.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},o.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},o.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},o.prototype._touchWithId=function(e,t){for(var i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null},o}(),ho=function(){function o(e,t){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":i._chart.getChartStore().zoom(.5);break;case"Minus":i._chart.getChartStore().zoom(-.5);break;case"ArrowLeft":(r=i._chart.getChartStore()).startScroll(),r.scroll(-3*r.getBarSpace().bar);break;case"ArrowRight":var r;(r=i._chart.getChartStore()).startScroll(),r.scroll(3*r.getBarSpace().bar)}},this._container=e,this._chart=t,this._event=new co(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return o.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},o.prototype.pinchEvent=function(e,t){var i=this._findWidgetByEvent(e),n=i.pane,r=i.widget;if(n?.getId()!==H&&r?.getName()===$){var a=this._makeWidgetEvent(e,r),s=5*(t-this._pinchScale);return this._pinchScale=t,this._chart.getChartStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},o.prototype.mouseWheelHortEvent=function(e,t){var i=this._chart.getChartStore();return i.startScroll(),i.scroll(t),!0},o.prototype.mouseWheelVertEvent=function(e,t){var i=this._findWidgetByEvent(e).widget,n=this._makeWidgetEvent(e,i);return i?.getName()===$&&(this._chart.getChartStore().zoom(t,{x:n.x,y:n.y}),!0)},o.prototype.mouseDownEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(this._mouseDownWidget=n,n!==null){var r=this._makeWidgetEvent(e,n);switch(n.getName()){case jt:return n.dispatchEvent("mouseDownEvent",r);case $:var a=i.getAxisComponent().getRange();return this._prevYAxisRange=A({},a),this._startScrollCoordinate={x:r.x,y:r.y},this._chart.getChartStore().startScroll(),n.dispatchEvent("mouseDownEvent",r);case ft:return this._processXAxisScrollStartEvent(n,r);case ut:return this._processYAxisScaleStartEvent(n,r)}}return!1},o.prototype.mouseMoveEvent=function(e){var t,i,n,r=this._findWidgetByEvent(e),a=r.pane,s=r.widget,l=this._makeWidgetEvent(e,s);if(((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())===a?.getId()&&((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())===s?.getName()||(s?.dispatchEvent("mouseEnterEvent",l),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null)switch(s.getName()){case $:var u=s.dispatchEvent("mouseMoveEvent",l),c=this._chart.getChartStore(),h={x:l.x,y:l.y,paneId:a?.getId()};return u&&c.getActiveTooltipIcon()!==null&&(h=void 0,s.getContainer().style.cursor="pointer"),this._chart.getChartStore().setCrosshair(h),u;case jt:case ft:case ut:return u=s.dispatchEvent("mouseMoveEvent",l),this._chart.getChartStore().setCrosshair(),u}return!1},o.prototype.pressedMouseMoveEvent=function(e){var t,i;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===jt)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var n=this._findWidgetByEvent(e),r=n.pane,a=n.widget;if(a!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===r?.getId()&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===a.getName()){var s=this._makeWidgetEvent(e,a);switch(a.getName()){case $:var l=a.dispatchEvent("pressedMouseMoveEvent",s);return l||this._processMainScrollingEvent(a,s),this._chart.getChartStore().setCrosshair({x:s.x,y:s.y,paneId:r?.getId()}),l;case ft:return this._processXAxisScrollingEvent(a,s);case ut:return this._processYAxisScalingEvent(a,s)}}return!1},o.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case $:case jt:case ft:case ut:i=t.dispatchEvent("mouseUpEvent",n)}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},o.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var i=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",i)}return!1},o.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case $:case ft:case ut:i=t.dispatchEvent("mouseRightClickEvent",n)}i&&this._chart.updatePane(1)}return!1},o.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null)switch(n.getName()){case $:var r=this._makeWidgetEvent(e,n);return n.dispatchEvent("mouseDoubleClickEvent",r);case ut:var a=i.getAxisComponent();if(!a.getAutoCalcTickFlag())return a.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0}return!1},o.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},o.prototype.touchStartEvent=function(e){var t,i,n=this._findWidgetByEvent(e),r=n.pane,a=n.widget;if(a!==null){var s=this._makeWidgetEvent(e,a);switch(a.getName()){case $:var l=this._chart.getChartStore();if(a.dispatchEvent("mouseDownEvent",s))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,l.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(Ge(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var u=r.getAxisComponent().getRange();if(this._prevYAxisRange=A({},u),this._startScrollCoordinate={x:s.x,y:s.y},l.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var c=s.x-this._touchCoordinate.x,h=s.y-this._touchCoordinate.y;Math.sqrt(c*c+h*h)<10?(this._touchCoordinate={x:s.x,y:s.y},l.setCrosshair({x:s.x,y:s.y,paneId:r?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,l.setCrosshair())}return!0;case ft:return(p=this._processXAxisScrollStartEvent(a,s))&&((t=s.preventDefault)===null||t===void 0||t.call(s)),p;case ut:var p;return(p=this._processYAxisScaleStartEvent(a,s))&&((i=s.preventDefault)===null||i===void 0||i.call(s)),p}}return!1},o.prototype.touchMoveEvent=function(e){var t,i,n,r,a=this._findWidgetByEvent(e),s=a.pane,l=a.widget;if(l!==null){var u=this._makeWidgetEvent(e,l),c=l.getName(),h=this._chart.getChartStore();switch(c){case $:return l.dispatchEvent("pressedMouseMoveEvent",u)?((t=u.preventDefault)===null||t===void 0||t.call(u),h.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?((i=u.preventDefault)===null||i===void 0||i.call(u),h.setCrosshair({x:u.x,y:u.y,paneId:s?.getId()})):this._processMainScrollingEvent(l,u),!0);case ft:return(p=this._processXAxisScrollingEvent(l,u))&&((n=u.preventDefault)===null||n===void 0||n.call(u)),p;case ut:var p;return(p=this._processYAxisScalingEvent(l,u))&&((r=u.preventDefault)===null||r===void 0||r.call(u)),p}}return!1},o.prototype.touchEndEvent=function(e){var t=this,i=this._findWidgetByEvent(e).widget;if(i!==null){var n=this._makeWidgetEvent(e,i);switch(i.getName()){case $:if(i.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var r=new Date().getTime()-this._flingStartTime,a=(n.x-this._startScrollCoordinate.x)/(r>0?r:1)*20;if(r<200&&Math.abs(a)>0){var s=this._chart.getChartStore(),l=function(){t._flingScrollRequestId=ee(function(){s.startScroll(),s.scroll(a),a*=.975,Math.abs(a)<1?t._flingScrollRequestId!==null&&(Ge(t._flingScrollRequestId),t._flingScrollRequestId=null):l()})};l()}}return!0;case ft:case ut:i.dispatchEvent("mouseUpEvent",n)&&this._chart.updatePane(1)}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},o.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget,r=!1;if(n!==null){var a=this._makeWidgetEvent(e,n),s=n.dispatchEvent("mouseClickEvent",a);if(n.getName()===$){var l=this._makeWidgetEvent(e,n),u=this._chart.getChartStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,{notInvalidate:!0}),r=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:l.x,y:l.y},u.setCrosshair({x:l.x,y:l.y,paneId:i?.getId()},{notInvalidate:!0}),r=!0),this._touchCancelCrosshair=!1)}(r||s)&&this._chart.updatePane(1)}return r},o.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},o.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null&&n.getName()===$){var r=this._makeWidgetEvent(e,n);return this._touchCoordinate={x:r.x,y:r.y},this._chart.getChartStore().setCrosshair({x:r.x,y:r.y,paneId:i?.getId()}),!0}return!1},o.prototype._processMainScrollingEvent=function(e,t){if(this._startScrollCoordinate!==null){var i=e.getPane().getAxisComponent(),n=e.getBounding();if(this._prevYAxisRange!==null&&!i.getAutoCalcTickFlag()&&i.scrollZoomEnabled){var r=this._prevYAxisRange,a=r.from,s=r.to,l=r.range*((i.reverse?this._startScrollCoordinate.y-t.y:t.y-this._startScrollCoordinate.y)/n.height),u=a+l,c=s+l,h=i.valueToRealValue(u,{range:this._prevYAxisRange}),p=i.valueToRealValue(c,{range:this._prevYAxisRange}),d=i.realValueToDisplayValue(h,{range:this._prevYAxisRange}),v=i.realValueToDisplayValue(p,{range:this._prevYAxisRange});i.setRange({from:u,to:c,range:c-u,realFrom:h,realTo:p,realRange:p-h,displayFrom:d,displayTo:v,displayRange:v-d})}var g=t.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(g)}},o.prototype._processXAxisScrollStartEvent=function(e,t){var i=e.dispatchEvent("mouseDownEvent",t);return i&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:t.x,y:t.y},this._xAxisStartScaleDistance=t.pageX,i},o.prototype._processXAxisScrollingEvent=function(e,t){var i,n=e.dispatchEvent("pressedMouseMoveEvent",t);if(n)this._chart.updatePane(1);else if(e.getPane().getAxisComponent().scrollZoomEnabled){var r=this._xAxisStartScaleDistance/t.pageX;if(Number.isFinite(r)){var a=10*(r-this._xAxisScale);this._xAxisScale=r,this._chart.getChartStore().zoom(a,(i=this._xAxisStartScaleCoordinate)!==null&&i!==void 0?i:void 0)}}return n},o.prototype._processYAxisScaleStartEvent=function(e,t){var i=e.dispatchEvent("mouseDownEvent",t);i&&this._chart.updatePane(1);var n=e.getPane().getAxisComponent().getRange();return this._prevYAxisRange=A({},n),this._yAxisStartScaleDistance=t.pageY,i},o.prototype._processYAxisScalingEvent=function(e,t){var i=e.dispatchEvent("pressedMouseMoveEvent",t);if(i)this._chart.updatePane(1);else{var n=e.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&n.scrollZoomEnabled){var r=this._prevYAxisRange,a=r.from,s=r.to,l=r.range,u=l*(t.pageY/this._yAxisStartScaleDistance),c=(u-l)/2,h=a-c,p=s+c,d=n.valueToRealValue(h,{range:this._prevYAxisRange}),v=n.valueToRealValue(p,{range:this._prevYAxisRange}),g=n.realValueToDisplayValue(d,{range:this._prevYAxisRange}),f=n.realValueToDisplayValue(v,{range:this._prevYAxisRange});n.setRange({from:h,to:p,range:u,realFrom:d,realTo:v,realRange:v-d,displayFrom:g,displayTo:f,displayRange:f-g}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return i},o.prototype._findWidgetByEvent=function(e){var t,i,n,r,a=e.x,s=e.y,l=this._chart.getSeparatorPanes(),u=this._chart.getStyles().separator.size;try{for(var c=tt(l),h=c.next();!h.done;h=c.next()){var p=pt(h.value,2)[1],d=(x=p.getBounding()).top-Math.round((7-u)/2);if(a>=x.left&&a<=x.left+x.width&&s>=d&&s<=d+7)return{pane:p,widget:p.getWidget()}}}catch(P){t={error:P}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}var v=this._chart.getDrawPanes(),g=null;try{for(var f=tt(v),y=f.next();!y.done;y=f.next()){var x,_=y.value;if(a>=(x=_.getBounding()).left&&a<=x.left+x.width&&s>=x.top&&s<=x.top+x.height){g=_;break}}}catch(P){n={error:P}}finally{try{y&&!y.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}var b=null;if(g!==null){if(!S(b)){var C=g.getMainWidget(),T=C.getBounding();a>=T.left&&a<=T.left+T.width&&s>=T.top&&s<=T.top+T.height&&(b=C)}if(!S(b)){var w=g.getYAxisWidget();if(w!==null){var E=w.getBounding();a>=E.left&&a<=E.left+E.width&&s>=E.top&&s<=E.top+E.height&&(b=w)}}}return{pane:g,widget:b}},o.prototype._makeWidgetEvent=function(e,t){var i,n,r,a=(i=t?.getBounding())!==null&&i!==void 0?i:null;return A(A({},e),{x:e.x-((n=a?.left)!==null&&n!==void 0?n:0),y:e.y-((r=a?.top)!==null&&r!==void 0?r:0)})},o.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},o}();m.DomPosition=void 0,(Ie=m.DomPosition||(m.DomPosition={})).Root="root",Ie.Main="main",Ie.YAxis="yAxis";var Wi=function(){function o(e,t){this._chartBounding=te(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._initContainer(e),this._chartEvent=new ho(this._chartContainer,this),this._chartStore=new An(this,t),this._initPanes(t),this._layout()}return o.prototype._initContainer=function(e){this._container=e,this._chartContainer=gt("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer),this._cacheChartBounding()},o.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},o.prototype._initPanes=function(e){var t,i=this,n=(t=e?.layout)!==null&&t!==void 0?t:[{type:"candle"}],r=function(s){var l,u;if(!S(i._candlePane)){var c=(l=s.options)!==null&&l!==void 0?l:{};Y(c,{id:K}),i._candlePane=i._createPane($n,K,c),((u=s.content)!==null&&u!==void 0?u:[]).forEach(function(h){i.createIndicator(h,!0,c)})}},a=function(s){if(!S(i._xAxisPane)){var l=i._createPane(no,H,s??{});i._xAxisPane=l}};n.forEach(function(s){var l,u,c;switch(s.type){case"candle":r(s);break;case"indicator":var h=(l=s.content)!==null&&l!==void 0?l:[];if(h.length>0){var p=(c=(u=s.options)===null||u===void 0?void 0:u.id)!==null&&c!==void 0?c:null;S(p)&&(p=ie(hi));var d=A(A({},s.options),{id:p});h.forEach(function(v){i.createIndicator(v,!0,d)})}break;case"xAxis":a(s.options)}}),r({}),a({order:Number.MAX_SAFE_INTEGER})},o.prototype._createPane=function(e,t,i){var n=new e(this,t,i??{});return this._drawPanes.push(n),n},o.prototype._recalculatePaneHeight=function(e,t,i){if(i===0)return!1;var n=this._drawPanes.filter(function(h){var p=h.getId();return h.getOptions().state==="normal"&&p!==e.getId()&&p!==H}),r=n.length;if(r===0)return!1;if(e.getId()!==K&&S(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var a=this._candlePane.getBounding().height;if(a>0){var s=this._candlePane.getOptions().minHeight,l=a+i;l<s&&(t-=a+i-(l=s)),this._candlePane.setBounding({height:l})}}else{var u=i,c=Math.floor(i/r);n.forEach(function(h,p){var d=h.getBounding().height,v=0;(v=p===r-1?d+u:d+c)<h.getOptions().minHeight&&(v=h.getOptions().minHeight),h.setBounding({height:v}),u-=v-d}),Math.abs(u)>0&&(t-=u)}return e.setBounding({height:t}),!0},o.prototype.getDrawPaneById=function(e){if(e===K)return this._candlePane;if(e===H)return this._xAxisPane;var t=this._drawPanes.find(function(i){return i.getId()===e});return t??null},o.prototype.getContainer=function(){return this._container},o.prototype.getChartStore=function(){return this._chartStore},o.prototype.getXAxisPane=function(){return this._xAxisPane},o.prototype.getDrawPanes=function(){return this._drawPanes},o.prototype.getSeparatorPanes=function(){return this._separatorPanes},o.prototype.layout=function(e){var t,i,n,r,a,s,l=this;(t=e.sort)!==null&&t!==void 0&&t&&(this._layoutOptions.sort=e.sort),(i=e.measureHeight)!==null&&i!==void 0&&i&&(this._layoutOptions.measureHeight=e.measureHeight),(n=e.measureWidth)!==null&&n!==void 0&&n&&(this._layoutOptions.measureWidth=e.measureWidth),(r=e.update)!==null&&r!==void 0&&r&&(this._layoutOptions.update=e.update),(a=e.buildYAxisTick)!==null&&a!==void 0&&a&&(this._layoutOptions.buildYAxisTick=e.buildYAxisTick),(s=e.buildYAxisTick)!==null&&s!==void 0&&s&&(this._layoutOptions.forceBuildYAxisTick=e.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(u){l._layout(),l._layoutPending=!1}).catch(function(u){}))},o.prototype._layout=function(){var e=this,t=this._layoutOptions,i=t.sort,n=t.measureHeight,r=t.measureWidth,a=t.update,s=t.buildYAxisTick,l=t.forceBuildYAxisTick;if(i){for(;S(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(I,R){return I.getOptions().order-R.getOptions().order});var u=null;this._drawPanes.forEach(function(I){if(I.getId()!==H){if(S(u)){var R=new ro(e,"",u,I);e._chartContainer.appendChild(R.getContainer()),e._separatorPanes.set(I,R)}u=I}e._chartContainer.appendChild(I.getContainer())})}if(n){var c=this._chartBounding.height,h=this.getStyles().separator.size,p=this._xAxisPane.getAxisComponent().getAutoSize(),d=c-p;d<0&&(d=0),this._drawPanes.forEach(function(I){var R=I.getId();if(S(e._separatorPanes.get(I))&&(d-=h),R!==H&&R!==K&&I.getVisible()){var B=I.getBounding().height;B>d?(B=d,d=0):d-=B,I.setBounding({height:B})}}),this._candlePane.setBounding({height:Math.max(d,0)}),this._xAxisPane.setBounding({height:p});var v=0;this._drawPanes.forEach(function(I){var R=e._separatorPanes.get(I);S(R)&&(R.setBounding({height:h,top:v}),v+=h),I.setBounding({top:v}),v+=I.getBounding().height})}var g=r;if((s||l)&&this._drawPanes.forEach(function(I){var R=I.getAxisComponent().buildTicks(l);g||(g=R)}),g){var f=this._chartBounding.width,y=this.getStyles(),x=0,_=!0,b=0,C=!0;this._drawPanes.forEach(function(I){if(I.getId()!==H){var R=I.getAxisComponent(),B=R.inside,V=R.getAutoSize();R.position===yt.Left?(x=Math.max(x,V),B&&(_=!1)):(b=Math.max(b,V),B&&(C=!1))}});var T=f,w=0,E=0;_&&(T-=x,w=x),C&&(T-=b,E=b),this._chartStore.setTotalBarSpace(T);var P={width:f},D={width:T,left:w,right:E},F={width:x},O={width:b},M=y.separator.fill,k={};k=M?P:D,this._drawPanes.forEach(function(I){var R;(R=e._separatorPanes.get(I))===null||R===void 0||R.setBounding(k),I.setBounding(P,D,F,O)})}a&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,forceBuildYAxisTick:!1}},o.prototype.updatePane=function(e,t){var i=this;if(S(t)){var n=this.getDrawPaneById(t);n?.update(e)}else this._drawPanes.forEach(function(r){var a;r.update(e),(a=i._separatorPanes.get(r))===null||a===void 0||a.update(e)})},o.prototype.crosshairChange=function(e){var t=this;if(this._chartStore.hasAction(m.ActionType.OnCrosshairChange)){var i={};this._drawPanes.forEach(function(n){var r=n.getId(),a={};t._chartStore.getIndicatorsByPaneId(r).forEach(function(s){var l,u=s.result;a[s.name]=u[(l=e.dataIndex)!==null&&l!==void 0?l:u.length-1]}),i[r]=a}),z(e.paneId)&&this._chartStore.executeAction(m.ActionType.OnCrosshairChange,A(A({},e),{indicatorData:i}))}},o.prototype.getDom=function(e,t){var i,n;if(!S(e))return this._chartContainer;var r=this.getDrawPaneById(e);if(S(r))switch(t??m.DomPosition.Root){case m.DomPosition.Root:return r.getContainer();case m.DomPosition.Main:return r.getMainWidget().getContainer();case m.DomPosition.YAxis:return(n=(i=r.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&n!==void 0?n:null}return null},o.prototype.getSize=function(e,t){var i,n;if(!S(e))return this._chartBounding;var r=this.getDrawPaneById(e);if(S(r))switch(t??m.DomPosition.Root){case m.DomPosition.Root:return r.getBounding();case m.DomPosition.Main:return r.getMainWidget().getBounding();case m.DomPosition.YAxis:return(n=(i=r.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&n!==void 0?n:null}return null},o.prototype.setPrecision=function(e){this._chartStore.setPrecision(e)},o.prototype.getPrecision=function(){return this._chartStore.getPrecision()},o.prototype.setStyles=function(e){var t=this;this._setOptions(function(){t._chartStore.setStyles(e)})},o.prototype.getStyles=function(){return this._chartStore.getStyles()},o.prototype.setCustomApi=function(e){var t=this;this._setOptions(function(){t._chartStore.setCustomApi(e)})},o.prototype.getCustomApi=function(){return this._chartStore.getCustomApi()},o.prototype.setLocale=function(e){var t=this;this._setOptions(function(){t._chartStore.setLocale(e)})},o.prototype.getLocale=function(){return this._chartStore.getLocale()},o.prototype.setTimezone=function(e){var t=this;this._setOptions(function(){t._chartStore.setTimezone(e)})},o.prototype.getTimezone=function(){return this._chartStore.getTimezone()},o.prototype.setThousandsSeparator=function(e){var t=this;this._setOptions(function(){t._chartStore.setThousandsSeparator(e)})},o.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},o.prototype.setDecimalFold=function(e){var t=this;this._setOptions(function(){t._chartStore.setDecimalFold(e)})},o.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},o.prototype._setOptions=function(e){e(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},o.prototype.setOffsetRightDistance=function(e){this._chartStore.setOffsetRightDistance(e,!0)},o.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},o.prototype.setMaxOffsetLeftDistance=function(e){e<0||this._chartStore.setMaxOffsetLeftDistance(e)},o.prototype.setMaxOffsetRightDistance=function(e){e<0||this._chartStore.setMaxOffsetRightDistance(e)},o.prototype.setLeftMinVisibleBarCount=function(e){e<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(e))},o.prototype.setRightMinVisibleBarCount=function(e){e<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(e))},o.prototype.setBarSpace=function(e){this._chartStore.setBarSpace(e)},o.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},o.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},o.prototype.clearData=function(){this._chartStore.clearData()},o.prototype.getDataList=function(){return this._chartStore.getDataList()},o.prototype.applyNewData=function(e,t){this._drawPanes.forEach(function(n){n.getAxisComponent().setAutoCalcTickFlag(!0)});var i={forward:!1,backward:!1};Ht(t)?(i.forward=t,i.backward=t):i=A(A({},i),t),this._chartStore.addData(e,et.Init,i)},o.prototype.updateData=function(e){this._chartStore.addData(e,et.Update)},o.prototype.setLoadMoreDataCallback=function(e){this._chartStore.setLoadMoreDataCallback(e)},o.prototype.createIndicator=function(e,t,i){var n,r=z(e)?{name:e}:e;if(ri(r.name)===null)return null;var a=i??{};if(z(a.id)||(a.id=ie(hi)),z(r.id)||(r.id=ie(r.name)),this._chartStore.addIndicator(r,a.id,t!=null&&t)){var s=!1;return S(this.getDrawPaneById(a.id))||(this._createPane(Ri,a.id,a),(n=a.height)!==null&&n!==void 0||(a.height=100),s=!0),this.setPaneOptions(a),this.layout({sort:s,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),r.id}return null},o.prototype.overrideIndicator=function(e){return this._chartStore.overrideIndicator(e)},o.prototype.getIndicators=function(e){return this._chartStore.getIndicatorsByFilter(e??{})},o.prototype.removeIndicator=function(e){var t=this,i=this._chartStore.removeIndicator(e??{});if(i){var n=!1,r=[];this._drawPanes.forEach(function(a){var s=a.getId();s!==K&&s!==H&&r.push(s)}),r.forEach(function(a){if(!t._chartStore.hasIndicators(a)){var s=t._drawPanes.findIndex(function(u){return u.getId()===a}),l=t._drawPanes[s];S(l)&&(n=!0,t._recalculatePaneHeight(l,0,l.getBounding().height),t._drawPanes.splice(s,1),l.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:n,measureHeight:n,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return i},o.prototype.createOverlay=function(e){var t=this,i=[],n=[],r=function(s){S(s.paneId)&&t.getDrawPaneById(s.paneId)!==null?n.push(!0):(s.paneId=K,n.push(!1)),i.push(s)};z(e)?r({name:e}):st(e)?e.forEach(function(s){var l=null;l=z(s)?{name:s}:s,r(l)}):r(e);var a=this._chartStore.addOverlays(i,n);return st(e)?a:a[0]},o.prototype.getOverlays=function(e){return this._chartStore.getOverlaysByFilter(e??{})},o.prototype.overrideOverlay=function(e){return this._chartStore.overrideOverlay(e)},o.prototype.removeOverlay=function(e){return this._chartStore.removeOverlay(e??{})},o.prototype.setPaneOptions=function(e){var t,i,n,r=this,a=!1,s=!1,l=S(e.id),u=function(d){var v=d.getId();if(l&&e.id===v||!l){if(v!==H){if(L(e.height)&&e.height>0){var g=Math.max((n=e.minHeight)!==null&&n!==void 0?n:d.getOptions().minHeight,0),f=Math.max(g,e.height);s=!0,a=!0,d.setOriginalBounding({height:f}),c._recalculatePaneHeight(d,f,-f)}if(S(e.state)&&d.getOptions().state!==e.state){a=!0,s=!0;var y=e.state;switch(y){case"maximize":if(!S(c._drawPanes.find(function(T){var w=T.getId();return T.getOptions().state==="maximize"&&w!==H}))){d.getOptions().state==="normal"&&d.setOriginalBounding({height:d.getBounding().height}),d.setOptions({state:y});var x=c._chartBounding.height;d.setBounding({height:x-c._xAxisPane.getBounding().height}),c._drawPanes.forEach(function(T){var w;T.getId()!==H&&T.getId()!==v&&(T.setBounding({height:T.getOriginalBounding().height}),T.setVisible(!1),(w=r._separatorPanes.get(T))===null||w===void 0||w.setVisible(!1))})}break;case"minimize":f=d.getBounding().height;var _=d.getOptions().state,b=f-30;_==="maximize"&&(b=d.getOriginalBounding().height-30),c._recalculatePaneHeight(d,30,b)&&(_==="normal"&&d.setOriginalBounding({height:f}),d.setOptions({state:y})),c._drawPanes.forEach(function(T){var w;T.getId()!==H&&(T.setVisible(!0),(w=r._separatorPanes.get(T))===null||w===void 0||w.setVisible(!0))});break;default:f=d.getOriginalBounding().height,c._recalculatePaneHeight(d,f,d.getBounding().height-f)&&d.setOptions({state:y}),c._drawPanes.forEach(function(T){var w;T.getId()!==H&&(T.setVisible(!0),(w=r._separatorPanes.get(T))===null||w===void 0||w.setVisible(!0))})}}}S(e.axis)&&(s=!0);var C=A({},e);if(delete C.state,d.setOptions(C),v===e.id)return"break"}},c=this;try{for(var h=tt(this._drawPanes),p=h.next();!p.done&&u(p.value)!=="break";p=h.next());}catch(d){t={error:d}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}s&&this.layout({measureHeight:a,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},o.prototype.getPaneOptions=function(e){var t;if(S(e)){var i=this.getDrawPaneById(e);return(t=i?.getOptions())!==null&&t!==void 0?t:null}return this._drawPanes.map(function(n){return n.getOptions()})},o.prototype.setZoomEnabled=function(e){this._chartStore.setZoomEnabled(e)},o.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},o.prototype.setScrollEnabled=function(e){this._chartStore.setScrollEnabled(e)},o.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},o.prototype.scrollByDistance=function(e,t){var i=this,n=L(t)&&t>0?t:0;if(this._chartStore.startScroll(),n>0){var r=new ye({duration:n});r.doFrame(function(a){var s=e*(a/n);i._chartStore.scroll(s)}),r.start()}else this._chartStore.scroll(e)},o.prototype.scrollToRealTime=function(e){var t=this._chartStore.getBarSpace().bar,i=(this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/t)*t;this.scrollByDistance(i,e)},o.prototype.scrollToDataIndex=function(e,t){var i=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-e))*this._chartStore.getBarSpace().bar;this.scrollByDistance(i,t)},o.prototype.scrollToTimestamp=function(e,t){var i=_e(this.getDataList(),"timestamp",e);this.scrollToDataIndex(i,t)},o.prototype.zoomAtCoordinate=function(e,t,i){var n=this,r=L(i)&&i>0?i:0,a=this._chartStore.getBarSpace().bar,s=a*e-a;if(r>0){var l=0,u=new ye({duration:r});u.doFrame(function(c){var h=s*(c/r),p=(h-l)/n._chartStore.getBarSpace().bar*10;n._chartStore.zoom(p,t),l=h}),u.start()}else this._chartStore.zoom(s/a*10,t)},o.prototype.zoomAtDataIndex=function(e,t,i){var n=this._chartStore.dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:n,y:0},i)},o.prototype.zoomAtTimestamp=function(e,t,i){var n=_e(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,n,i)},o.prototype.convertToPixel=function(e,t){var i,n=this,r=t??{},a=r.paneId,s=a===void 0?K:a,l=r.absolute,u=l!==void 0&&l,c=[];if(s!==H){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=h.getAxisComponent();c=d.map(function(f){var y={},x=f.dataIndex;if(L(f.timestamp)&&(x=n._chartStore.timestampToDataIndex(f.timestamp)),L(x)&&(y.x=v.convertToPixel(x)),L(f.value)){var _=g.convertToPixel(f.value);y.y=u?p.top+_:_}return y})}}return st(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},o.prototype.convertFromPixel=function(e,t){var i,n=this,r=t??{},a=r.paneId,s=a===void 0?K:a,l=r.absolute,u=l!==void 0&&l,c=[];if(s!==H){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=[].concat(e),v=this._xAxisPane.getAxisComponent(),g=h.getAxisComponent();c=d.map(function(f){var y,x={};if(L(f.x)){var _=v.convertFromPixel(f.x);x.dataIndex=_,x.timestamp=(y=n._chartStore.dataIndexToTimestamp(_))!==null&&y!==void 0?y:void 0}if(L(f.y)){var b=u?f.y-p.top:f.y;x.value=g.convertFromPixel(b)}return x})}}return st(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},o.prototype.executeAction=function(e,t){var i;if(e===m.ActionType.OnCrosshairChange){var n=A({},t);(i=n.paneId)!==null&&i!==void 0||(n.paneId=K),this._chartStore.setCrosshair(n,{notExecuteAction:!0})}},o.prototype.subscribeAction=function(e,t){this._chartStore.subscribeAction(e,t)},o.prototype.unsubscribeAction=function(e,t){this._chartStore.unsubscribeAction(e,t)},o.prototype.getConvertPictureUrl=function(e,t,i){var n=this,r=this._chartBounding,a=r.width,s=r.height,l=gt("canvas",{width:"".concat(a,"px"),height:"".concat(s,"px"),boxSizing:"border-box"}),u=l.getContext("2d"),c=Et(l);l.width=a*c,l.height=s*c,u.scale(c,c),u.fillStyle=i??"#FFFFFF",u.fillRect(0,0,a,s);var h=e!=null&&e;return this._drawPanes.forEach(function(p){var d=n._separatorPanes.get(p);if(S(d)){var v=d.getBounding();u.drawImage(d.getImage(h),v.left,v.top,v.width,v.height)}var g=p.getBounding();u.drawImage(p.getImage(h),0,g.top,a,g.height)}),l.toDataURL("image/".concat(t??"jpeg"))},o.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},o.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(e){e.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},o}(),ae=new Map,po=1,go={clone:Bt,merge:Y,isString:z,isNumber:L,isValid:S,isObject:nt,isArray:st,isFunction:j,isBoolean:Ht,formatValue:G,formatPrecision:q,formatBigNumber:Ve,formatDate:Ne,formatThousands:ze,formatFoldDecimal:Ye,calcTextWidth:Xt,getLinearSlopeIntercept:oe,getLinearYFromSlopeIntercept:Ce,getLinearYFromCoordinates:Ut,checkCoordinateOnArc:bi,checkCoordinateOnCircle:vi,checkCoordinateOnLine:si,checkCoordinateOnPolygon:fi,checkCoordinateOnRect:yi,checkCoordinateOnText:xi};m.dispose=function(o){var e,t,i=null;if(o instanceof Wi)i=o.id;else{var n=null;i=(e=(n=z(o)?document.getElementById(o):o)==null?void 0:n.getAttribute("k-line-chart-id"))!==null&&e!==void 0?e:null}i!==null&&((t=ae.get(i))===null||t===void 0||t.destroy(),ae.delete(i))},m.getFigureClass=function(o){var e;return(e=qt[o])!==null&&e!==void 0?e:null},m.getOverlayClass=function(o){var e;return(e=Zt[o])!==null&&e!==void 0?e:null},m.getSupportedFigures=function(){return Object.keys(qt)},m.getSupportedIndicators=function(){return Object.keys(ne)},m.getSupportedLocales=function(){return Object.keys(re)},m.getSupportedOverlays=function(){return Object.keys(Zt)},m.init=function(o,e){var t=null;if((t=z(o)?document.getElementById(o):o)===null)return null;var i=ae.get(t.id);if(S(i))return i;var n="k_line_chart_".concat(po++);return(i=new Wi(t,e)).id=n,t.setAttribute("k-line-chart-id",n),ae.set(n,i),i},m.registerFigure=function(o){qt[o.name]=ai.extend(o)},m.registerIndicator=function(o){ne[o.name]=He.extend(o)},m.registerLocale=function(o,e){re[o]=A(A({},re[o]),e)},m.registerOverlay=function(o){Zt[o.name]=Xe.extend(o)},m.registerStyles=function(o,e){ci[o]=e},m.registerXAxis=function(o){Ee[o.name]=Fi.extend(o)},m.registerYAxis=function(o){Se[o.name]=Kt.extend(o)},m.utils=go,m.version=function(){return"10.0.0-alpha4"}});</script>
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f5f0d6d79a8fb0825e285ab72dc542cb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ad0798f3><!--[--><div class="banner top" role="banner" data-v-c6670940><span data-v-c6670940>🔔  v9 将维护到 2025 年 3 月份，建议尽快迁移到新版本。</span><button class="banner-close" data-v-c6670940><span class="close" data-v-c6670940>×</span></button></div><!--]--><!--[--><span tabindex="-1" data-v-57f74b3d></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-57f74b3d>Skip to content</a><!--]--><!----><header class="VPNav" data-v-ad0798f3 data-v-5f51bb04><div class="VPNavBar" data-v-5f51bb04 data-v-5635185b><div class="wrapper" data-v-5635185b><div class="container" data-v-5635185b><div class="title" data-v-5635185b><div class="VPNavBarTitle has-sidebar" data-v-5635185b data-v-962a62f5><a class="title" href="/" data-v-962a62f5><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo-nav.svg" alt data-v-718b2b69><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-5635185b><div class="content-body" data-v-5635185b><!--[--><!--]--><div class="VPNavBarSearch search" data-v-5635185b><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-5635185b data-v-93af0ac4><span id="main-nav-aria-label" class="visually-hidden" data-v-93af0ac4> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/introduction" tabindex="0" data-v-93af0ac4 data-v-41f579a1><!--[--><span data-v-41f579a1>指南</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-93af0ac4 data-v-9a1001a3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9a1001a3><span class="text" data-v-9a1001a3><!----><span data-v-9a1001a3>API</span><span class="vpi-chevron-down text-icon" data-v-9a1001a3></span></span></button><div class="menu" data-v-9a1001a3><div class="VPMenu" data-v-9a1001a3 data-v-2a96c481><div class="items" data-v-2a96c481><!--[--><!--[--><div class="VPMenuLink" data-v-2a96c481 data-v-83a6caa3><a class="VPLink link" href="/api/chart/init" data-v-83a6caa3><!--[--><span data-v-83a6caa3>图表API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2a96c481 data-v-83a6caa3><a class="VPLink link" href="/api/instance/getDom" data-v-83a6caa3><!--[--><span data-v-83a6caa3>实例API</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://pro.klinecharts.com" target="_blank" rel="noreferrer" tabindex="0" data-v-93af0ac4 data-v-41f579a1><!--[--><span data-v-41f579a1>Pro</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://preview.klinecharts.com" target="_blank" rel="noreferrer" tabindex="0" data-v-93af0ac4 data-v-41f579a1><!--[--><span data-v-41f579a1>预览</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/customize" tabindex="0" data-v-93af0ac4 data-v-41f579a1><!--[--><span data-v-41f579a1>定制</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/sponsor" tabindex="0" data-v-93af0ac4 data-v-41f579a1><!--[--><span data-v-41f579a1>赞助</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-93af0ac4 data-v-9a1001a3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9a1001a3><span class="text" data-v-9a1001a3><!----><span data-v-9a1001a3>10.0.0-alpha4</span><span class="vpi-chevron-down text-icon" data-v-9a1001a3></span></span></button><div class="menu" data-v-9a1001a3><div class="VPMenu" data-v-9a1001a3 data-v-2a96c481><div class="items" data-v-2a96c481><!--[--><!--[--><div class="VPMenuLink" data-v-2a96c481 data-v-83a6caa3><a class="VPLink link vp-external-link-icon" href="https://v9.klinecharts.com" target="_blank" rel="noreferrer" data-v-83a6caa3><!--[--><span data-v-83a6caa3>9.x 文档</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-2a96c481 data-v-83a6caa3><a class="VPLink link vp-external-link-icon" href="https://v8.klinecharts.com/zh-CN" target="_blank" rel="noreferrer" data-v-83a6caa3><!--[--><span data-v-83a6caa3>8.x 文档</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-5635185b data-v-6c99cfab data-v-9a1001a3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-9a1001a3><span class="text" data-v-9a1001a3><span class="vpi-languages option-icon" data-v-9a1001a3></span><!----><span class="vpi-chevron-down text-icon" data-v-9a1001a3></span></span></button><div class="menu" data-v-9a1001a3><div class="VPMenu" data-v-9a1001a3 data-v-2a96c481><!----><!--[--><!--[--><div class="items" data-v-6c99cfab><p class="title" data-v-6c99cfab>🇨🇳 简体中文</p><!--[--><div class="VPMenuLink" data-v-6c99cfab data-v-83a6caa3><a class="VPLink link" href="/en-US/api/chart/registerLocale" data-v-83a6caa3><!--[--><span data-v-83a6caa3>🇬🇧 English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-5635185b data-v-8327e4bb><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-8327e4bb data-v-fa2a4131 data-v-0ac7c1c8><span class="check" data-v-0ac7c1c8><span class="icon" data-v-0ac7c1c8><!--[--><span class="vpi-sun sun" data-v-fa2a4131></span><span class="vpi-moon moon" data-v-fa2a4131></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-5635185b data-v-0759e887 data-v-e9540cd8><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-e9540cd8 data-v-e761fbe7><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-e9540cd8 data-v-e761fbe7><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/more/feedback" aria-label target="_blank" rel="noopener" data-v-e9540cd8 data-v-e761fbe7><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-5635185b data-v-cd620d92 data-v-9a1001a3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9a1001a3><span class="vpi-more-horizontal icon" data-v-9a1001a3></span></button><div class="menu" data-v-9a1001a3><div class="VPMenu" data-v-9a1001a3 data-v-2a96c481><!----><!--[--><!--[--><div class="group translations" data-v-cd620d92><p class="trans-title" data-v-cd620d92>🇨🇳 简体中文</p><!--[--><div class="VPMenuLink" data-v-cd620d92 data-v-83a6caa3><a class="VPLink link" href="/en-US/api/chart/registerLocale" data-v-83a6caa3><!--[--><span data-v-83a6caa3>🇬🇧 English</span><!--]--></a></div><!--]--></div><div class="group" data-v-cd620d92><div class="item appearance" data-v-cd620d92><p class="label" data-v-cd620d92>主题</p><div class="appearance-action" data-v-cd620d92><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-cd620d92 data-v-fa2a4131 data-v-0ac7c1c8><span class="check" data-v-0ac7c1c8><span class="icon" data-v-0ac7c1c8><!--[--><span class="vpi-sun sun" data-v-fa2a4131></span><span class="vpi-moon moon" data-v-fa2a4131></span><!--]--></span></span></button></div></div></div><div class="group" data-v-cd620d92><div class="item social-links" data-v-cd620d92><div class="VPSocialLinks social-links-list" data-v-cd620d92 data-v-e9540cd8><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-e9540cd8 data-v-e761fbe7><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-e9540cd8 data-v-e761fbe7><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/more/feedback" aria-label target="_blank" rel="noopener" data-v-e9540cd8 data-v-e761fbe7><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-5635185b data-v-c19bb6ab><span class="container" data-v-c19bb6ab><span class="top" data-v-c19bb6ab></span><span class="middle" data-v-c19bb6ab></span><span class="bottom" data-v-c19bb6ab></span></span></button></div></div></div></div><div class="divider" data-v-5635185b><div class="divider-line" data-v-5635185b></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-ad0798f3 data-v-172c2717><div class="container" data-v-172c2717><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-172c2717><span class="vpi-align-left menu-icon" data-v-172c2717></span><span class="menu-text" data-v-172c2717>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-172c2717 data-v-fa8e34b9><button data-v-fa8e34b9>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-ad0798f3 data-v-0ede4c91><div class="curtain" data-v-0ede4c91></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0ede4c91><span class="visually-hidden" id="sidebar-aria-label" data-v-0ede4c91> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-534d6274><section class="VPSidebarItem level-0 has-active" data-v-534d6274 data-v-7c44870a><!----><div class="items" data-v-7c44870a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/init" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>init</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/dispose" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>dispose</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/version" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>version</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerLocale" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerLocale</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/getSupportedLocales" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>getSupportedLocales</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerStyles" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerStyles</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerFigure" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerFigure</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/getSupportedFigures" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>getSupportedFigures</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/getFigureClass" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>getFigureClass</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerIndicator" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerIndicator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/getSupportedIndicators" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>getSupportedIndicators</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerOverlay" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerOverlay</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/getSupportedOverlays" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>getSupportedOverlays</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerXAxis" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerXAxis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/registerYAxis" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>registerYAxis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7c44870a data-v-7c44870a><div class="item" data-v-7c44870a><div class="indicator" data-v-7c44870a></div><a class="VPLink link link" href="/api/chart/utils" data-v-7c44870a><!--[--><p class="text" data-v-7c44870a>utils</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ad0798f3 data-v-18cfcd29><div class="VPDoc has-sidebar has-aside" data-v-18cfcd29 data-v-73762f71><!--[--><!--]--><div class="container" data-v-73762f71><div class="aside" data-v-73762f71><div class="aside-curtain" data-v-73762f71></div><div class="aside-container" data-v-73762f71><div class="aside-content" data-v-73762f71><div class="VPDocAside" data-v-73762f71 data-v-af3de658><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-af3de658 data-v-a9300d79><div class="content" data-v-a9300d79><div class="outline-marker" data-v-a9300d79></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a9300d79>页面导航</div><ul class="VPDocOutlineItem root" data-v-a9300d79 data-v-1766c6c4><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-af3de658></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><a class="asideSponsor" href="https://www.tradingx.cloud/" target="_blank" rel="noopener noreferrer" data-v-2e8097db><img class="" src="/images/sponsors/tradingx.png" alt="tradingx" data-v-2e8097db><span style="padding:6px 22px 0 22px;text-align:center;" data-v-2e8097db>以免费赋能专业，以创新重塑交易</span></a><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-73762f71><div class="content-container" data-v-73762f71><!--[--><!--]--><main class="main" data-v-73762f71><div style="position:relative;" class="vp-doc _api_chart_registerLocale" data-v-73762f71><div><h1 id="registerlocale-locale-locales" tabindex="-1">registerLocale(locale, locales) <a class="header-anchor" href="#registerlocale-locale-locales" aria-label="Permalink to &quot;registerLocale(locale, locales)&quot;">​</a></h1><p><code>registerLocale</code> 用于扩展多语言。</p><h2 id="reference" tabindex="-1">参考 <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;参考 {#reference}&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  locale: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  locales: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    time: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    open: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    high: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    low: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    close: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    volume: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    change: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    turnover: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span></code></pre></div><h3 id="parameters" tabindex="-1">参数 <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;参数 {#parameters}&quot;">​</a></h3><ul><li><code>locale</code> 扩展语言名称。</li><li><code>locales</code> 语言配置。</li></ul><h3 id="returns" tabindex="-1">返回值 <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;返回值 {#returns}&quot;">​</a></h3><p><code>registerLocale</code> 返回 <code>undefined</code> 。</p><h2 id="usage" tabindex="-1">用法 <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;用法 {#usage}&quot;">​</a></h2><h3 id="init-local" tabindex="-1">初始化时使用 <a class="header-anchor" href="#init-local" aria-label="Permalink to &quot;初始化时使用 {#init-local}&quot;">​</a></h3><!----><h3 id="setLocale" tabindex="-1">动态设置 <a class="header-anchor" href="#setLocale" aria-label="Permalink to &quot;动态设置 {#setLocale}&quot;">​</a></h3><!----></div></div></main><footer class="VPDocFooter" data-v-73762f71 data-v-dabe9063><!--[--><!--]--><div class="edit-info" data-v-dabe9063><div class="edit-link" data-v-dabe9063><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/klinecharts/KLineChart/edit/main/docs/api/chart/registerLocale.md" target="_blank" rel="noreferrer" data-v-dabe9063><!--[--><span class="vpi-square-pen edit-link-icon" data-v-dabe9063></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-dabe9063><p class="VPLastUpdated" data-v-dabe9063 data-v-00752898>最后更新于: <time datetime="2024-11-29T18:31:55.000Z" data-v-00752898></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-dabe9063><span class="visually-hidden" id="doc-footer-aria-label" data-v-dabe9063>Pager</span><div class="pager" data-v-dabe9063><a class="VPLink link pager-link prev" href="/api/chart/version" data-v-dabe9063><!--[--><span class="desc" data-v-dabe9063>上一篇</span><span class="title" data-v-dabe9063>version</span><!--]--></a></div><div class="pager" data-v-dabe9063><a class="VPLink link pager-link next" href="/api/chart/getSupportedLocales" data-v-dabe9063><!--[--><span class="desc" data-v-dabe9063>下一篇</span><span class="title" data-v-dabe9063>getSupportedLocales</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-ad0798f3 data-v-11845c0a><div class="container" data-v-11845c0a><p class="message" data-v-11845c0a>Released under the <a href="https://github.com/klinecharts/KLineChart/blob/main/LICENSE">Apache License V2</a>.</p><p class="copyright" data-v-11845c0a>Copyright © 2018-2025 <a href="https://github.com/liihuu">liihuu</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>